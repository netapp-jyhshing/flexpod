<!DOCTYPE html>
<html lang="en">
  <head class="at-element-marker">
  <title>Deployment Procedures</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="language" content="en">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="Deployment Procedures" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/us-en/flexpod/express/express-direct-attach-aff220-deploy_deployment_procedures.html" />
	<meta property="og:description" content="This document provides details for configuring a fully redundant, highly available FlexPod Express system." />
  <meta property="og:image" content="https://docs.netapp.com/us-en/flexpod/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation"/>
  <meta http-equiv="nss-subtype" content="User Guide"/>
  
  <meta name="description" content="This document provides details for configuring a fully redundant, highly available FlexPod Express system.">
  <meta name="keywords" content=" deployment, procedures, configure, flexpod, express, ip, based, storage, vmware, vsphere, setup, cisco, ucs, vcenter">
  
  

  <!-- Icons -->
  <link rel="icon" href="/us-en/flexpod/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed -->
  

  <!-- CSS Definitions: NetApp CSS should be defined after generic css -->

  <!-- Elastic Search -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">

  <!-- Controls AsciiDoctor Admonition Blocks -->
  <link rel="stylesheet" type="text/css" href="/us-en/flexpod/css/font-awesome.min.css">

  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/us-en/flexpod/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel="stylesheet" type="text/css" href="/us-en/flexpod/css/netapp.css">

  <!-- WWW CSS Content -->
  <link rel="stylesheet" type="text/css" href="/us-en/flexpod/css/www-luci-dotcom.min.css">
  <link rel="stylesheet" type="text/css" href="/us-en/flexpod/css/www-netapp-dotcom.css">
  <link rel="stylesheet" href="/us-en/flexpod/css/www-netapp-library-critical.min.css" media="all" >
  <link rel="stylesheet" href="/us-en/flexpod/css/www-netapp-library-non-critical.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="stylesheet" href="/us-en/flexpod/css/www-netapp-library-global-header-footer.min.css">

  <!-- NetApp IE Customizations -->
  <link rel="stylesheet" href='/us-en/flexpod/css/na-utility.css' type='text/css'>
  <link rel="stylesheet" href='/us-en/flexpod/css/na-sidebar.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/flexpod/css/clouddocs.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/flexpod/css/na-pagenav.css' type='text/css'>

  
  <link rel="stylesheet" href="/us-en/flexpod/css/landing-page.css" type="text/css">
  <link rel="stylesheet" href="/us-en/flexpod/css/tabbed-blocks.css" type="text/css">
  <link rel="stylesheet" href="/us-en/flexpod/css/product-family.css" type="text/css">
  

  
  <link rel='stylesheet' href='/us-en/flexpod/css/na-feature.css' type='text/css'>
  


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script>
  
    <script src='/us-en/flexpod/js/na-search.js'></script>
  

  
  <script src='/us-en/flexpod/js/na-pagenav.js'></script>
  

  <link rel='stylesheet' href='/us-en/flexpod/css/prism.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/flexpod/css/prism-netapp.css' type='text/css'>


  <script src='/us-en/flexpod/js/na-utility.js'></script>
  <script src='/us-en/flexpod/js/clouddocs.js'></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    var head = document.getElementsByTagName('head')[0];
    var adobe = document.createElement("script");
    adobe.type = "text/javascript";
    adobe.src = "//assets.adobedtm.com/60287eadf1ee/c284da483c83/launch-e9ff3acac59f.min.js";
    head.appendChild(adobe);
  }
  </script>
  <script src='/us-en/flexpod/js/jquery.navgoco.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src='/us-en/flexpod/js/toc.js'></script>
  <script src='/us-en/flexpod/js/customscripts.js'></script>

  <script>
      $(document).ready(function() {
          
          var collapseOnInit = true;
          

          var navSettings = {
              "caretHtml": '',
              "accordion": collapseOnInit,
              "openClass": 'active', // open
              "save": false, // leave false or nav highlighting doesn't work right
              "cookie": {
                  "name": 'navgoco',
                  "expires": false,
                  "path": '/'
              },
              "slide": {
                  "duration": 400,
                  "easing": 'swing'
              }
          };

          // Initialize navgoco with default options
          $("#mysidebar").navgoco(navSettings);
          

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-81697994-3"></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-81697994-3');
  }
  </script>
  <script src='/us-en/flexpod/js/product-family.js'></script>
</head>


  <body class role="document">
    <div id="page" class="n-off-canvas-menu">
      <div class="n-off-canvas-menu__menu"><!--TODO: Add offcanvas code --></div>
      <div class="n-off-canvas-menu__content-wrap">
        <header class="site-header" id="banner">
  <!-- Start top_hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/products-a-z/" class="n-top-hat__link">Product and Solutions</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/support-and-training/netapp-university/" class="n-top-hat__link">Support and Training</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://cloud.netapp.com" class="n-top-hat__link">Cloud Central</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://community.netapp.com/" class="n-top-hat__link">Community</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://blog.netapp.com/" class="n-top-hat__link">Blog</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://customers.netapp.com/en/" class="n-top-hat__link">Customer Stories</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
      <div class="n-top-hat__utils">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- End top_hat -->

  <!-- Start property bar -->
  <style>
    .n-property-navigation-bar__menus--desktop-experience .n-menu--mega__default-content__heading span {
    color: #34B0FF;
    }
  </style>
  <div class="n-property-bar " data-ntap-ui="sticky-nav">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link">
          <span class="n-property-bar__menu-toggle-text">Menu</span>
          <svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
            <title>bars</title>
            <use xlink:href="/us-en/flexpod/common/svg/sprite.svg#bars"></use>
          </svg>
        </a>
      </div>
      <div class="n-property-bar__property-mark ">
        <a href="https://www.netapp.com" class="n-property-bar__property-link">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/us-en/flexpod/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg class="n-icon-netapp-logo n-property-bar__logo-svg" aria-labelledby="title">
              <title>netapp-logo</title>
              <use xlink:href="/us-en/flexpod/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
        </a>
      </div>

      
      <div class="search-property-bar">
        <div id="search-demo-container" class="searchbox n-property-bar__search">
          <div id="react-search" 
          data-search-html="/us-en/flexpod/search.html"
          data-type="widget" 
          data-placeholder="Search Documentation" 
          data-no-results-found="No results were found for {query}" 
          data-did-you-mean="Search for {suggestion}." 
          data-no-results-found-did-you-mean="No results found for {query}. Did you mean {suggestion}?" 
          data-results-found="{hitCount} results found"  
          data-sk-es-pf-indexes=""></div>
          <button class="n-property-bar__search-toggle-button" type="button">
            <svg class="n-icon-search n-property-bar__search-toggle-button-icon" aria-labelledby="title">
              <title>search</title>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/flexpod/common/svg/sprite.svg#search"></use>
            </svg>
          </button>
        </div>
      </div>
      
    </div>
  </div>
  <div class="n-property-bar__toolbar">
    <!-- Start Language Selector --><div id="ie-i18n" class="n-property-bar__lang-selector">
      <div id="ie-i18n-menu">
      <span class="ie-i18n-lang">English</span>
        <button class="ie-i18n-icon-container" type="button">
          <svg class="n-globe__icon" aria-labelledby="title">
            <title>globe</title>
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/flexpod/common/svg/sprite.svg#globe"></use>
          </svg>
        </button>
      </div>
      <div id="n-property-navigation-bar__menu--language-selector" class="ie-i18n-results-container n-menu n-menu--v3 n-menu--is-active" style="display: none;">
        <div class="n-language-selector-menu">
          <div class="n-language-selector-menu__header">
            <span class="n-language-selector-menu__title">Select Your Language</span>
          </div>
          <ul class="n-menu__list">
            <li class="n-menu__list-column">
              <ul class="n-menu__list"><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/us-en/flexpod/express/express-direct-attach-aff220-deploy_deployment_procedures.html" class="n-menu__header-text"><span translate="no" class="notranslate">English</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/ja-jp/flexpod/express/express-direct-attach-aff220-deploy_deployment_procedures.html" class="n-menu__header-text"><span translate="no" class="notranslate">日本語</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/zh-cn/flexpod/express/express-direct-attach-aff220-deploy_deployment_procedures.html" class="n-menu__header-text"><span translate="no" class="notranslate">简体中文</span></a>
                </li></ul>
            </li>
          </ul>
          <div class="menu__footer">
            <p>Current Language: English
            </p>
          </div>
        </div>
      </div>
    </div><!-- End Language Selector -->

    <div class="n-property-bar__cta"></div>
  </div>
  <script>
    $(function(){
        var currentLocalization = $('html').attr('lang');

        var localizationsDictionary = {
            "en-CA" : "https://www.netapp.com/search/index.aspx?for_cr=canada&",
            "en-IN" : "https://www.netapp.com/search/index.aspx?for_cr=india&",
            "nl-NL" : "https://www.netapp.com/search/index.aspx?for_cr=netherlands&",
            "ru-RU" : "https://www.netapp.com/search/index.aspx?for_cr=russia&",
            "sv-SE" : "https://www.netapp.com/search/index.aspx?for_cr=sweden&",
            "it-IT" : "https://www.netapp.com/search/index.aspx?for_cr=italy&",
            "he-IL" : "https://www.netapp.com/search/index.aspx?for_cr=israel&",
            "ko-KR" : "https://www.netapp.com/search/index.aspx?for_cr=korea&",
            "zh-TW" : "https://www.netapp.com/search/index.aspx?for_cr=taiwan&",
            "en-GB" : "https://www.netapp.com/search/index.aspx?for_cr=unitedkingdom&",
            "en-SG" : "https://www.netapp.com/search/index.aspx?for_cr=asean&",
            "en-AU" : "https://www.netapp.com/search/index.aspx?for_cr=australia&",
            "pt-BR" : "https://www.netapp.com/search/index.aspx?for_cr=brasil&",
            "de-CH" : "https://www.netapp.com/search/index.aspx?for_cr=switzerland&",
            "es-MX" : "https://www.netapp.com/search/index.aspx?for_cr=mexico&"
        };

        if($('html').hasClass('ntap-whitelisted') && localizationsDictionary.hasOwnProperty(currentLocalization)) {
            $('.n-property-bar__property-link').attr('href', '/');
        }
    });
  </script>
  <!-- End property bar -->
</header>

        <div class="ie-utility">
  <div class="ie-menu">
    <div class="n-breadcrumb">
      <ul class="n-breadcrumb__list">
        <li class="n-breadcrumb__list-item">
          <a href="https://www.netapp.com">Home</a>
        </li>
        <li class="n-breadcrumb__list-item">
          <a href="https://docs.netapp.com">Documentation</a>
        </li>
        

        <li class="n-breadcrumb__list-item">
          <a href="/us-en/flexpod/">FlexPod</a>
        </li>
        <li class="n-breadcrumb__list-item">
          Deployment Procedures
        </li>
      </ul>
    </div>

    <div style="clear: both"></div><!-- Main needs to have height -->
  </div>
</div>


        <main id="n-main-content" class="n-main-content">
          <!-- Start Documentation Content -->
<div class="ie-main">
  <!-- Sidebar Column -->
  
  <div class="col-md-3" >
      <div class="n-pdf-header">
  <a id="toggleButtonPdf" class="n-pdf-button" type="button">PDFs<span>
    </span>
  </a>
</div>
<ul id="toggleContainerPdf" class="n-pdf-body" style="display:none;"><div class="n-pdf-section">
      <span class="n-pdf-section-title">Site</span>
    </div>
    <li>
      <a target="_blank" href="/us-en/flexpod/pdfs/fullsite-sidebar/FlexPod_Solutions.pdf" >
        <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
        FlexPod Solutions
      </a>
    </li>



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_Definition.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod Definition
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_Express_Technical_Specifications.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod Express Technical Specifications
          </a>
        </li>
        <span>
          




































          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_Datacenter_Technical_Specifications.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod Datacenter Technical Specifications
          </a>
        </li>
        <span>
          




































          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Hybrid_Cloud.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Hybrid Cloud
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/NetApp_Cloud_Insights_for_FlexPod.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            NetApp Cloud Insights for FlexPod
          </a>
        </li>
        <span>
          


















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_with_FabricPool___Inactive_Data_Tiering_to_Amazon_AWS_S3.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod with FabricPool - Inactive Data Tiering to Amazon AWS S3
          </a>
        </li>
        <span>
          









    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Configuration.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Configuration
          </a>
        </li>
        <span>
          
















          
        </span>
      </span>
    

  












          
        </span>
      </span>
    

  












          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Enterprise_Databases.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Enterprise Databases
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/SAP.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            SAP
          </a>
        </li>
        <span>
          




























          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Oracle.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Oracle
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Microsoft_SQL_Server.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Microsoft SQL Server
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Healthcare.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Healthcare
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_Datacenter_for_Epic_Directional_Sizing_Guide.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod Datacenter for Epic Directional Sizing Guide
          </a>
        </li>
        <span>
          



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Reference_architecture.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Reference architecture
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  










          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_Datacenter_for_Epic_EHR_Deployment_Guide.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod Datacenter for Epic EHR Deployment Guide
          </a>
        </li>
        <span>
          





    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Deployment_and_configuration.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Deployment and configuration
          </a>
        </li>
        <span>
          


















          
        </span>
      </span>
    

  








          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_for_Epic_Performance_Testing.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod for Epic Performance Testing
          </a>
        </li>
        <span>
          
















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_for_MEDITECH_Directional_Sizing_Guide.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod for MEDITECH Directional Sizing Guide
          </a>
        </li>
        <span>
          












          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_Datacenter_for_MEDITECH_Deployment_Guide.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod Datacenter for MEDITECH Deployment Guide
          </a>
        </li>
        <span>
          





    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Deployment_and_configuration.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Deployment and configuration
          </a>
        </li>
        <span>
          
























          
        </span>
      </span>
    

  










          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_for_Medical_Imaging.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod for Medical Imaging
          </a>
        </li>
        <span>
          
















          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Virtual_Desktop_Infrastructure.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Virtual Desktop Infrastructure
          </a>
        </li>
        <span>
          












          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Modern_Apps.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Modern Apps
          </a>
        </li>
        <span>
          












          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Microsoft_Apps.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Microsoft Apps
          </a>
        </li>
        <span>
          










          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_Express.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod Express
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_Express_with_Cisco_UCS_C_Series_and_NetApp_AFF_C190_Series_Design_Guide.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod Express with Cisco UCS C-Series and NetApp AFF C190 Series Design Guide
          </a>
        </li>
        <span>
          














          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_Express_with_Cisco_UCS_C_Series_and_NetApp_AFF_C190_Series_Deployment_Guide.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod Express with Cisco UCS C-Series and NetApp AFF C190 Series Deployment Guide
          </a>
        </li>
        <span>
          









    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Deployment_procedures.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Deployment procedures
          </a>
        </li>
        <span>
          




















          
        </span>
      </span>
    

  












          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_Express_with_Cisco_UCS_C_Series_and_AFF_A220_Series_Design_Guide.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod Express with Cisco UCS C-Series and AFF A220 Series Design Guide
          </a>
        </li>
        <span>
          


















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_Express_with_Cisco_UCS_C_Series_and_AFF_A220_Series_Deployment_Guide.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod Express with Cisco UCS C-Series and AFF A220 Series Deployment Guide
          </a>
        </li>
        <span>
          









    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Deployment_procedures.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Deployment procedures
          </a>
        </li>
        <span>
          
















          
        </span>
      </span>
    

  








          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_Express_with_VMware_vSphere_6_7U1_and_NetApp_AFF_A220_with_Direct_Attached_IP_Based_Storage_Design_Guide.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod Express with VMware vSphere 6.7U1 and NetApp AFF A220 with Direct-Attached IP-Based Storage Design Guide
          </a>
        </li>
        <span>
          


















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_Express_with_VMware_vSphere_6_7U1_and_NetApp_AFF_A220_with_Direct_Attached_IP_Based_Storage.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod Express with VMware vSphere 6.7U1 and NetApp AFF A220 with Direct-Attached IP-Based Storage
          </a>
        </li>
        <span>
          








    <div class="n-pdf-section">
  <span class="n-pdf-section-title">This page</span>
</div>

<li class="active">
  <a target="_blank" href="/us-en/flexpod/pdfs/pages/express/express-direct-attach-aff220-deploy_deployment_procedures.pdf" >
    <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
    Deployment Procedures
  </a>
</li>


  








          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod_and_Security.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod and Security
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/FlexPod__The_Solution_to_Ransomware.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            FlexPod, The Solution to Ransomware
          </a>
        </li>
        <span>
          


















          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/flexpod/pdfs/sidebar/Cisco_Intersight_with_NetApp_ONTAP_storage_quick_start_guide.pdf" >
            <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>
            Cisco Intersight with NetApp ONTAP storage quick start guide
          </a>
        </li>
        <span>
          
















          
        </span>
      </span>
    

  


</ul>

<script>
  $("#toggleContainerPdf li.active").parents('li').toggle('display');
  $("#toggleContainerPdf li.active").parents('span.subfolders').toggle('display');
  $("#toggleButtonPdf").click(function () {
    $("#toggleContainerPdf").toggle('display');
  });
</script><ul id="mysidebar" class="nav"><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/index.html">
        FlexPod Solutions Documentation
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod Definition</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod Express Technical Specifications</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec_flexpod_platforms.html">
        FlexPod Platforms
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec_flexpod_rules.html">
        FlexPod Rules
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec_supported_versus_validated_flexpod_configurations.html">
        Supported Versus Validated FlexPod Configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec_storage_software.html">
        Storage Software
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec_minimum_hardware_requirements.html">
        Minimum Hardware Requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec_minimum_software_requirements.html">
        Minimum Software Requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec_connectivity_requirements.html">
        Connectivity Requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec_other_requirements.html">
        Other Requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec__optional_features.html">
        Optional Features
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec__cisco_components.html">
        Cisco Components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec__netapp_components.html">
        NetApp Components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec__power_and_cabling_requirements.html">
        Power and Cabling Requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec__technical_specifications_and_references.html">
        Technical Specifications and References
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec__previous_architectures_and_equipment.html">
        Previous Architectures and Equipment
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec_legacy_equipment.html">
        Legacy Equipment
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/fp-express-tech-spec_additional_information.html">
        Additional Information
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod Datacenter Technical Specifications</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_solution_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_flexpod_platforms.html">
        FlexPod platforms
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_flexpod_rules.html">
        FlexPod rules
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_supported_versus_validated_flexpod_configurations.html">
        Supported versus validated FlexPod configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_netapp_ontap.html">
        NetApp ONTAP
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_cisco_nexus_switching_modes_of_operation.html">
        Cisco Nexus switching modes of operation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_minimum_hardware_requirements.html">
        Minimum hardware requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_minimum_software_requirements.html">
        Minimum software requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_connectivity_requirements.html">
        Connectivity requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_other_requirements.html">
        Other requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_optional_features.html">
        Optional features
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_cisco_components.html">
        Cisco components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_netapp_components.html">
        NetApp components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_power_and_cabling_requirements.html">
        Power and cabling requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_technical_specifications_and_references.html">
        Technical specifications and references
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_legacy_equipment.html">
        Legacy equipment
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/fp-def/dc-tech-spec_where_to_find_additional_information.html">
        Where to find additional Information
      </a></li></ul></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Hybrid Cloud</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> NetApp Cloud Insights for FlexPod</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-insights_netapp_cloud_insights_for_flexpod.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-insights_use_cases.html">
        Use cases
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-insights_architecture.html">
        Architecture
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-insights_design_considerations.html">
        Design considerations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-insights_deploy_cloud_insights_for_flexpod.html">
        Deploy Cloud Insights for FlexPod
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-insights_use_cases_01.html">
        Use cases
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-insights_videos_and_demos.html">
        Videos and demos
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-insights_additional_information.html">
        Additional information
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod with FabricPool - Inactive Data Tiering to Amazon AWS S3</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_introduction.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_flexpod_overview_and_architecture.html">
        FlexPod overview and architecture
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_fabricpool.html">
        FabricPool
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_fabricpool_requirements.html">
        FabricPool requirements
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_software_revisions.html">
        FabricPool software revisions
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_install_fabricpool_license.html">
        Install FabricPool license
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_create_aws_s3_bucket.html">
        Create AWS S3 bucket
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_add_a_cloud_tier_to_ontap.html">
        Add a cloud tier to ONTAP
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_attach_a_cloud_tier_to_an_ontap_aggregate.html">
        Attach a cloud tier to an ONTAP aggregate
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_set_volume_tiering_policy.html">
        Set volume tiering policy
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_set_volume_tiering_minimum_cooling_days.html">
        Set volume tiering minimum cooling days
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_performance_considerations.html">
        Performance considerations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_cost_of_ownership.html">
        Cost of ownership
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_conclusion.html">
        Conclusion
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/hybrid-cloud/cloud-fabricpool_where_to_find_additional_information.html">
        Where to find additional information
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_icp_ucsm32.html">
        FlexPod Datacenter with IBM Cloud Private with Cisco UCS Manager, NetApp ONTAP 9.3 AFF, and VMware vSphere 6.5U1 [Design]
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/dam/en/us/products/collateral/servers-unified-computing/ucs-b-series-blade-servers/whitepaper-c11-740803.pdf">
        FlexPod Datacenter for Platform as a Service with Apprenda 8.2, Cisco ACI 3.1, and Kubernetes 1.9.4 [Design]
      </a></li><li class=" "><a class="na-navbar-padding" href="http://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_hybridcloud_design.html">
        FlexPod Datacenter for Hybrid Cloud with Cisco CloudCenter and NetApp Private Storage [Design}
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_hybridcloud.html">
        FlexPod Datacenter for Hybrid Cloud with Cisco CloudCenter and NetApp Private Storage [Deploy]
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Enterprise Databases</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> SAP</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/ent-db/index.html">
        Introduction to SAP with FlexPod
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_sap_ucsm40_fcsan.html">
        SAP HANA FC SAN CVD [Deploy]
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/dam/en/us/products/collateral/servers-unified-computing/ucs-b-series-blade-servers/sap-appservers-flexpod-with-sql.pdf">
        SAP Non-HANA with SQL White Paper (WP) [Design]
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_sap_ontap96.html">
        FlexPod Datacenter for SAP Solution with Cisco UCS 3rd Generation and NetApp AFF A–Series [Design]
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_sap_ucsm40_fcsan_design.html">
        FlexPod Datacenter for SAP Solution using FibreChannel SAN with Cisco UCS Manager 4.0 and NetApp ONTAP 9.7 [Design]
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/unified-computing/sap-datahub-on-flexpod-with-cisco-container-platform.html">
        Deploy SAP Data Hub on FlexPod with Cisco Container Platform (White Paper)
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_datacenter_ACI_sap_netappaffa_design.html">
        FlexPod Datacenter for SAP Solution with Cisco ACI, Cisco UCS Manager 4.0, and NetApp AFF A–Series  [Design]
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_datacenter_ACI_sap_netappaffa.html">
        FlexPod Datacenter for SAP Solution with Cisco ACI, Cisco UCS Manager 4.0, and NetApp AFF A–Series  [Deploy]
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_datacenter_sap_netappaffa_design.html">
        FlexPod Datacenter for SAP Solution with Cisco UCS Manager 4.0 and NetApp AFF A with ONTAP 9.6 (CVD) [Design]
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/unified-computing/flexpod-oracle-database-sap-app-servers.html">
        SAP Application Servers on FlexPod with Oracle Database and Cisco UCS and NetApp AFF (White Paper)
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/unified-computing/whitepaper-c11-741878.pdf">
        Virtualized SAP HANA on FlexPod Datacenter - Design Considerations and Best Practices (White Paper)
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_saphana_aci_UCSM32.html">
        FlexPod Datacenter for SAP Solution with Cisco UCS Manager 3.2 and Cisco Application Centric Infrastructure (ACI) [Design]
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_saphana_n9k_aff_ucsm.html">
        FlexPod Datacenter for SAP Solution with IP-Based Storage using NetApp AFF A-Series and Cisco UCS Manager 3.2
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Oracle</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_oracle_ucs_m5.html">
        FlexPod Datacenter with Oracle 19c RAC Databases on Cisco UCS and NetApp AFF with NVMe over FibreChannel [Deploy]
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_orc12cr2_affaseries.html">
        FlexPod Datacenter with Oracle RAC Databases on Cisco UCS and NetApp AFF A-Series [Design]
      </a></li><li class=" "><a class="na-navbar-padding" href="http://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_orcrac_12c_bm.html">
        FlexPod Datacenter with Oracle RAC on Oracle Linux [Deploy]
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Microsoft SQL Server</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/mssql2019_flexpod.html">
        FlexPod Datacenter for Microsoft SQL Server 2019 and VMware vSphere 6.7 [Design]
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/mssql2016_flexpod_vmware_cvd.html">
        FlexPod Datacenter with Microsoft SQL Server 2016 and VMware vSphere 6.5
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/mssql2017_flexpod_linux.html">
        FlexPod Datacenter with Microsoft SQL Server 2017 on Linux VM Running on VMware and Hyper-V [Design]
      </a></li></ul></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Healthcare</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod Datacenter for Epic Directional Sizing Guide</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-sizing_introduction.html">
        Overview
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Reference architecture</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-sizing_netapp_storage_reference_architectures_for_epic.html">
        NetApp storage reference architectures for Epic
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-sizing_cisco_ucs_reference_architecture_for_epic.html">
        Cisco UCS reference architecture for Epic
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-sizing_technical_specifications_for_small,_medium,_and_large_architectures.html">
        Technical specifications for small, medium, and large Architectures
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-sizing_additional_information.html">
        Additional information
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-sizing_acknowledgements.html">
        Acknowledgements
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod Datacenter for Epic EHR Deployment Guide</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-deploy_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-deploy_design.html">
        Design
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Deployment and configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-deploy_deployment_and_configuration_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-deploy_infrastructure_hardware_and_software_components.html">
        Infrastructure hardware and software components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-deploy_base_infrastructure_configuration.html">
        Base infrastructure configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-deploy_cisco_ucs_blade_server_and_switch_configuration.html">
        Cisco UCS blade server and switch configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-deploy_cisco_mds_9148s_configuration.html">
        Cisco MDS 9148S configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-deploy_esxi_configuration_best_practices.html">
        ESXi configuration best practices
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-deploy_netapp_configuration.html">
        NetApp configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-deploy_genio_tool.html">
        GenIO tool
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-deploy_where_to_find_additional_information_overview.html">
        Where to find additional information
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-deploy_acknowledgements.html">
        Acknowledgements
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod for Epic Performance Testing</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-performance_introduction.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-performance_executive_summary.html">
        Executive summary
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-performance_test_methodology.html">
        Test methodology
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-performance_workload_testing.html">
        Workload testing
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-performance_conclusion.html">
        Conclusion
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-performance_additional_information.html">
        Additional information
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-epic-performance_acknowledgements.html">
        Acknowledgements
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod for MEDITECH Directional Sizing Guide</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-sizing_introduction.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-sizing_meditech_workload_overview.html">
        MEDITECH Workload Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-sizing_technical_specifications_for_small,_medium_and_large_architectures.html">
        Technical Specifications for Small, Medium and Large Architectures
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-sizing_additional_information.html">
        Additional Information
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-sizing_acknowledgments.html">
        Acknowledgments
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod Datacenter for MEDITECH Deployment Guide</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_design.html">
        Design
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Deployment and configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_deployment_and_configuration_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_base_infrastructure_configuration.html">
        Base infrastructure configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_cisco_ucs_blade_server_and_switch_configuration.html">
        Cisco UCS blade server and switch configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_esxi_configuration_best_practices.html">
        ESXi configuration best practices
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_netapp_configuration.html">
        NetApp configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_aggregate_configuration.html">
        Aggregate configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_storage_virtual_machine_configuration.html">
        Storage virtual machine configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_volume_configuration.html">
        Volume configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_lun_configuration.html">
        LUN configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_initiator_group_configuration.html">
        Initiator group configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_lun_mappings.html">
        LUN mappings
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_meditech_modules_and_components.html">
        MEDITECH modules and components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_acknowledgments.html">
        Acknowledgments
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/ehr-meditech-deploy_where_to_find_additional_information.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod for Medical Imaging</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/medical-imaging_introduction.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/medical-imaging_architecture.html">
        Architecture
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/medical-imaging_solution_infrastructure_hardware_and_software_components.html">
        Solution infrastructure hardware and software components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/medical-imaging_solution_sizing.html">
        Solution sizing
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/medical-imaging_best_practices.html">
        Best practices
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/medical-imaging_conclusion.html">
        Conclusion
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/healthcare/medical-imaging_additional_information.html">
        Additional information
      </a></li></ul></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Virtual Desktop Infrastructure</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/cisco_ucs_ctx1912esxi7u1_flexpodV2.html">
        FlexPod Datacenter with Citrix Virtual Apps & Desktops 1912 LTSR and VMware vSphere 7 for up to 6000 Seats
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_ontap96_vmware710_67_u2_ucs_40_6700_seats.html">
        FlexPod Datacenter with NetApp ONTAP 9.6, VMware Horizon View 7.10, and VMware vSphere 6.7 U2 with Cisco UCS Manager 4.0 for up to 6700 Seats
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/dam/en/us/products/collateral/servers-unified-computing/ucs-b-series-blade-servers/whitepaper-c11-741654.pdf">
        FlexPod for 3D Graphics Visualization with VMware and NVIDIA (White Paper)
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/cisco_ucs_xd715esxi65u1_flexpod.html">
        FlexPod Datacenter with Citrix XenDesktop/XenApp 7.15 and VMware vSphere 6.5 Update 1 for 6000 Seats
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_vmware_horizon_n9k_aff_ucsm32.html">
        FlexPod Datacenter with VMware Horizon View 7.3 and VMware vSphere 6.5 Update 1 with Cisco UCS Manager 3.2 for 5000 Seats
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Modern Apps</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_c480m5l_aiml_design.html">
        FlexPod Datacenter for AI/ML with Cisco UCS 480 ML & Nvidia T4 & vGPU for Deep Learning CVD Design Guide [Design]
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/unified-computing/trident-on-container-platform-with-flexpod.pdf">
        Deploy NetApp Trident CSI Plug-in on Cisco Container Platform with FlexPod [Deploy]
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_openshift_platform_4.html">
        FlexPod Datacenter for OpenShift Container Platform 4 (Deploy)
      </a></li><li class=" "><a class="na-navbar-padding" href="https://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_c480m5l_aiml_design.html">
        FlexPod Datacenter for AI/ML with Cisco UCS C480 ML for Deep Learning Design Guide [Design]
      </a></li><li class=" "><a class="na-navbar-padding" href="http://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/flexpod_docker_deploy_design.html">
        FlexPod Datacenter with Docker Datacenter for Container Management [Design]
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Microsoft Apps</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="http://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/exchange2013_aci_flexpod_vmware_design.html">
        FlexPod Datacenter with Microsoft Exchange 2013, F5 BIG-IP and Cisco ACI [Design]
      </a></li><li class=" "><a class="na-navbar-padding" href="http://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/UCS_CVDs/exchange2013_aci_flexpod_vmware.html">
        FlexPod Datacenter with Microsoft Exchange 2013, F5 BIG-IP and Cisco ACI [Deploy]
      </a></li><li class=" "><a class="na-navbar-padding" href="http://www.cisco.com/c/dam/en/us/td/docs/unified_computing/ucs/UCS_CVDs/sharepoint2013_aci_flexpod_vmware.pdf">
        FlexPod Datacenter with Microsoft Sharepoint 2013 and Cisco ACI [Design]
      </a></li><li class=" "><a class="na-navbar-padding" href="http://www.cisco.com/c/dam/en/us/td/docs/unified_computing/ucs/UCS_CVDs/sharepoint2013_aci_flexpod_vmware_deploy.pdf">
        FlexPod Datacenter with Microsoft Sharepoint 2013 and Cisco ACI [Deploy]
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod Express</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod Express with Cisco UCS C-Series and NetApp AFF C190 Series Design Guide</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-design_executive_summary.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-design_program_summary.html">
        Program summary
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-design_technology_requirements.html">
        Technology requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-design_design_choices.html">
        Design choices
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-design_conclusion.html">
        Conclusion
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-design_where_to_find_additional_information.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod Express with Cisco UCS C-Series and NetApp AFF C190 Series Deployment Guide</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_program_summary_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_solution_overview.html">
        Solution overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_technology_requirements.html">
        Technology requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_flexpod_express_cabling_information.html">
        FlexPod Express cabling information
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Deployment procedures</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_deployment_procedures_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_deploy_cisco_nexus_31108pc-v.html">
        Deploy Cisco Nexus 31108PC-V
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_netapp_storage_deployment_procedure_@part_1@.html">
        NetApp storage deployment procedure (part 1)
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_deploy_cisco_ucs_c-series_rack_server.html">
        Deploy Cisco UCS C-Series rack server
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_netapp_aff_storage_deployment_procedure_@part_2@.html">
        NetApp AFF storage deployment procedure (part 2)
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_vmware_vsphere_6.7u2_deployment_procedure.html">
        VMware vSphere 6.7U2 deployment procedure
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_vmware_vcenter_server_6.7u2_installation_procedure.html">
        VMware vCenter Server 6.7U2 installation procedure
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_vmware_vcenter_server_6.7u2_and_vsphere_clustering_configuration.html">
        VMware vCenter Server 6.7U2 and vSphere clustering configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_netapp_virtual_storage_console_9.6_deployment_procedures.html">
        NetApp Virtual Storage Console 9.6 deployment procedures
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_conclusion.html">
        Conclusion
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_acknowledgments.html">
        Acknowledgments
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_where_to_find_additional_information.html">
        Where to find additional information
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-c190-deploy_version_history.html">
        Version history
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod Express with Cisco UCS C-Series and AFF A220 Series Design Guide</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-design_executive_summary.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-design_program_summary.html">
        Program summary
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-design_solution_overview.html">
        Solution overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-design_technology_requirements.html">
        Technology requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-design_design_choices.html">
        Design choices
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-design_solution_verification.html">
        Solution verification
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-design_conclusion.html">
        Conclusion
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-design_where_to_find_additional_information.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod Express with Cisco UCS C-Series and AFF A220 Series Deployment Guide</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-deploy_program_summary.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-deploy_solution_overview.html">
        Solution overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-deploy_technology_requirements.html">
        Technology requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-deploy_flexpod_express_cabling_information.html">
        FlexPod Express cabling information
      </a></li><li class="subfolders "><a href="/us-en/flexpod/express/express-c-series-aff220-deploy_deployment_procedures_overview.html">
        <div class="na-navbar-padding"> Deployment procedures</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-deploy_cisco_nexus_3172p_deployment_procedure.html">
        Cisco Nexus 3172P deployment procedure
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-deploy_netapp_storage_deployment_procedure_@part_1@.html">
        NetApp storage deployment procedure (part 1)
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-deploy_cisco_ucs_c-series_rack_server_deployment_procedure.html">
        Cisco UCS C-Series rack server deployment procedure
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-deploy_netapp_aff_storage_deployment_procedure_@part_2@.html">
        NetApp AFF Storage Deployment Procedure (Part 2)
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-deploy_vmware_vsphere_6.7_deployment_procedure.html">
        VMware vSphere 6.7 deployment procedure
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-deploy_install_vmware_vcenter_server_6.7.html">
        Install VMware vCenter Server 6.7
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-deploy_configure_vmware_vcenter_server_6.7_and_vsphere_clustering.html">
        Configure VMware vCenter Server 6.7 and vSphere clustering
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-deploy_conclusion.html">
        Conclusion
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-c-series-aff220-deploy_where_to_find_additional_information.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod Express with VMware vSphere 6.7U1 and NetApp AFF A220 with Direct-Attached IP-Based Storage Design Guide</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-design_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-design_program_summary.html">
        Program summary
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-design_solution_overview.html">
        Solution overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-design_technology_requirements.html">
        Technology requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-design_design_choices.html">
        Design choices
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-design_solution_verification.html">
        Solution verification
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-design_conclusion.html">
        Conclusion
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-design_where_to_find_additional_information.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod Express with VMware vSphere 6.7U1 and NetApp AFF A220 with Direct-Attached IP-Based Storage</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-aff220-deploy_program_summary.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-aff220-deploy_solution_overview.html">
        Solution Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-aff220-deploy_technology_requirements.html">
        Technology Requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-aff220-deploy_flexpod_express_cabling_information.html">
        FlexPod Express Cabling Information
      </a></li><li class="  active "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-aff220-deploy_deployment_procedures.html">
        Deployment Procedures
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-aff220-deploy_conclusion.html">
        Conclusion
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/express/express-direct-attach-aff220-deploy_additional_information.html">
        Additional Information
      </a></li></ul></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod and Security</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> FlexPod, The Solution to Ransomware</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/security/security-ransomware_what_is_ransomware.html">
        What is ransomware?
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/security/security-ransomware_flexpod_overview.html">
        FlexPod Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/security/security-ransomware_ransomware_protection_measures.html">
        Ransomware Protection Measures
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/security/security-ransomware_protect_and_recover_data_on_flexpod.html">
        Protect and Recover Data on FlexPod
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/security/security-ransomware_continue_business_operations_without_paying_ransom.html">
        Continue Business Operations Without Paying Ransom
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/security/security-ransomware_conclusion.html">
        Conclusion
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/security/security-ransomware_acknowledgements.html">
        Acknowledgements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/security/security-ransomware_additional_information.html">
        Additional Information
      </a></li></ul></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Cisco Intersight with NetApp ONTAP storage quick start guide</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/ontap-connector-for-intersight/index.html">
        Introduction
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/ontap-connector-for-intersight/ci-qsg_requirements.html">
        Requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/ontap-connector-for-intersight/ci-qsg_before_you_begin.html">
        Before you begin
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/ontap-connector-for-intersight/ci-qsg_claim_targets.html">
        Claim targets
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/ontap-connector-for-intersight/ci-qsg_monitor_netapp_storage_from_cisco_intersight.html">
        Monitor NetApp storage from Cisco Intersight
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/ontap-connector-for-intersight/ci-qsg_use_cases.html">
        Use cases
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/flexpod/ontap-connector-for-intersight/ci-qsg_references.html">
        References
      </a></li></ul></li></ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

  </div>
  

  <div class="ie-content-pane n-doc__component-detail-content n-doc__component-detail-content--show-code">
    <!-- Begin of page container -->
    <article class="page-content">
      <div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">Deployment Procedures</h1>
</div>


<p class="page-details">
  
    
    <time datetime="2021-06-03 20:42:06 +0000">06/03/2021</time>
    
  

<span>Contributors
</span>


  <span>
    <a target="_blank" href="/us-en/flexpod/pdfs/pages/express/express-direct-attach-aff220-deploy_deployment_procedures.pdf" role="button">
      <img src="/us-en/flexpod/images/pdf.png" width="20" height="20"/>Download PDF of this page</a>
  </span>


</p>


<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document provides details for configuring a fully redundant, highly available FlexPod Express system. To reflect this redundancy, the components being configured in each step are referred to as either component A or component B. For example, controller A and controller B identify the two NetApp storage controllers that are provisioned in this document. Switch A and switch B identify a pair of Cisco Nexus switches. Fabric Interconnect A and Fabric Interconnect B are the two Integrated Nexus Fabric Interconnects.</p>
</div>
<div class="paragraph">
<p>In addition, this document describes steps for provisioning multiple Cisco UCS hosts, which are identified sequentially as server A, server B, and so on.</p>
</div>
<div class="paragraph">
<p>To indicate that you should include information pertinent to your environment in a step, <code>&lt;&lt;text&gt;&gt;</code> appears as part of the command structure. See the following example for the <code>vlan create</code> command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Controller01&gt;vlan create vif0 &lt;&lt;mgmt_vlan_id&gt;&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>This document enables you to fully configure the FlexPod Express environment. In this process, various steps require you to insert customer-specific naming conventions, IP addresses, and virtual local area network (VLAN) schemes. The table below describes the VLANs required for deployment, as outlined in this guide. This table can be completed based on the specific site variables and used to implement the document configuration steps.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
If you use separate in-band and out-of-band management VLANs, you must create a layer 3 route between them. For this validation, a common management VLAN was used.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">VLAN name</th>
<th class="tableblock halign-left valign-top">VLAN purpose</th>
<th class="tableblock halign-left valign-top">ID used in validating this document</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Management VLAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VLAN for management interfaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Native VLAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VLAN to which untagged frames are assigned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NFS VLAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VLAN for NFS traffic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">104</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VMware vMotion VLAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VLAN designated for the movement of virtual machines (VMs) from one physical host to another</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">103</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VM traffic VLAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VLAN for VM application traffic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">102</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">iSCSI-A-VLAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VLAN for iSCSI traffic on fabric A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">124</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">iSCSI-B-VLAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VLAN for iSCSI traffic on fabric B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">125</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The VLAN numbers are needed throughout the configuration of FlexPod Express. The VLANs are referred to as <code>&lt;&lt;var_xxxx_vlan&gt;&gt;</code>, where <code>xxxx</code> is the purpose of the VLAN (such as iSCSI-A).</p>
</div>
<div class="paragraph">
<p>The following table lists the VMware VMs created.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">VM Description</th>
<th class="tableblock halign-left valign-top">Host Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VMware vCenter Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seahawks-vcsa.cie.netapp.com</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="cisco-nexus-31108pcv-deployment-procedure">Cisco Nexus 31108PCV deployment procedure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section details the Cisco Nexus 31308PCV switch configuration used in a FlexPod Express environment.</p>
</div>
<div class="sect2">
<h3 id="initial-setup-of-cisco-nexus-31108pcv-switch">Initial setup of Cisco Nexus 31108PCV switch</h3>
<div class="paragraph">
<p>This procedures describes how to configure the Cisco Nexus switches for use in a base FlexPod Express environment.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
This procedure assumes that you are using a Cisco Nexus 31108PCV running NX-OS software release 7.0(3)I6(1).
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Upon initial boot and connection to the console port of the switch, the Cisco NX-OS setup automatically starts. This initial configuration addresses basic settings, such as the switch name, the mgmt0 interface configuration, and Secure Shell (SSH) setup.</p>
</li>
<li>
<p>The FlexPod Express management network can be configured in multiple ways. The mgmt0 interfaces on the 31108PCV switches can be connected to an existing management network, or the mgmt0 interfaces of the 31108PCV switches can be connected in a back-to-back configuration. However, this link cannot be used for external management access such as SSH traffic.</p>
<div class="paragraph">
<p>In this deployment guide, the FlexPod Express Cisco Nexus 31108PCV switches are connected to an existing management network.</p>
</div>
</li>
<li>
<p>To configure the Cisco Nexus 31108PCV switches, power on the switch and follow the on-screen prompts, as illustrated here for the initial setup of both the switches, substituting the appropriate values for the switch-specific information.</p>
<div class="literalblock">
<div class="content">
<pre>This setup utility will guide you through the basic configuration of the system. Setup configures only enough connectivity for management of the system.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>*Note: setup is mainly used for configuring the system initially, when no configuration is present. So setup always assumes system defaults and not the current system configuration values.
Press Enter at anytime to skip a dialog. Use ctrl-c at anytime to skip the remaining dialogs.
Would you like to enter the basic configuration dialog (yes/no): y
Do you want to enforce secure password standard (yes/no) [y]: y
Create another login account (yes/no) [n]: n
Configure read-only SNMP community string (yes/no) [n]: n
Configure read-write SNMP community string (yes/no) [n]: n
Enter the switch name : 31108PCV-A
Continue with Out-of-band (mgmt0) management configuration? (yes/no) [y]: y
Mgmt0 IPv4 address : &lt;&lt;var_switch_mgmt_ip&gt;&gt;
Mgmt0 IPv4 netmask : &lt;&lt;var_switch_mgmt_netmask&gt;&gt;
Configure the default gateway? (yes/no) [y]: y
IPv4 address of the default gateway : &lt;&lt;var_switch_mgmt_gateway&gt;&gt;
Configure advanced IP options? (yes/no) [n]: n
Enable the telnet service? (yes/no) [n]: n
Enable the ssh service? (yes/no) [y]: y
Type of ssh key you would like to generate (dsa/rsa) [rsa]: rsa
Number of rsa key bits &lt;1024-2048&gt; [1024]: &lt;enter&gt;
Configure the ntp server? (yes/no) [n]: y
NTP server IPv4 address : &lt;&lt;var_ntp_ip&gt;&gt;
Configure default interface layer (L3/L2) [L2]: &lt;enter&gt;
Configure default switchport interface state (shut/noshut) [noshut]: &lt;enter&gt;
Configure CoPP system profile (strict/moderate/lenient/dense) [strict]: &lt;enter&gt;</pre>
</div>
</div>
</li>
<li>
<p>A summary of your configuration is displayed and you are asked if you would like to edit the configuration. If your configuration is correct, enter <code>n</code>.</p>
<div class="literalblock">
<div class="content">
<pre>Would you like to edit the configuration? (yes/no) [n]: no</pre>
</div>
</div>
</li>
<li>
<p>You are then asked if you would like to use this configuration and save it. If so, enter <code>y</code>.</p>
<div class="literalblock">
<div class="content">
<pre>Use this configuration and save it? (yes/no) [y]: Enter</pre>
</div>
</div>
</li>
<li>
<p>Repeat steps 1 through 5 for Cisco Nexus switch B.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="enable-advanced-features">Enable advanced features</h3>
<div class="paragraph">
<p>Certain advanced features must be enabled in Cisco NX-OS to provide additional configuration options.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To enable the appropriate features on Cisco Nexus switch A and switch B, enter configuration mode by using the command <code>(config t)</code> and run the following commands:</p>
<div class="literalblock">
<div class="content">
<pre>feature interface-vlan
feature lacp
feature vpc</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
The default port channel load-balancing hash uses the source and destination IP addresses to determine the load-balancing algorithm across the interfaces in the port channel. You can achieve better distribution across the members of the port channel by providing more inputs to the hash algorithm beyond the source and destination IP addresses. For the same reason, NetApp highly recommends adding the source and destination TCP ports to the hash algorithm.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>From configuration mode <code>(config t)</code>, run the following commands to set the global port channel load-balancing configuration on Cisco Nexus switch A and switch B:</p>
<div class="literalblock">
<div class="content">
<pre>port-channel load-balance src-dst ip-l4port</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="perform-global-spanning-tree-configuration">Perform global spanning-tree configuration</h3>
<div class="paragraph">
<p>The Cisco Nexus platform uses a new protection feature called bridge assurance. Bridge assurance helps protect against a unidirectional link or other software failure with a device that continues to forward data traffic when it is no longer running the spanning-tree algorithm. Ports can be placed in one of several states, including network or edge, depending on the platform.</p>
</div>
<div class="paragraph">
<p>NetApp recommends setting bridge assurance so that all ports are considered to be network ports by default. This setting forces the network administrator to review the configuration of each port. It also reveals the most common configuration errors, such as unidentified edge ports or a neighbor that does not have the bridge assurance feature enabled. In addition, it is safer to have the spanning tree block many ports rather than too few, which allows the default port state to enhance the overall stability of the network.</p>
</div>
<div class="paragraph">
<p>Pay close attention to the spanning-tree state when adding servers, storage, and uplink switches, especially if they do not support bridge assurance. In such cases, you might need to change the port type to make the ports active.</p>
</div>
<div class="paragraph">
<p>The Bridge Protocol Data Unit (BPDU) guard is enabled on edge ports by default as another layer of protection. To prevent loops in the network, this feature shuts down the port if BPDUs from another switch are seen on this interface.</p>
</div>
<div class="paragraph">
<p>From configuration mode (<code>config t</code>), run the following commands to configure the default spanning-tree options, including the default port type and BPDU guard, on Cisco Nexus switch A and switch B:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>spanning-tree port type network default
spanning-tree port type edge bpduguard default</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="define-vlans">Define VLANs</h3>
<div class="paragraph">
<p>Before individual ports with different VLANs are configured, the layer-2 VLANs must be defined on the switch. It is also a good practice to name the VLANs for easy troubleshooting in the future.</p>
</div>
<div class="paragraph">
<p>From configuration mode (<code>config t</code>), run the following commands to define and describe the layer 2 VLANs on Cisco Nexus switch A and switch B:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>vlan &lt;&lt;nfs_vlan_id&gt;&gt;
  name NFS-VLAN
vlan &lt;&lt;iSCSI_A_vlan_id&gt;&gt;
  name iSCSI-A-VLAN
vlan &lt;&lt;iSCSI_B_vlan_id&gt;&gt;
  name iSCSI-B-VLAN
vlan &lt;&lt;vmotion_vlan_id&gt;&gt;
  name vMotion-VLAN
vlan &lt;&lt;vmtraffic_vlan_id&gt;&gt;
  name VM-Traffic-VLAN
vlan &lt;&lt;mgmt_vlan_id&gt;&gt;
  name MGMT-VLAN
vlan &lt;&lt;native_vlan_id&gt;&gt;
  name NATIVE-VLAN
exit</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configure-access-and-management-port-descriptions">Configure access and management port descriptions</h3>
<div class="paragraph">
<p>As is the case with assigning names to the layer-2 VLANs, setting descriptions for all the interfaces can help with both provisioning and troubleshooting.</p>
</div>
<div class="paragraph">
<p>From configuration mode (<code>config t</code>) in each of the switches, enter the following port descriptions for the FlexPod Express large configuration:</p>
</div>
<div class="sect3">
<h4 id="cisco-nexus-switch-a">Cisco Nexus switch A</h4>
<div class="literalblock">
<div class="content">
<pre>int eth1/1
  description AFF A220-A e0M
int eth1/2
  description Cisco UCS FI-A mgmt0
int eth1/3
  description Cisco UCS FI-A eth1/1
int eth1/4
  description Cisco UCS FI-B eth1/1
int eth1/13
  description vPC peer-link 31108PVC-B 1/13
int eth1/14
  description vPC peer-link 31108PVC-B 1/14</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="cisco-nexus-switch-b">Cisco Nexus switch B</h4>
<div class="literalblock">
<div class="content">
<pre>int eth1/1
  description AFF A220-B e0M
int eth1/2
  description Cisco UCS FI-B mgmt0
int eth1/3
  description Cisco UCS FI-A eth1/2
int eth1/4
  description Cisco UCS FI-B eth1/2
int eth1/13
  description vPC peer-link 31108PVC-B 1/13
int eth1/14
  description vPC peer-link 31108PVC-B 1/14</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configure-server-and-storage-management-interfaces">Configure server and storage management interfaces</h3>
<div class="paragraph">
<p>The management interfaces for both the server and the storage typically use only a single VLAN. Therefore, configure the management interface ports as access ports. Define the management VLAN for each switch and change the spanning-tree port type to edge.</p>
</div>
<div class="paragraph">
<p>From configuration mode (<code>config t</code>), run the following commands to configure the port settings for the management interfaces of both the servers and the storage:</p>
</div>
<div class="sect3">
<h4 id="cisco-nexus-switch-a-2">Cisco Nexus switch A</h4>
<div class="literalblock">
<div class="content">
<pre>int eth1/1-2
  switchport mode access
  switchport access vlan &lt;&lt;mgmt_vlan&gt;&gt;
  spanning-tree port type edge
  speed 1000
exit</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="cisco-nexus-switch-b-2">Cisco Nexus switch B</h4>
<div class="literalblock">
<div class="content">
<pre>int eth1/1-2
  switchport mode access
  switchport access vlan &lt;&lt;mgmt_vlan&gt;&gt;
  spanning-tree port type edge
  speed 1000
exit</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="add-ntp-distribution-interface">Add NTP distribution interface</h3>
<div class="sect3">
<h4 id="cisco-nexus-switch-a-3">Cisco Nexus switch A</h4>
<div class="paragraph">
<p>From the global configuration mode, execute the following commands.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>interface Vlan&lt;ib-mgmt-vlan-id&gt;
ip address &lt;switch-a-ntp-ip&gt;/&lt;ib-mgmt-vlan-netmask-length&gt;
no shutdown
exitntp peer &lt;switch-b-ntp-ip&gt; use-vrf default</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="cisco-nexus-switch-b-3">Cisco Nexus switch B</h4>
<div class="paragraph">
<p>From the global configuration mode, execute the following commands.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>interface Vlan&lt;ib-mgmt-vlan-id&gt;
ip address &lt;switch- b-ntp-ip&gt;/&lt;ib-mgmt-vlan-netmask-length&gt;
no shutdown
exitntp peer &lt;switch-a-ntp-ip&gt; use-vrf default</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="perform-virtual-port-channel-global-configuration">Perform virtual port channel global configuration</h3>
<div class="paragraph">
<p>A virtual port channel (vPC) enables links that are physically connected to two different Cisco Nexus switches to appear as a single port channel to a third device. The third device can be a switch, server, or any other networking device. A vPC can provide layer-2 multipathing, which allows you to create redundancy by increasing bandwidth, enabling multiple parallel paths between nodes, and load-balancing traffic where alternative paths exist.</p>
</div>
<div class="paragraph">
<p>A vPC provides the following benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enabling a single device to use a port channel across two upstream devices</p>
</li>
<li>
<p>Eliminating spanning-tree protocol blocked ports</p>
</li>
<li>
<p>Providing a loop-free topology</p>
</li>
<li>
<p>Using all available uplink bandwidth</p>
</li>
<li>
<p>Providing fast convergence if either the link or a device fails</p>
</li>
<li>
<p>Providing link-level resiliency</p>
</li>
<li>
<p>Helping provide high availability</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The vPC feature requires some initial setup between the two Cisco Nexus switches to function properly. If you use the back-to-back mgmt0 configuration, use the addresses defined on the interfaces and verify that they can communicate by using the ping <code>&lt;&lt;switch_A/B_mgmt0_ip_addr&gt;&gt;vrf</code> management command.</p>
</div>
<div class="paragraph">
<p>From configuration mode (<code>config t</code>), run the following commands to configure the vPC global configuration for both switches:</p>
</div>
<div class="sect3">
<h4 id="cisco-nexus-switch-a-4">Cisco Nexus switch A</h4>
<div class="literalblock">
<div class="content">
<pre>vpc domain 1
 role priority 10
peer-keepalive destination &lt;&lt;switch_B_mgmt0_ip_addr&gt;&gt; source &lt;&lt;switch_A_mgmt0_ip_addr&gt;&gt; vrf management
  peer-gateway
  auto-recovery
  ip arp synchronize
  int eth1/13-14
  channel-group 10 mode active
int Po10description vPC peer-link
switchport
switchport mode trunkswitchport trunk native vlan &lt;&lt;native_vlan_id&gt;&gt;
switchport trunk allowed vlan &lt;&lt;nfs_vlan_id&gt;&gt;,&lt;&lt;vmotion_vlan_id&gt;&gt;, &lt;&lt;vmtraffic_vlan_id&gt;&gt;, &lt;&lt;mgmt_vlan&gt;, &lt;&lt;iSCSI_A_vlan_id&gt;&gt;, &lt;&lt;iSCSI_B_vlan_id&gt;&gt; spanning-tree port type network
vpc peer-link
no shut
exit
int Po13
description vPC ucs-FI-A
switchport mode trunk
switchport trunk native vlan &lt;&lt;native_vlan_id&gt;&gt;
switchport trunk allowed vlan &lt;&lt;vmotion_vlan_id&gt;&gt;, &lt;&lt;vmtraffic_vlan_id&gt;&gt;, &lt;&lt;mgmt_vlan&gt;&gt; spanning-tree port type network
mtu 9216
vpc 13
no shut
exit
int eth1/3
  channel-group 13 mode active
int Po14
description vPC ucs-FI-B
switchport mode trunk
switchport trunk native vlan &lt;&lt;native_vlan_id&gt;&gt;
switchport trunk allowed vlan &lt;&lt;vmotion_vlan_id&gt;&gt;, &lt;&lt;vmtraffic_vlan_id&gt;&gt;, &lt;&lt;mgmt_vlan&gt;&gt; spanning-tree port type network
mtu 9216
vpc 14
no shut
exit
int eth1/4
  channel-group 14 mode active
copy run start</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="cisco-nexus-switch-b-4">Cisco Nexus switch B</h4>
<div class="literalblock">
<div class="content">
<pre>vpc domain 1
peer-switch
role priority 20
peer-keepalive destination &lt;&lt;switch_A_mgmt0_ip_addr&gt;&gt; source &lt;&lt;switch_B_mgmt0_ip_addr&gt;&gt; vrf management
  peer-gateway
  auto-recovery
  ip arp synchronize
  int eth1/13-14
  channel-group 10 mode active
int Po10
description vPC peer-link
switchport
switchport mode trunk
switchport trunk native vlan &lt;&lt;native_vlan_id&gt;&gt;
switchport trunk allowed vlan &lt;&lt;nfs_vlan_id&gt;&gt;,&lt;&lt;vmotion_vlan_id&gt;&gt;, &lt;&lt;vmtraffic_vlan_id&gt;&gt;, &lt;&lt;mgmt_vlan&gt;&gt;, &lt;&lt;iSCSI_A_vlan_id&gt;&gt;, &lt;&lt;iSCSI_B_vlan_id&gt;&gt; spanning-tree port type network
vpc peer-link
no shut
exit
int Po13
description vPC ucs-FI-A
switchport mode trunk
switchport trunk native vlan &lt;&lt;native_vlan_id&gt;&gt;
switchport trunk allowed vlan &lt;&lt;vmotion_vlan_id&gt;&gt;, &lt;&lt;vmtraffic_vlan_id&gt;&gt;, &lt;&lt;mgmt_vlan&gt;&gt; spanning-tree port type network
mtu 9216
vpc 13
no shut
exit
int eth1/3
  channel-group 13 mode active
int Po14
description vPC ucs-FI-B
switchport mode trunk
switchport trunk native vlan &lt;&lt;native_vlan_id&gt;&gt;
switchport trunk allowed vlan &lt;&lt;vmotion_vlan_id&gt;&gt;, &lt;&lt;vmtraffic_vlan_id&gt;&gt;, &lt;&lt;mgmt_vlan&gt;&gt; spanning-tree port type network
mtu 9216
vpc 14
no shut
exit
int eth1/4
  channel-group 14 mode active
copy run start</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
In this solution validation, a maximum transmission unit (MTU) of 9000 was used. However, based on application requirements, you can configure an appropriate value of MTU. It is important to set the same MTU value across the FlexPod solution. Incorrect MTU configurations between components result in packets being dropped.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="uplink-into-existing-network-infrastructure">Uplink into existing network infrastructure</h3>
<div class="paragraph">
<p>Depending on the available network infrastructure, several methods and features can be used to uplink the FlexPod environment. If an existing Cisco Nexus environment is present, NetApp recommends using vPCs to uplink the Cisco Nexus 31108PVC switches included in the FlexPod environment into the infrastructure. The uplinks can be 10GbE uplinks for a 10GbE infrastructure solution or 1GbE for a 1GbE infrastructure solution if required. The previously described procedures can be used to create an uplink vPC to the existing environment. Make sure to run copy run start to save the configuration on each switch after the configuration is completed.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="netapp-storage-deployment-procedure-part-1">NetApp storage deployment procedure (part 1)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the NetApp AFF storage deployment procedure.</p>
</div>
<div class="sect2">
<h3 id="netapp-storage-controller-aff2xx-series-installation">NetApp Storage Controller AFF2xx Series Installation</h3>
<div class="sect3">
<h4 id="netapp-hardware-universe">NetApp Hardware Universe</h4>
<div class="paragraph">
<p>The <a href="https://hwu.netapp.com/Home/Index" target="_blank" rel="noopener">NetApp Hardware Universe</a> (HWU) application provides supported hardware and software components for any specific ONTAP version. It provides configuration information for all the NetApp storage appliances currently supported by ONTAP software. It also provides a table of component compatibilities.</p>
</div>
<div class="paragraph">
<p>Confirm that the hardware and software components that you would like to use are supported with the version of ONTAP that you plan to install:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access the <a href="http://hwu.netapp.com/Home/Index" target="_blank" rel="noopener">HWU</a> application to view the system configuration guides. Select the Compare Storage Systems tab to view the compatibility between different version of the ONTAP software and the NetApp storage appliances with your desired specifications.</p>
</li>
<li>
<p>Alternatively, to compare components by storage appliance, click Compare Storage Systems.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Controller AFF2XX Series prerequisites</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">To plan the physical location of the storage systems, see the the following sections:<br>
Electrical requirements<br>
Supported power cords<br>
Onboard ports and cables</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="storage-controllers">Storage controllers</h4>
<div class="paragraph">
<p>Follow the physical installation procedures for the controllers in the <a href="https://library-clnt.dmz.netapp.com/documentation/docweb/index.html?productID=62331&amp;language=en-US" target="_blank" rel="noopener">AFF A220 Documentation</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="netapp-ontap-9-5">NetApp ONTAP 9.5</h3>
<div class="sect3">
<h4 id="configuration-worksheet">Configuration worksheet</h4>
<div class="paragraph">
<p>Before running the setup script, complete the configuration worksheet from the product manual. The configuration worksheet is available in the <a href="http://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-cm-ssg/home.html" target="_blank" rel="noopener">ONTAP 9.5 Software Setup Guide</a> (available in the <a href="http://docs.netapp.com/ontap-9/index.jsp" target="_blank" rel="noopener">ONTAP 9 Documentation Center</a>). The table below illustrates ONTAP 9.5 installation and configuration information.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
This system is set up in a two-node switchless cluster configuration.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Cluster Detail</th>
<th class="tableblock halign-left valign-top">Cluster Detail Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster node A IP address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeA_mgmt_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster node A netmask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeA_mgmt_mask&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster node A gateway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeA_mgmt_gateway&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster node A name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeA&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster node B IP address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeB_mgmt_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster node B netmask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeB_mgmt_mask&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster node B gateway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeB_mgmt_gateway&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster node B name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeB&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ONTAP 9.5 URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_url_boot_software&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name for cluster</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_clustername&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster management IP address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_clustermgmt_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster B gateway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_clustermgmt_gateway&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster B netmask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_clustermgmt_mask&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_domain_name&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS server IP (you can enter more than one)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_dns_server_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTP server A IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt; switch-a-ntp-ip &gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTP server B IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt; switch-b-ntp-ip &gt;&gt;</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="configure-node-a">Configure node A</h4>
<div class="paragraph">
<p>To configure node A, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Connect to the storage system console port. You should see a Loader-A prompt. However, if the storage system is in a reboot loop, press Ctrl- C to exit the autoboot loop when you see this message:</p>
<div class="literalblock">
<div class="content">
<pre>Starting AUTOBOOT press Ctrl-C to abort...</pre>
</div>
</div>
</li>
<li>
<p>Allow the system to boot.</p>
<div class="literalblock">
<div class="content">
<pre>autoboot</pre>
</div>
</div>
</li>
<li>
<p>Press Ctrl- C to enter the Boot menu.</p>
<div class="paragraph">
<p>If ONTAP 9. 5 is not the version of software being booted, continue with the following steps to install new software. If ONTAP 9. 5 is the version being booted, select option 8 and y to reboot the node. Then, continue with step 14.</p>
</div>
</li>
<li>
<p>To install new software, select option <code>7</code>.</p>
</li>
<li>
<p>Enter <code>y</code> to perform an upgrade.</p>
</li>
<li>
<p>Select <code>e0M</code> for the network port you want to use for the download.</p>
</li>
<li>
<p>Enter <code>y</code> to reboot now.</p>
</li>
<li>
<p>Enter the IP address, netmask, and default gateway for e0M in their respective places.</p>
<div class="literalblock">
<div class="content">
<pre>&lt;&lt;var_nodeA_mgmt_ip&gt;&gt; &lt;&lt;var_nodeA_mgmt_mask&gt;&gt; &lt;&lt;var_nodeA_mgmt_gateway&gt;&gt;</pre>
</div>
</div>
</li>
<li>
<p>Enter the URL where the software can be found.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
This web server must be pingable.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Press Enter for the user name, indicating no user name.</p>
</li>
<li>
<p>Enter <code>y</code> to set the newly installed software as the default to be used for subsequent reboots.</p>
</li>
<li>
<p>Enter <code>y</code> to reboot the node.</p>
<div class="paragraph">
<p>When installing new software, the system might perform firmware upgrades to the BIOS and adapter cards, causing reboots and possible stops at the Loader-A prompt. If these actions occur, the system might deviate from this procedure.</p>
</div>
</li>
<li>
<p>Press Ctrl- C to enter the Boot menu.</p>
</li>
<li>
<p>Select option <code>4</code> for Clean Configuration and Initialize All Disks.</p>
</li>
<li>
<p>Enter <code>y</code> to zero disks, reset config, and install a new file system.</p>
</li>
<li>
<p>Enter <code>y</code> to erase all the data on the disks.</p>
<div class="paragraph">
<p>The initialization and creation of the root aggregate can take 90 minutes or more to complete, depending on the number and type of disks attached. When initialization is complete, the storage system reboots. Note that SSDs take considerably less time to initialize. You can continue with the node B configuration while the disks for node A are zeroing.</p>
</div>
</li>
<li>
<p>While node A is initializing, begin configuring node B.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-node-b">Configure node B</h4>
<div class="paragraph">
<p>To configure node B, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Connect to the storage system console port. You should see a Loader-A prompt. However, if the storage system is in a reboot loop, press Ctrl-C to exit the autoboot loop when you see this message:</p>
<div class="literalblock">
<div class="content">
<pre>Starting AUTOBOOT press Ctrl-C to abort...</pre>
</div>
</div>
</li>
<li>
<p>Press Ctrl-C to enter the Boot menu.</p>
<div class="literalblock">
<div class="content">
<pre>autoboot</pre>
</div>
</div>
</li>
<li>
<p>Press Ctrl-C when prompted.</p>
<div class="paragraph">
<p>If ONTAP 9. 5 is not the version of software being booted, continue with the following steps to install new software. If ONTAP 9.4 is the version being booted, select option 8 and y to reboot the node. Then, continue with step 14.</p>
</div>
</li>
<li>
<p>To install new software, select option 7.</p>
</li>
<li>
<p>Enter <code>y</code> to perform an upgrade.</p>
</li>
<li>
<p>Select <code>e0M</code> for the network port you want to use for the download.</p>
</li>
<li>
<p>Enter <code>y</code> to reboot now.</p>
</li>
<li>
<p>Enter the IP address, netmask, and default gateway for e0M in their respective places.</p>
<div class="literalblock">
<div class="content">
<pre>&lt;&lt;var_nodeB_mgmt_ip&gt;&gt; &lt;&lt;var_nodeB_mgmt_ip&gt;&gt;&lt;&lt;var_nodeB_mgmt_gateway&gt;&gt;</pre>
</div>
</div>
</li>
<li>
<p>Enter the URL where the software can be found.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
This web server must be pingable.
</td>
</tr>
</table>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;&lt;var_url_boot_software&gt;&gt;</pre>
</div>
</div>
</li>
<li>
<p>Press Enter for the user name, indicating no user name</p>
</li>
<li>
<p>Enter <code>y</code> to set the newly installed software as the default to be used for subsequent reboots.</p>
</li>
<li>
<p>Enter <code>y</code> to reboot the node.</p>
<div class="paragraph">
<p>When installing new software, the system might perform firmware upgrades to the BIOS and adapter cards, causing reboots and possible stops at the Loader-A prompt. If these actions occur, the system might deviate from this procedure.</p>
</div>
</li>
<li>
<p>Press Ctrl-C to enter the Boot menu.</p>
</li>
<li>
<p>Select option 4 for Clean Configuration and Initialize All Disks.</p>
</li>
<li>
<p>Enter <code>y</code> to zero disks, reset config, and install a new file system.</p>
</li>
<li>
<p>Enter <code>y</code> to erase all the data on the disks.</p>
<div class="paragraph">
<p>The initialization and creation of the root aggregate can take 90 minutes or more to complete, depending on the number and type of disks attached. When initialization is complete, the storage system reboots. Note that SSDs take considerably less time to initialize.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="continuation-node-a-configuration-and-cluster-configuration">Continuation node A configuration and cluster configuration</h3>
<div class="paragraph">
<p>From a console port program attached to the storage controller A (node A) console port, run the node setup script. This script appears when ONTAP 9.5 boots on the node for the first time.</p>
</div>
<div class="paragraph">
<p>The node and cluster setup procedure has changed slightly in ONTAP 9.5. The cluster setup wizard is now used to configure the first node in a cluster, and System Manager is used to configure the cluster.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Follow the prompts to set up node A.</p>
<div class="literalblock">
<div class="content">
<pre>Welcome to the cluster setup wizard.
You can enter the following commands at any time:
  "help" or "?" - if you want to have a question clarified,
  "back" - if you want to change previously answered questions, and
  "exit" or "quit" - if you want to quit the cluster setup wizard.
     Any changes you made before quitting will be saved.
You can return to cluster setup at any time by typing "cluster setup".
To accept a default or omit a question, do not enter a value.
This system will send event messages and periodic reports to NetApp Technical Support. To disable this feature, enter
autosupport modify -support disable
within 24 hours.
Enabling AutoSupport can significantly speed problem determination and resolution should a problem occur on your system.
For further information on AutoSupport, see: http://support.netapp.com/autosupport/
Type yes to confirm and continue {yes}: yes
Enter the node management interface port [e0M]:
Enter the node management interface IP address: &lt;&lt;var_nodeA_mgmt_ip&gt;&gt;
Enter the node management interface netmask: &lt;&lt;var_nodeA_mgmt_mask&gt;&gt;
Enter the node management interface default gateway: &lt;&lt;var_nodeA_mgmt_gateway&gt;&gt;
A node management interface on port e0M with IP address &lt;&lt;var_nodeA_mgmt_ip&gt;&gt; has been created.
Use your web browser to complete cluster setup by accessing
https://&lt;&lt;var_nodeA_mgmt_ip&gt;&gt;
Otherwise, press Enter to complete cluster setup using the command line interface:</pre>
</div>
</div>
</li>
<li>
<p>Navigate to the IP address of the node’s management interface.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
Cluster setup can also be performed by using the CLI. This document describes cluster setup using NetApp System Manager guided setup.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click Guided Setup to configure the cluster.</p>
</li>
<li>
<p>Enter <code>&lt;&lt;var_clustername&gt;&gt;</code> for the cluster name and <code>&lt;&lt;var_nodeA&gt;&gt;</code> and <code>&lt;&lt;var_nodeB&gt;&gt;</code> for each of the nodes that you are configuring. Enter the password that you would like to use for the storage system. Select Switchless Cluster for the cluster type. Enter the cluster base license.</p>
</li>
<li>
<p>You can also enter feature licenses for Cluster, NFS, and iSCSI.</p>
</li>
<li>
<p>You see a status message stating the cluster is being created. This status message cycles through several statuses. This process takes several minutes.</p>
</li>
<li>
<p>Configure the network.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Deselect the IP Address Range option.</p>
</li>
<li>
<p>Enter <code>&lt;&lt;var_clustermgmt_ip&gt;&gt;</code> in the Cluster Management IP Address field, <code>&lt;&lt;var_clustermgmt_mask&gt;&gt;</code> in the Netmask field, and <code>&lt;&lt;var_clustermgmt_gateway&gt;&gt;</code> in the Gateway field. Use the &#8230;&#8203; selector in the Port field to select e0M of node A.</p>
</li>
<li>
<p>The node management IP for node A is already populated. Enter <code>&lt;&lt;var_nodeA_mgmt_ip&gt;&gt;</code> for node B.</p>
</li>
<li>
<p>Enter <code>&lt;&lt;var_domain_name&gt;&gt;</code> in the DNS Domain Name field. Enter <code>&lt;&lt;var_dns_server_ip&gt;&gt;</code> in the DNS Server IP Address field.</p>
<div class="paragraph">
<p>You can enter multiple DNS server IP addresses.</p>
</div>
</li>
<li>
<p>Enter <code>&lt;&lt;switch-a-ntp-ip&gt;&gt;</code> in the Primary NTP Server field.</p>
<div class="paragraph">
<p>You can also enter an alternate NTP server as <code>&lt;&lt;switch- b-ntp-ip&gt;&gt;</code>.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Configure the support information.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If your environment requires a proxy to access AutoSupport, enter the URL in Proxy URL.</p>
</li>
<li>
<p>Enter the SMTP mail host and email address for event notifications.</p>
<div class="paragraph">
<p>You must, at a minimum, set up the event notification method before you can proceed. You can select any of the methods.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>When indicated that the cluster configuration has completed, click Manage Your Cluster to configure the storage.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="continuation-of-storage-cluster-configuration">Continuation of storage cluster configuration</h3>
<div class="paragraph">
<p>After the configuration of the storage nodes and base cluster, you can continue with the configuration of the storage cluster.</p>
</div>
<div class="sect3">
<h4 id="zero-all-spare-disks">Zero all spare disks</h4>
<div class="paragraph">
<p>To zero all spare disks in the cluster, run the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>disk zerospares</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="set-on-board-uta2-ports-personality">Set on-board UTA2 ports personality</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify the current mode and the current type of the ports by running the <code>ucadmin show</code> command.</p>
<div class="literalblock">
<div class="content">
<pre>AFFA220-Clus::&gt; ucadmin show
                       Current  Current    Pending  Pending    Admin
Node          Adapter  Mode     Type       Mode     Type       Status
------------  -------  -------  ---------  -------  ---------  -----------
AFFA220-Clus-01
              0c       cna      target     -        -          offline
AFFA220-Clus-01
              0d       cna      target     -        -          offline
AFFA220-Clus-01
              0e       cna      target     -        -          offline
AFFA220-Clus-01
              0f       cna      target     -        -          offline
AFFA220-Clus-02
              0c       cna      target     -        -          offline
AFFA220-Clus-02
              0d       cna      target     -        -          offline
AFFA220-Clus-02
              0e       cna      target     -        -          offline
AFFA220-Clus-02
              0f       cna      target     -        -          offline
8 entries were displayed.</pre>
</div>
</div>
</li>
<li>
<p>Verify that the current mode of the ports that are in use is <code>cna</code> and that the current type is set to <code>target</code>. If not, change the port personality by running the following command:</p>
<div class="literalblock">
<div class="content">
<pre>ucadmin modify -node &lt;home node of the port&gt; -adapter &lt;port name&gt; -mode cna -type target</pre>
</div>
</div>
<div class="paragraph">
<p>The ports must be offline to run the previous command. To take a port offline, run the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>network fcp adapter modify -node &lt;home node of the port&gt; -adapter &lt;port name&gt; -state down</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
If you changed the port personality, you must reboot each node for the change to take effect.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="enable-cisco-discovery-protocol">Enable Cisco Discovery Protocol</h4>
<div class="paragraph">
<p>To enable the Cisco Discovery Protocol (CDP) on the NetApp storage controllers, run the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>node run -node * options cdpd.enable on</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="enable-link-layer-discovery-protocol-on-all-ethernet-ports">Enable Link-layer Discovery Protocol on all Ethernet ports</h4>
<div class="paragraph">
<p>Enable the exchange of Link-layer Discovery Protocol (LLDP) neighbor information between the storage and network switches by running the following command. This command enables LLDP on all ports of all nodes in the cluster.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>node run * options lldp.enable on</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="rename-management-logical-interfaces">Rename management logical interfaces</h4>
<div class="paragraph">
<p>To rename the management logical interfaces (LIFs), complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Show the current management LIF names.</p>
<div class="literalblock">
<div class="content">
<pre>network interface show –vserver &lt;&lt;clustername&gt;&gt;</pre>
</div>
</div>
</li>
<li>
<p>Rename the cluster management LIF.</p>
<div class="literalblock">
<div class="content">
<pre>network interface rename –vserver &lt;&lt;clustername&gt;&gt; –lif cluster_setup_cluster_mgmt_lif_1 –newname cluster_mgmt</pre>
</div>
</div>
</li>
<li>
<p>Rename the node B management LIF.</p>
<div class="literalblock">
<div class="content">
<pre>network interface rename -vserver &lt;&lt;clustername&gt;&gt; -lif cluster_setup_node_mgmt_lif_AFF A220_A_1 - newname AFF A220-01_mgmt1</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="set-auto-revert-on-cluster-management">Set auto-revert on cluster management</h4>
<div class="paragraph">
<p>Set the <code>auto-revert</code> parameter on the cluster management interface.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>network interface modify –vserver &lt;&lt;clustername&gt;&gt; -lif cluster_mgmt –auto-revert true</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="set-up-service-processor-network-interface">Set up service processor network interface</h4>
<div class="paragraph">
<p>To assign a static IPv4 address to the service processor on each node, run the following commands:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>system service-processor network modify –node &lt;&lt;var_nodeA&gt;&gt; -address-family IPv4 –enable true – dhcp none –ip-address &lt;&lt;var_nodeA_sp_ip&gt;&gt; -netmask &lt;&lt;var_nodeA_sp_mask&gt;&gt; -gateway &lt;&lt;var_nodeA_sp_gateway&gt;&gt;
system service-processor network modify –node &lt;&lt;var_nodeB&gt;&gt; -address-family IPv4 –enable true – dhcp none –ip-address &lt;&lt;var_nodeB_sp_ip&gt;&gt; -netmask &lt;&lt;var_nodeB_sp_mask&gt;&gt; -gateway &lt;&lt;var_nodeB_sp_gateway&gt;&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
The service processor IP addresses should be in the same subnet as the node management IP addresses.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="enable-storage-failover-in-ontap">Enable storage failover in ONTAP</h4>
<div class="paragraph">
<p>To confirm that storage failover is enabled, run the following commands in a failover pair:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify the status of storage failover.</p>
<div class="literalblock">
<div class="content">
<pre>storage failover show</pre>
</div>
</div>
<div class="paragraph">
<p>Both <code>&lt;&lt;var_nodeA&gt;&gt;</code> and <code>&lt;&lt;var_nodeB&gt;&gt;</code> must be able to perform a takeover. Go to step 3 if the nodes can perform a takeover.</p>
</div>
</li>
<li>
<p>Enable failover on one of the two nodes.</p>
<div class="literalblock">
<div class="content">
<pre>storage failover modify -node &lt;&lt;var_nodeA&gt;&gt; -enabled true</pre>
</div>
</div>
</li>
<li>
<p>Verify the HA status of the two-node cluster.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
This step is not applicable for clusters with more than two nodes.
</td>
</tr>
</table>
</div>
<div class="literalblock">
<div class="content">
<pre>cluster ha show</pre>
</div>
</div>
</li>
<li>
<p>Go to step 6 if high availability is configured. If high availability is configured, you see the following message upon issuing the command:</p>
<div class="literalblock">
<div class="content">
<pre>High Availability Configured: true</pre>
</div>
</div>
</li>
<li>
<p>Enable HA mode only for the two-node cluster.</p>
<div class="paragraph">
<p>Do not run this command for clusters with more than two nodes because it causes problems with failover.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cluster ha modify -configured true
Do you want to continue? {y|n}: y</pre>
</div>
</div>
</li>
<li>
<p>Verify that hardware assist is correctly configured and, if needed, modify the partner IP address.</p>
<div class="literalblock">
<div class="content">
<pre>storage failover hwassist show</pre>
</div>
</div>
<div class="paragraph">
<p>The message <code>Keep Alive Status : Error: did not receive hwassist keep alive alerts from partner</code> indicates that hardware assist is not configured. Run the following commands to configure hardware assist.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>storage failover modify –hwassist-partner-ip &lt;&lt;var_nodeB_mgmt_ip&gt;&gt; -node &lt;&lt;var_nodeA&gt;&gt;
storage failover modify –hwassist-partner-ip &lt;&lt;var_nodeA_mgmt_ip&gt;&gt; -node &lt;&lt;var_nodeB&gt;&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="create-jumbo-frame-mtu-broadcast-domain-in-ontap">Create jumbo frame MTU broadcast domain in ONTAP</h4>
<div class="paragraph">
<p>To create a data broadcast domain with an MTU of 9000, run the following commands:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>broadcast-domain create -broadcast-domain Infra_NFS -mtu 9000
broadcast-domain create -broadcast-domain Infra_iSCSI-A -mtu 9000
broadcast-domain create -broadcast-domain Infra_iSCSI-B -mtu 9000</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="remove-data-ports-from-default-broadcast-domain">Remove data ports from default broadcast domain</h4>
<div class="paragraph">
<p>The 10GbE data ports are used for iSCSI/NFS traffic, and these ports should be removed from the default domain. Ports e0e and e0f are not used and should also be removed from the default domain.</p>
</div>
<div class="paragraph">
<p>To remove the ports from the broadcast domain, run the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>broadcast-domain remove-ports -broadcast-domain Default -ports &lt;&lt;var_nodeA&gt;&gt;:e0c, &lt;&lt;var_nodeA&gt;&gt;:e0d, &lt;&lt;var_nodeA&gt;&gt;:e0e, &lt;&lt;var_nodeA&gt;&gt;:e0f, &lt;&lt;var_nodeB&gt;&gt;:e0c, &lt;&lt;var_nodeB&gt;&gt;:e0d, &lt;&lt;var_nodeA&gt;&gt;:e0e, &lt;&lt;var_nodeA&gt;&gt;:e0f</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="disable-flow-control-on-uta2-ports">Disable flow control on UTA2 ports</h4>
<div class="paragraph">
<p>It is a NetApp best practice to disable flow control on all UTA2 ports that are connected to external devices. To disable flow control, run the following commands:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>net port modify -node &lt;&lt;var_nodeA&gt;&gt; -port e0c -flowcontrol-admin none
Warning: Changing the network port settings will cause a several second interruption in carrier. Do you want to continue? {y|n}: y
net port modify -node &lt;&lt;var_nodeA&gt;&gt; -port e0d -flowcontrol-admin none
Warning: Changing the network port settings will cause a several second interruption in carrier. Do you want to continue? {y|n}: y
net port modify -node &lt;&lt;var_nodeA&gt;&gt; -port e0e -flowcontrol-admin none
Warning: Changing the network port settings will cause a several second interruption in carrier. Do you want to continue? {y|n}: y
net port modify -node &lt;&lt;var_nodeA&gt;&gt; -port e0f -flowcontrol-admin none
Warning: Changing the network port settings will cause a several second interruption in carrier. Do you want to continue? {y|n}: y
net port modify -node &lt;&lt;var_nodeB&gt;&gt; -port e0c -flowcontrol-admin none
Warning: Changing the network port settings will cause a several second interruption in carrier. Do you want to continue? {y|n}: y
net port modify -node &lt;&lt;var_nodeB&gt;&gt; -port e0d -flowcontrol-admin none
Warning: Changing the network port settings will cause a several second interruption in carrier. Do you want to continue? {y|n}: y
net port modify -node &lt;&lt;var_nodeB&gt;&gt; -port e0e -flowcontrol-admin none
Warning: Changing the network port settings will cause a several second interruption in carrier. Do you want to continue? {y|n}: y
net port modify -node &lt;&lt;var_nodeB&gt;&gt; -port e0f -flowcontrol-admin none
Warning: Changing the network port settings will cause a several second interruption in carrier. Do you want to continue? {y|n}: y</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
The Cisco UCS Mini direct connection to ONTAP does not support LACP.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="configure-jumbo-frames-in-netapp-ontap">Configure jumbo frames in NetApp ONTAP</h4>
<div class="paragraph">
<p>To configure an ONTAP network port to use jumbo frames (that usually have an MTU of 9,000 bytes), run the following commands from the cluster shell:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>AFF A220::&gt; network port modify -node node_A -port e0e -mtu 9000
Warning: This command will cause a several second interruption of service on this network port.
Do you want to continue? {y|n}: y
AFF A220::&gt; network port modify -node node_B -port e0e -mtu 9000
Warning: This command will cause a several second interruption of service on this network port.
Do you want to continue? {y|n}: y
AFF A220::&gt; network port modify -node node_A -port e0f -mtu 9000
Warning: This command will cause a several second interruption of service on this network port.
Do you want to continue? {y|n}: y
AFF A220::&gt; network port modify -node node_B -port e0f -mtu 9000
Warning: This command will cause a several second interruption of service on this network port.
Do you want to continue? {y|n}: y</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="create-vlans-in-ontap">Create VLANs in ONTAP</h4>
<div class="paragraph">
<p>To create VLANs in ONTAP, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create NFS VLAN ports and add them to the data broadcast domain.</p>
<div class="literalblock">
<div class="content">
<pre>network port vlan create –node &lt;&lt;var_nodeA&gt;&gt; -vlan-name e0e-&lt;&lt;var_nfs_vlan_id&gt;&gt;
network port vlan create –node &lt;&lt;var_nodeA&gt;&gt; -vlan-name e0f-&lt;&lt;var_nfs_vlan_id&gt;&gt;
network port vlan create –node &lt;&lt;var_nodeB&gt;&gt; -vlan-name e0e-&lt;&lt;var_nfs_vlan_id&gt;&gt;
network port vlan create –node &lt;&lt;var_nodeB&gt;&gt; -vlan-name e0f-&lt;&lt;var_nfs_vlan_id&gt;&gt;
broadcast-domain add-ports -broadcast-domain Infra_NFS -ports &lt;&lt;var_nodeA&gt;&gt;: e0e- &lt;&lt;var_nfs_vlan_id&gt;&gt;, &lt;&lt;var_nodeB&gt;&gt;: e0e-&lt;&lt;var_nfs_vlan_id&gt;&gt; , &lt;&lt;var_nodeA&gt;&gt;:e0f- &lt;&lt;var_nfs_vlan_id&gt;&gt;, &lt;&lt;var_nodeB&gt;&gt;:e0f-&lt;&lt;var_nfs_vlan_id&gt;&gt;</pre>
</div>
</div>
</li>
<li>
<p>Create iSCSI VLAN ports and add them to the data broadcast domain.</p>
<div class="literalblock">
<div class="content">
<pre>network port vlan create –node &lt;&lt;var_nodeA&gt;&gt; -vlan-name e0e-&lt;&lt;var_iscsi_vlan_A_id&gt;&gt;
network port vlan create –node &lt;&lt;var_nodeA&gt;&gt; -vlan-name e0f-&lt;&lt;var_iscsi_vlan_B_id&gt;&gt;
network port vlan create –node &lt;&lt;var_nodeB&gt;&gt; -vlan-name e0e-&lt;&lt;var_iscsi_vlan_A_id&gt;&gt;
network port vlan create –node &lt;&lt;var_nodeB&gt;&gt; -vlan-name e0f-&lt;&lt;var_iscsi_vlan_B_id&gt;&gt;
broadcast-domain add-ports -broadcast-domain Infra_iSCSI-A -ports &lt;&lt;var_nodeA&gt;&gt;: e0e- &lt;&lt;var_iscsi_vlan_A_id&gt;&gt;,&lt;&lt;var_nodeB&gt;&gt;: e0e-&lt;&lt;var_iscsi_vlan_A_id&gt;&gt;
broadcast-domain add-ports -broadcast-domain Infra_iSCSI-B -ports &lt;&lt;var_nodeA&gt;&gt;: e0f- &lt;&lt;var_iscsi_vlan_B_id&gt;&gt;,&lt;&lt;var_nodeB&gt;&gt;: e0f-&lt;&lt;var_iscsi_vlan_B_id&gt;&gt;</pre>
</div>
</div>
</li>
<li>
<p>Create MGMT-VLAN ports.</p>
<div class="literalblock">
<div class="content">
<pre>network port vlan create –node &lt;&lt;var_nodeA&gt;&gt; -vlan-name e0m-&lt;&lt;mgmt_vlan_id&gt;&gt;
network port vlan create –node &lt;&lt;var_nodeB&gt;&gt; -vlan-name e0m-&lt;&lt;mgmt_vlan_id&gt;&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="create-aggregates-in-ontap">Create aggregates in ONTAP</h4>
<div class="paragraph">
<p>An aggregate containing the root volume is created during the ONTAP setup process. To create additional aggregates, determine the aggregate name, the node on which to create it, and the number of disks it contains.</p>
</div>
<div class="paragraph">
<p>To create aggregates, run the following commands:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>aggr create -aggregate aggr1_nodeA -node &lt;&lt;var_nodeA&gt;&gt; -diskcount &lt;&lt;var_num_disks&gt;&gt;
aggr create -aggregate aggr1_nodeB -node &lt;&lt;var_nodeB&gt;&gt; -diskcount &lt;&lt;var_num_disks&gt;&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Retain at least one disk (select the largest disk) in the configuration as a spare. A best practice is to have at least one spare for each disk type and size.</p>
</div>
<div class="paragraph">
<p>Start with five disks; you can add disks to an aggregate when additional storage is required.</p>
</div>
<div class="paragraph">
<p>The aggregate cannot be created until disk zeroing completes. Run the <code>aggr show</code> command to display the aggregate creation status. Do not proceed until <code>aggr1_nodeA</code> is online.</p>
</div>
</div>
<div class="sect3">
<h4 id="configure-time-zone-in-ontap">Configure time zone in ONTAP</h4>
<div class="paragraph">
<p>To configure time synchronization and to set the time zone on the cluster, run the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>timezone &lt;&lt;var_timezone&gt;&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
For example, in the eastern United States, the time zone is <code>America/New_York</code>. After you begin typing the time zone name, press the Tab key to see available options.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="configure-snmp-in-ontap">Configure SNMP in ONTAP</h4>
<div class="paragraph">
<p>To configure the SNMP, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Configure SNMP basic information, such as the location and contact. When polled, this information is visible as the <code>sysLocation</code> and <code>sysContact</code> variables in SNMP.</p>
<div class="literalblock">
<div class="content">
<pre>snmp contact &lt;&lt;var_snmp_contact&gt;&gt;
snmp location “&lt;&lt;var_snmp_location&gt;&gt;”
snmp init 1
options snmp.enable on</pre>
</div>
</div>
</li>
<li>
<p>Configure SNMP traps to send to remote hosts.</p>
<div class="literalblock">
<div class="content">
<pre>snmp traphost add &lt;&lt;var_snmp_server_fqdn&gt;&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-snmpv1-in-ontap">Configure SNMPv1 in ONTAP</h4>
<div class="paragraph">
<p>To configure SNMPv1, set the shared secret plain-text password called a community.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>snmp community add ro &lt;&lt;var_snmp_community&gt;&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
Use the <code>snmp community delete all</code> command with caution. If community strings are used for other monitoring products, this command removes them.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="configure-snmpv3-in-ontap">Configure SNMPv3 in ONTAP</h4>
<div class="paragraph">
<p>SNMPv3 requires that you define and configure a user for authentication. To configure SNMPv3, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the <code>security snmpusers</code> command to view the engine ID.</p>
</li>
<li>
<p>Create a user called <code>snmpv3user</code>.</p>
<div class="literalblock">
<div class="content">
<pre>security login create -username snmpv3user -authmethod usm -application snmp</pre>
</div>
</div>
</li>
<li>
<p>Enter the authoritative entity&#8217;s engine ID and select <code>md5</code> as the authentication protocol.</p>
</li>
<li>
<p>Enter an eight-character minimum-length password for the authentication protocol when prompted.</p>
</li>
<li>
<p>Select <code>des</code> as the privacy protocol.</p>
</li>
<li>
<p>Enter an eight-character minimum-length password for the privacy protocol when prompted.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-autosupport-https-in-ontap">Configure AutoSupport HTTPS in ONTAP</h4>
<div class="paragraph">
<p>The NetApp AutoSupport tool sends support summary information to NetApp through HTTPS. To configure AutoSupport, run the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>system node autosupport modify -node * -state enable –mail-hosts &lt;&lt;var_mailhost&gt;&gt; -transport https -support enable -noteto &lt;&lt;var_storage_admin_email&gt;&gt;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="create-a-storage-virtual-machine">Create a storage virtual machine</h4>
<div class="paragraph">
<p>To create an infrastructure storage virtual machine (SVM), complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the <code>vserver create</code> command.</p>
<div class="literalblock">
<div class="content">
<pre>vserver create –vserver Infra-SVM –rootvolume rootvol –aggregate aggr1_nodeA –rootvolume- security-style unix</pre>
</div>
</div>
</li>
<li>
<p>Add the data aggregate to the infra-SVM aggregate list for the NetApp VSC.</p>
<div class="literalblock">
<div class="content">
<pre>vserver modify -vserver Infra-SVM -aggr-list aggr1_nodeA,aggr1_nodeB</pre>
</div>
</div>
</li>
<li>
<p>Remove the unused storage protocols from the SVM, leaving NFS and iSCSI.</p>
<div class="literalblock">
<div class="content">
<pre>vserver remove-protocols –vserver Infra-SVM -protocols cifs,ndmp,fcp</pre>
</div>
</div>
</li>
<li>
<p>Enable and run the NFS protocol in the infra-SVM SVM.</p>
<div class="literalblock">
<div class="content">
<pre>nfs create -vserver Infra-SVM -udp disabled</pre>
</div>
</div>
</li>
<li>
<p>Turn on the <code>SVM vstorage</code> parameter for the NetApp NFS VAAI plug-in. Then, verify that NFS has been configured.</p>
<div class="literalblock">
<div class="content">
<pre>vserver nfs modify –vserver Infra-SVM –vstorage enabled
vserver nfs show</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
Commands are prefaced by <code>vserver</code> in the command line because SVMs were previously called servers
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-nfsv3-in-ontap">Configure NFSv3 in ONTAP</h4>
<div class="paragraph">
<p>The table below lists the information needed to complete this configuration.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Detail</th>
<th class="tableblock halign-left valign-top">Detail Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESXi host A NFS IP address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_esxi_hostA_nfs_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ESXi host B NFS IP address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_esxi_hostB_nfs_ip&gt;&gt;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To configure NFS on the SVM, run the following commands:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a rule for each ESXi host in the default export policy.</p>
</li>
<li>
<p>For each ESXi host being created, assign a rule. Each host has its own rule index. Your first ESXi host has rule index 1, your second ESXi host has rule index 2, and so on.</p>
<div class="literalblock">
<div class="content">
<pre>vserver export-policy rule create –vserver Infra-SVM -policyname default –ruleindex 1 –protocol nfs -clientmatch &lt;&lt;var_esxi_hostA_nfs_ip&gt;&gt; -rorule sys –rwrule sys -superuser sys –allow-suid falsevserver export-policy rule create –vserver Infra-SVM -policyname default –ruleindex 2 –protocol nfs -clientmatch &lt;&lt;var_esxi_hostB_nfs_ip&gt;&gt; -rorule sys –rwrule sys -superuser sys –allow-suid false
vserver export-policy rule show</pre>
</div>
</div>
</li>
<li>
<p>Assign the export policy to the infrastructure SVM root volume.</p>
<div class="literalblock">
<div class="content">
<pre>volume modify –vserver Infra-SVM –volume rootvol –policy default</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
The NetApp VSC automatically handles export policies if you choose to install it after vSphere has been set up. If you do not install it, you must create export policy rules when additional Cisco UCS B-Series servers are added.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="create-iscsi-service-in-ontap">Create iSCSI service in ONTAP</h4>
<div class="paragraph">
<p>To create the iSCSI service, complete the following step:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the iSCSI service on the SVM. This command also starts the iSCSI service and sets the iSCSI Qualified Name (IQN) for the SVM. Verify that iSCSI has been configured.</p>
<div class="literalblock">
<div class="content">
<pre>iscsi create -vserver Infra-SVM
iscsi show</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="create-load-sharing-mirror-of-svm-root-volume-in-ontap">Create load-sharing mirror of SVM root volume in ONTAP</h4>
<div class="paragraph">
<p>To create a load-sharing mirror of the SVM root volume in ONTAP, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a volume to be the load-sharing mirror of the infrastructure SVM root volume on each node.</p>
<div class="literalblock">
<div class="content">
<pre>volume create –vserver Infra_Vserver –volume rootvol_m01 –aggregate aggr1_nodeA –size 1GB –type DPvolume create –vserver Infra_Vserver –volume rootvol_m02 –aggregate aggr1_nodeB –size 1GB –type DP</pre>
</div>
</div>
</li>
<li>
<p>Create a job schedule to update the root volume mirror relationships every 15 minutes.</p>
<div class="literalblock">
<div class="content">
<pre>job schedule interval create -name 15min -minutes 15</pre>
</div>
</div>
</li>
<li>
<p>Create the mirroring relationships.</p>
<div class="literalblock">
<div class="content">
<pre>snapmirror create -source-path Infra-SVM:rootvol -destination-path Infra-SVM:rootvol_m01 -type LS -schedule 15min
snapmirror create -source-path Infra-SVM:rootvol -destination-path Infra-SVM:rootvol_m02 -type LS -schedule 15min</pre>
</div>
</div>
</li>
<li>
<p>Initialize the mirroring relationship and verify that it has been created.</p>
<div class="literalblock">
<div class="content">
<pre>snapmirror initialize-ls-set -source-path Infra-SVM:rootvol snapmirror show</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-https-access-in-ontap">Configure HTTPS access in ONTAP</h4>
<div class="paragraph">
<p>To configure secure access to the storage controller, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Increase the privilege level to access the certificate commands.</p>
<div class="literalblock">
<div class="content">
<pre>set -privilege diag
Do you want to continue? {y|n}: y</pre>
</div>
</div>
</li>
<li>
<p>Generally, a self-signed certificate is already in place. Verify the certificate by running the following command:</p>
<div class="literalblock">
<div class="content">
<pre>security certificate show</pre>
</div>
</div>
</li>
<li>
<p>For each SVM shown, the certificate common name should match the DNS fully qualified domain name (FQDN) of the SVM. The four default certificates should be deleted and replaced by either self-signed certificates or certificates from a certificate authority.</p>
<div class="paragraph">
<p>Deleting expired certificates before creating certificates is a best practice. Run the <code>security certificate delete</code> command to delete expired certificates. In the following command, use TAB completion to select and delete each default certificate.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>security certificate delete [TAB] ...
Example: security certificate delete -vserver Infra-SVM -common-name Infra-SVM -ca Infra-SVM - type server -serial 552429A6</pre>
</div>
</div>
</li>
<li>
<p>To generate and install self-signed certificates, run the following commands as one-time commands. Generate a server certificate for the infra-SVM and the cluster SVM. Again, use TAB completion to aid in completing these commands.</p>
<div class="literalblock">
<div class="content">
<pre>security certificate create [TAB] ...
Example: security certificate create -common-name infra-svm.netapp.com -type server -size 2048 - country US -state "North Carolina" -locality "RTP" -organization "NetApp" -unit "FlexPod" -email- addr "abc@netapp.com" -expire-days 365 -protocol SSL -hash-function SHA256 -vserver Infra-SVM</pre>
</div>
</div>
</li>
<li>
<p>To obtain the values for the parameters required in the following step, run the <code>security certificate show</code> command.</p>
</li>
<li>
<p>Enable each certificate that was just created using the <code>–server-enabled true</code> and <code>–client- enabled false</code> parameters. Again, use TAB completion.</p>
<div class="literalblock">
<div class="content">
<pre>security ssl modify [TAB] ...
Example: security ssl modify -vserver Infra-SVM -server-enabled true -client-enabled false -ca infra-svm.netapp.com -serial 55243646 -common-name infra-svm.netapp.com</pre>
</div>
</div>
</li>
<li>
<p>Configure and enable SSL and HTTPS access and disable HTTP access.</p>
<div class="literalblock">
<div class="content">
<pre>system services web modify -external true -sslv3-enabled true
Warning: Modifying the cluster configuration will cause pending web service requests to be interrupted as the web servers are restarted.
Do you want to continue {y|n}: y
System services firewall policy delete -policy mgmt -service http -vserver &lt;&lt;var_clustername&gt;&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
It is normal for some of these commands to return an error message stating that the entry does not exist.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Revert to the admin privilege level and create the setup to allow SVM to be available by the web.</p>
<div class="literalblock">
<div class="content">
<pre>set –privilege admin
vserver services web modify –name spi|ontapi|compat –vserver * -enabled true</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="create-a-netapp-flexvol-volume-in-ontap">Create a NetApp FlexVol volume in ONTAP</h4>
<div class="paragraph">
<p>To create a NetApp FlexVol® volume, enter the volume name, size, and the aggregate on which it exists. Create two VMware datastore volumes and a server boot volume.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>volume create -vserver Infra-SVM -volume infra_datastore_1 -aggregate aggr1_nodeA -size 500GB - state online -policy default -junction-path /infra_datastore_1 -space-guarantee none -percent- snapshot-space 0
volume create -vserver Infra-SVM -volume infra_datastore_2 -aggregate aggr1_nodeB -size 500GB - state online -policy default -junction-path /infra_datastore_2 -space-guarantee none -percent- snapshot-space 0</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>volume create -vserver Infra-SVM -volume infra_swap -aggregate aggr1_nodeA -size 100GB -state online -policy default -juntion-path /infra_swap -space-guarantee none -percent-snapshot-space 0 -snapshot-policy none
volume create -vserver Infra-SVM -volume esxi_boot -aggregate aggr1_nodeA -size 100GB -state online -policy default -space-guarantee none -percent-snapshot-space 0</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="enable-deduplication-in-ontap">Enable deduplication in ONTAP</h4>
<div class="paragraph">
<p>To enable deduplication on appropriate volumes once a day, run the following commands:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>volume efficiency modify –vserver Infra-SVM –volume esxi_boot –schedule sun-sat@0
volume efficiency modify –vserver Infra-SVM –volume infra_datastore_1 –schedule sun-sat@0
volume efficiency modify –vserver Infra-SVM –volume infra_datastore_2 –schedule sun-sat@0</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="create-luns-in-ontap">Create LUNs in ONTAP</h4>
<div class="paragraph">
<p>To create two boot logical unit numbers (LUNs), run the following commands:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>lun create -vserver Infra-SVM -volume esxi_boot -lun VM-Host-Infra-A -size 15GB -ostype vmware - space-reserve disabled
lun create -vserver Infra-SVM -volume esxi_boot -lun VM-Host-Infra-B -size 15GB -ostype vmware - space-reserve disabled</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
When adding an extra Cisco UCS C-Series server, an extra boot LUN must be created.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="create-iscsi-lifs-in-ontap">Create iSCSI LIFs in ONTAP</h4>
<div class="paragraph">
<p>The table below lists the information needed to complete this configuration.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Detail</th>
<th class="tableblock halign-left valign-top">Detail Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node A iSCSI LIF01A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeA_iscsi_lif01a_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node A iSCSI LIF01A network mask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeA_iscsi_lif01a_mask&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node A iSCSI LIF01B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeA_iscsi_lif01b_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node A iSCSI LIF01B network mask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeA_iscsi_lif01b_mask&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node B iSCSI LIF01A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeB_iscsi_lif01a_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node B iSCSI LIF01A network mask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeB_iscsi_lif01a_mask&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node B iSCSI LIF01B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeB_iscsi_lif01b_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node B iSCSI LIF01B network mask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeB_iscsi_lif01b_mask&gt;&gt;</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create four iSCSI LIFs, two on each node.</p>
<div class="literalblock">
<div class="content">
<pre>network interface create -vserver Infra-SVM -lif iscsi_lif01a -role data -data-protocol iscsi - home-node &lt;&lt;var_nodeA&gt;&gt; -home-port e0e-&lt;&lt;var_iscsi_vlan_A_id&gt;&gt; -address &lt;&lt;var_nodeA_iscsi_lif01a_ip&gt;&gt; -netmask &lt;&lt;var_nodeA_iscsi_lif01a_mask&gt;&gt; –status-admin up – failover-policy disabled –firewall-policy data –auto-revert false
network interface create -vserver Infra-SVM -lif iscsi_lif01b -role data -data-protocol iscsi - home-node &lt;&lt;var_nodeA&gt;&gt; -home-port e0f-&lt;&lt;var_iscsi_vlan_B_id&gt;&gt; -address &lt;&lt;var_nodeA_iscsi_lif01b_ip&gt;&gt; -netmask &lt;&lt;var_nodeA_iscsi_lif01b_mask&gt;&gt; –status-admin up – failover-policy disabled –firewall-policy data –auto-revert false
network interface create -vserver Infra-SVM -lif iscsi_lif02a -role data -data-protocol iscsi - home-node &lt;&lt;var_nodeB&gt;&gt; -home-port e0e-&lt;&lt;var_iscsi_vlan_A_id&gt;&gt; -address &lt;&lt;var_nodeB_iscsi_lif01a_ip&gt;&gt; -netmask &lt;&lt;var_nodeB_iscsi_lif01a_mask&gt;&gt; –status-admin up – failover-policy disabled –firewall-policy data –auto-revert false
network interface create -vserver Infra-SVM -lif iscsi_lif02b -role data -data-protocol iscsi - home-node &lt;&lt;var_nodeB&gt;&gt; -home-port e0f-&lt;&lt;var_iscsi_vlan_B_id&gt;&gt; -address &lt;&lt;var_nodeB_iscsi_lif01b_ip&gt;&gt; -netmask &lt;&lt;var_nodeB_iscsi_lif01b_mask&gt;&gt; –status-admin up – failover-policy disabled –firewall-policy data –auto-revert false
network interface show</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="create-nfs-lifs-in-ontap">Create NFS LIFs in ONTAP</h4>
<div class="paragraph">
<p>The following table lists the information needed to complete this configuration.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Detail</th>
<th class="tableblock halign-left valign-top">Detail value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node A NFS LIF 01 a IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeA_nfs_lif_01_a_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node A NFS LIF 01 a network mask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeA_nfs_lif_01_a_mask&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node A NFS LIF 01 b IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeA_nfs_lif_01_b_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node A NFS LIF 01 b network mask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeA_nfs_lif_01_b_mask&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node B NFS LIF 02 a IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeB_nfs_lif_02_a_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node B NFS LIF 02 a network mask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeB_nfs_lif_02_a_mask&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node B NFS LIF 02 b IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeB_nfs_lif_02_b_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage node B NFS LIF 02 b network mask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nodeB_nfs_lif_02_b_mask&gt;&gt;</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create an NFS LIF.</p>
<div class="literalblock">
<div class="content">
<pre>network interface create -vserver Infra-SVM -lif nfs_lif01_a -role data -data-protocol nfs -home- node &lt;&lt;var_nodeA&gt;&gt; -home-port e0e-&lt;&lt;var_nfs_vlan_id&gt;&gt; –address &lt;&lt;var_nodeA_nfs_lif_01_a_ip&gt;&gt; - netmask &lt;&lt; var_nodeA_nfs_lif_01_a_mask&gt;&gt; -status-admin up –failover-policy broadcast-domain-wide – firewall-policy data –auto-revert true
network interface create -vserver Infra-SVM -lif nfs_lif01_b -role data -data-protocol nfs -home- node &lt;&lt;var_nodeA&gt;&gt; -home-port e0f-&lt;&lt;var_nfs_vlan_id&gt;&gt; –address &lt;&lt;var_nodeA_nfs_lif_01_b_ip&gt;&gt; - netmask &lt;&lt; var_nodeA_nfs_lif_01_b_mask&gt;&gt; -status-admin up –failover-policy broadcast-domain-wide – firewall-policy data –auto-revert true
network interface create -vserver Infra-SVM -lif nfs_lif02_a -role data -data-protocol nfs -home- node &lt;&lt;var_nodeB&gt;&gt; -home-port e0e-&lt;&lt;var_nfs_vlan_id&gt;&gt; –address &lt;&lt;var_nodeB_nfs_lif_02_a_ip&gt;&gt; - netmask &lt;&lt; var_nodeB_nfs_lif_02_a_mask&gt;&gt; -status-admin up –failover-policy broadcast-domain-wide – firewall-policy data –auto-revert true
network interface create -vserver Infra-SVM -lif nfs_lif02_b -role data -data-protocol nfs -home- node &lt;&lt;var_nodeB&gt;&gt; -home-port e0f-&lt;&lt;var_nfs_vlan_id&gt;&gt; –address &lt;&lt;var_nodeB_nfs_lif_02_b_ip&gt;&gt; - netmask &lt;&lt; var_nodeB_nfs_lif_02_b_mask&gt;&gt; -status-admin up –failover-policy broadcast-domain-wide – firewall-policy data –auto-revert true
network interface show</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="add-infrastructure-svm-administrator">Add infrastructure SVM administrator</h4>
<div class="paragraph">
<p>The following table lists the information needed to complete this configuration.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Detail</th>
<th class="tableblock halign-left valign-top">Detail value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vsmgmt IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_svm_mgmt_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vsmgmt network mask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_svm_mgmt_mask&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vsmgmt default gateway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_svm_mgmt_gateway&gt;&gt;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To add the infrastructure SVM administrator and SVM administration LIF to the management network, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the following command:</p>
<div class="literalblock">
<div class="content">
<pre>network interface create –vserver Infra-SVM –lif vsmgmt –role data –data-protocol none –home-node &lt;&lt;var_nodeB&gt;&gt; -home-port e0M –address &lt;&lt;var_svm_mgmt_ip&gt;&gt; -netmask &lt;&lt;var_svm_mgmt_mask&gt;&gt; - status-admin up –failover-policy broadcast-domain-wide –firewall-policy mgmt –auto-revert true</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
The SVM management IP here should be in the same subnet as the storage cluster management IP.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a default route to allow the SVM management interface to reach the outside world.</p>
<div class="literalblock">
<div class="content">
<pre>network route create –vserver Infra-SVM -destination 0.0.0.0/0 –gateway &lt;&lt;var_svm_mgmt_gateway&gt;&gt; network route show</pre>
</div>
</div>
</li>
<li>
<p>Set a password for the SVM <code>vsadmin</code> user and unlock the user.</p>
<div class="literalblock">
<div class="content">
<pre>security login password –username vsadmin –vserver Infra-SVM
Enter a new password: &lt;&lt;var_password&gt;&gt;
Enter it again: &lt;&lt;var_password&gt;&gt;
security login unlock –username vsadmin –vserver</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cisco-ucs-server-configuration">Cisco UCS server configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="flexpod-cisco-ucs-base">FlexPod Cisco UCS base</h3>
<div class="paragraph">
<p>Perform Initial Setup of Cisco UCS 6324 Fabric Interconnect for FlexPod Environments.</p>
</div>
<div class="paragraph">
<p>This section provides detailed procedures to configure Cisco UCS for use in a FlexPod ROBO environment by using Cisco UCS Manger.</p>
</div>
</div>
<div class="sect2">
<h3 id="cisco-ucs-fabric-interconnect-6324-a">Cisco UCS fabric interconnect 6324 A</h3>
<div class="paragraph">
<p>Cisco UCS uses access layer networking and servers. This high-performance, next-generation server system provides a data center with a high degree of workload agility and scalability.</p>
</div>
<div class="paragraph">
<p>Cisco UCS Manager 4.0(1b) supports the 6324 Fabric Interconnect that integrates the Fabric Interconnect into the Cisco UCS Chassis and provides an integrated solution for a smaller deployment environment. Cisco UCS Mini simplifies the system management and saves cost for the low scale deployments.</p>
</div>
<div class="paragraph">
<p>The hardware and software components support Cisco&#8217;s unified fabric, which runs multiple types of data center traffic over a single converged network adapter.</p>
</div>
</div>
<div class="sect2">
<h3 id="initial-system-setup">Initial system setup</h3>
<div class="paragraph">
<p>The first time when you access a fabric interconnect in a Cisco UCS domain, a setup wizard prompts you for the following information required to configure the system:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Installation method (GUI or CLI)</p>
</li>
<li>
<p>Setup mode (restore from full system backup or initial setup)</p>
</li>
<li>
<p>System configuration type (standalone or cluster configuration)</p>
</li>
<li>
<p>System name</p>
</li>
<li>
<p>Admin password</p>
</li>
<li>
<p>Management port IPv4 address and subnet mask, or IPv6 address and prefix</p>
</li>
<li>
<p>Default gateway IPv4 or IPv6 address</p>
</li>
<li>
<p>DNS Server IPv4 or IPv6 address</p>
</li>
<li>
<p>Default domain name</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following table lists the information needed to complete the Cisco UCS initial configuration on Fabric Interconnect A</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Detail</th>
<th class="tableblock halign-left valign-top">Detail/value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">System Name </p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_ucs_clustername&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Admin Password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_password&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Management IP Address: Fabric Interconnect A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_ucsa_mgmt_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Management netmask: Fabric Interconnect A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_ucsa_mgmt_mask&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default gateway: Fabric Interconnect A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_ucsa_mgmt_gateway&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster IP address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_ucs_cluster_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS server IP address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nameserver_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_domain_name&gt;&gt;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To configure the Cisco UCS for use in a FlexPod environment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Connect to the console port on the first Cisco UCS 6324 Fabric Interconnect A.</p>
<div class="literalblock">
<div class="content">
<pre>Enter the configuration method. (console/gui) ? console

  Enter the setup mode; setup newly or restore from backup. (setup/restore) ? setup

  You have chosen to setup a new Fabric interconnect. Continue? (y/n): y

  Enforce strong password? (y/n) [y]: Enter

  Enter the password for "admin":&lt;&lt;var_password&gt;&gt;
  Confirm the password for "admin":&lt;&lt;var_password&gt;&gt;

  Is this Fabric interconnect part of a cluster(select 'no' for standalone)? (yes/no) [n]: yes

  Enter the switch fabric (A/B) []: A

  Enter the system name: &lt;&lt;var_ucs_clustername&gt;&gt;

  Physical Switch Mgmt0 IP address : &lt;&lt;var_ucsa_mgmt_ip&gt;&gt;

  Physical Switch Mgmt0 IPv4 netmask : &lt;&lt;var_ucsa_mgmt_mask&gt;&gt;

  IPv4 address of the default gateway : &lt;&lt;var_ucsa_mgmt_gateway&gt;&gt;

  Cluster IPv4 address : &lt;&lt;var_ucs_cluster_ip&gt;&gt;

  Configure the DNS Server IP address? (yes/no) [n]: y

       DNS IP address : &lt;&lt;var_nameserver_ip&gt;&gt;

  Configure the default domain name? (yes/no) [n]: y
Default domain name: &lt;&lt;var_domain_name&gt;&gt;

  Join centralized management environment (UCS Central)? (yes/no) [n]: no

 NOTE: Cluster IP will be configured only after both Fabric Interconnects are initialized. UCSM will be functional only after peer FI is configured in clustering mode.

  Apply and save the configuration (select 'no' if you want to re-enter)? (yes/no): yes
  Applying configuration. Please wait.

  Configuration file - Ok</pre>
</div>
</div>
</li>
<li>
<p>Review the settings displayed on the console. If they are correct, answer <code>yes</code> to apply and save the configuration.</p>
</li>
<li>
<p>Wait for the login prompt to verify that the configuration has been saved.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following table lists the information needed to complete the Cisco UCS initial configuration on Fabric Interconnect B.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Detail</th>
<th class="tableblock halign-left valign-top">Detail/value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">System Name </p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_ucs_clustername&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Admin Password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_password&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Management IP Address-FI B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_ucsb_mgmt_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Management Netmask-FI B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_ucsb_mgmt_mask&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Gateway-FI B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_ucsb_mgmt_gateway&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster IP Address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_ucs_cluster_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS Server IP address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_nameserver_ip&gt;&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Domain Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&lt;var_domain_name&gt;&gt;</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Connect to the console port on the second Cisco UCS 6324 Fabric Interconnect B.</p>
<div class="literalblock">
<div class="content">
<pre> Enter the configuration method. (console/gui) ? console

  Installer has detected the presence of a peer Fabric interconnect. This Fabric interconnect will be added to the cluster. Continue (y/n) ? y

  Enter the admin password of the peer Fabric interconnect:&lt;&lt;var_password&gt;&gt;
    Connecting to peer Fabric interconnect... done
    Retrieving config from peer Fabric interconnect... done
    Peer Fabric interconnect Mgmt0 IPv4 Address: &lt;&lt;var_ucsb_mgmt_ip&gt;&gt;
    Peer Fabric interconnect Mgmt0 IPv4 Netmask: &lt;&lt;var_ucsb_mgmt_mask&gt;&gt;
    Cluster IPv4 address: &lt;&lt;var_ucs_cluster_address&gt;&gt;

    Peer FI is IPv4 Cluster enabled. Please Provide Local Fabric Interconnect Mgmt0 IPv4 Address

  Physical Switch Mgmt0 IP address : &lt;&lt;var_ucsb_mgmt_ip&gt;&gt;


  Apply and save the configuration (select 'no' if you want to re-enter)? (yes/no): yes
  Applying configuration. Please wait.

  Configuration file - Ok</pre>
</div>
</div>
</li>
<li>
<p>Wait for the login prompt to confirm that the configuration has been saved.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="log-into-cisco-ucs-manager">Log into Cisco UCS Manager</h3>
<div class="paragraph">
<p>To log into the Cisco Unified Computing System (UCS) environment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a web browser and navigate to the Cisco UCS Fabric Interconnect cluster address.</p>
<div class="paragraph">
<p>You may need to wait at least 5 minutes after configuring the second fabric interconnect for Cisco UCS Manager to come up.</p>
</div>
</li>
<li>
<p>Click the Launch UCS Manager link to launch Cisco UCS Manager.</p>
</li>
<li>
<p>Accept the necessary security certificates.</p>
</li>
<li>
<p>When prompted, enter admin as the user name and enter the administrator password.</p>
</li>
<li>
<p>Click Login to log in to Cisco UCS Manager.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="cisco-ucs-manager-software-version-4-01b">Cisco UCS Manager software version 4.0(1b)</h3>
<div class="paragraph">
<p>This document assumes the use of Cisco UCS Manager Software version 4.0(1b). To upgrade the Cisco UCS Manager software and the Cisco UCS 6324 Fabric Interconnect software refer to  <a href="https://www.cisco.com/c/en/us/support/servers-unified-computing/ucs-manager/products-installation-and-configuration-guides-list.html" target="_blank" rel="noopener">Cisco UCS Manager Install and Upgrade Guides.</a></p>
</div>
</div>
<div class="sect2">
<h3 id="configure-cisco-ucs-call-home">Configure Cisco UCS Call Home</h3>
<div class="paragraph">
<p>Cisco highly recommends that you configure Call Home in Cisco UCS Manager. Configuring Call Home accelerates the resolution of support cases. To configure Call Home, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click Admin on the left.</p>
</li>
<li>
<p>Select All &gt; Communication Management &gt; Call Home.</p>
</li>
<li>
<p>Change the State to On.</p>
</li>
<li>
<p>Fill in all the fields according to your Management preferences and click Save Changes and OK to complete configuring Call Home.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="add-block-of-ip-addresses-for-keyboard-video-mouse-access">Add block of IP addresses for keyboard, video, mouse access</h3>
<div class="paragraph">
<p>To create a block of IP addresses for in band server keyboard, video, mouse (KVM) access in the Cisco UCS environment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click LAN on the left.</p>
</li>
<li>
<p>Expand Pools &gt; root &gt; IP Pools.</p>
</li>
<li>
<p>Right-click IP Pool ext-mgmt and select Create Block of IPv4 Addresses.</p>
</li>
<li>
<p>Enter the starting IP address of the block, number of IP addresses required, and the subnet mask and gateway information.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image7.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click OK to create the block.</p>
</li>
<li>
<p>Click OK in the confirmation message.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="synchronize-cisco-ucs-to-ntp">Synchronize Cisco UCS to NTP</h3>
<div class="paragraph">
<p>To synchronize the Cisco UCS environment to the NTP servers in the Nexus switches, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click Admin on the left.</p>
</li>
<li>
<p>Expand All &gt; Time Zone Management.</p>
</li>
<li>
<p>Select Time Zone.</p>
</li>
<li>
<p>In the Properties pane, select the appropriate time zone in the Time Zone menu.</p>
</li>
<li>
<p>Click Save Changes and click OK.</p>
</li>
<li>
<p>Click Add NTP Server.</p>
</li>
<li>
<p>Enter <code>&lt;switch-a-ntp-ip&gt; or &lt;Nexus-A-mgmt-IP&gt;</code> and click OK. Click OK.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image8.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click Add NTP Server.</p>
</li>
<li>
<p>Enter <code>&lt;switch-b-ntp-ip&gt;</code> <code>or &lt;Nexus-B-mgmt-IP&gt;</code> and click OK. Click OK on the confirmation.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image9.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="edit-chassis-discovery-policy">Edit chassis discovery policy</h3>
<div class="paragraph">
<p>Setting the discovery policy simplifies the addition of Cisco UCS B-Series chassis and of additional fabric extenders for further Cisco UCS C-Series connectivity. To modify the chassis discovery policy, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click Equipment on the left and select Equipment in the second list.</p>
</li>
<li>
<p>In the right pane, select the Policies tab.</p>
</li>
<li>
<p>Under Global Policies, set the Chassis/FEX Discovery Policy to match the minimum number of uplink ports that are cabled between the chassis or fabric extenders (FEXes) and the fabric interconnects.</p>
</li>
<li>
<p>Set the Link Grouping Preference to Port Channel. If the environment being setup contains a large amount of multicast traffic, set the Multicast Hardware Hash setting to Enabled.</p>
</li>
<li>
<p>Click Save Changes.</p>
</li>
<li>
<p>Click OK.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="enable-server-uplink-and-storage-ports">Enable server, uplink, and storage ports</h3>
<div class="paragraph">
<p>To enable server and uplink ports, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, in the navigation pane, select the Equipment tab.</p>
</li>
<li>
<p>Expand Equipment &gt; Fabric Interconnects &gt; Fabric Interconnect A &gt; Fixed Module.</p>
</li>
<li>
<p>Expand Ethernet Ports.</p>
</li>
<li>
<p>Select ports 1 and 2 that are connected to the Cisco Nexus 31108 switches, right-click, and select Configure as Uplink Port.</p>
</li>
<li>
<p>Click Yes to confirm the uplink ports and click OK.</p>
</li>
<li>
<p>Select ports 3 and 4 that are connected to the NetApp Storage Controllers, right-click, and select Configure as Appliance Port.</p>
</li>
<li>
<p>Click Yes to confirm the appliance ports.</p>
</li>
<li>
<p>On the Configure as Appliance Port window, click OK. </p>
</li>
<li>
<p>Click OK to confirm.</p>
</li>
<li>
<p>In the left pane, select Fixed Module under Fabric Interconnect A. </p>
</li>
<li>
<p>From the Ethernet Ports tab, confirm that ports have been configured correctly in the If Role column. If any port C-Series servers were configured on the Scalability port, click on it to verify port connectivity there.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image10.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Expand Equipment &gt; Fabric Interconnects &gt; Fabric Interconnect B &gt; Fixed Module.</p>
</li>
<li>
<p>Expand Ethernet Ports.</p>
</li>
<li>
<p>Select Ethernet ports 1 and 2 that are connected to the Cisco Nexus 31108 switches, right-click, and select Configure as Uplink Port.</p>
</li>
<li>
<p>Click Yes to confirm the uplink ports and click OK.</p>
</li>
<li>
<p>Select ports 3 and 4 that are connected to the NetApp Storage Controllers, right-click, and select Configure as Appliance Port.</p>
</li>
<li>
<p>Click Yes to confirm the appliance ports.</p>
</li>
<li>
<p>On the Configure as Appliance Port window, click OK.</p>
</li>
<li>
<p>Click OK to confirm.</p>
</li>
<li>
<p>In the left pane, select Fixed Module under Fabric Interconnect B. </p>
</li>
<li>
<p>From the Ethernet Ports tab, confirm that ports have been configured correctly in the If Role column. If any port C-Series servers were configured on the Scalability port, click it to verify port connectivity there.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image11.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-uplink-port-channels-to-cisco-nexus-31108-switches">Create uplink port channels to Cisco Nexus 31108 switches</h3>
<div class="paragraph">
<p>To configure the necessary port channels in the Cisco UCS environment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, select the LAN tab in the navigation pane.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
In this procedure, two port channels are created: one from Fabric A to both Cisco Nexus 31108 switches and one from Fabric B to both Cisco Nexus 31108 switches. If you are using standard switches, modify this procedure accordingly. If you are using 1 Gigabit Ethernet (1GbE) switches and GLC-T SFPs on the Fabric Interconnects, the interface speeds of Ethernet ports 1/1 and 1/2 in the Fabric Interconnects must be set to 1Gbps.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Under LAN &gt; LAN Cloud, expand the Fabric A tree.</p>
</li>
<li>
<p>Right-click Port Channels.</p>
</li>
<li>
<p>Select Create Port Channel.</p>
</li>
<li>
<p>Enter 13 as the unique ID of the port channel.</p>
</li>
<li>
<p>Enter vPC-13-Nexus as the name of the port channel.</p>
</li>
<li>
<p>Click Next.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image12.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Select the following ports to be added to the port channel:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Slot ID 1 and port 1</p>
</li>
<li>
<p>Slot ID 1 and port 2</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click &gt;&gt; to add the ports to the port channel.</p>
</li>
<li>
<p>Click Finish to create the port channel. Click OK.</p>
</li>
<li>
<p>Under Port Channels, select the newly created port channel.</p>
<div class="paragraph">
<p>The port channel should have an Overall Status of Up.</p>
</div>
</li>
<li>
<p>In the navigation pane, under LAN &gt; LAN Cloud, expand the Fabric B tree.</p>
</li>
<li>
<p>Right-click Port Channels.</p>
</li>
<li>
<p>Select Create Port Channel.</p>
</li>
<li>
<p>Enter 14 as the unique ID of the port channel.</p>
</li>
<li>
<p>Enter vPC-14-Nexus as the name of the port channel. Click Next.</p>
</li>
<li>
<p>Select the following ports to be added to the port channel:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Slot ID 1 and port 1</p>
</li>
<li>
<p>Slot ID 1 and port 2</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click &gt;&gt; to add the ports to the port channel.</p>
</li>
<li>
<p>Click Finish to create the port channel. Click OK.</p>
</li>
<li>
<p>Under Port Channels, select the newly created port-channel.</p>
</li>
<li>
<p>The port channel should have an Overall Status of Up.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-an-organization-optional">Create an organization (optional)</h3>
<div class="paragraph">
<p>Organizations are used to organizing resources and restricting access to various groups within the IT organization, thereby enabling multitenancy of the compute resources.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
Although this document does not assume the use of organizations, this procedure provides instructions for creating one.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To configure an organization in the Cisco UCS environment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, from the New menu in the toolbar at the top of the window, select Create Organization.</p>
</li>
<li>
<p>Enter a name for the organization.</p>
</li>
<li>
<p>Optional: Enter a description for the organization. Click OK.</p>
</li>
<li>
<p>Click OK in the confirmation message.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configure-storage-appliance-ports-and-storage-vlans">Configure storage appliance ports and storage VLANs</h3>
<div class="paragraph">
<p>To configure the storage appliance ports and storage VLANs, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Cisco UCS Manager, select the LAN tab.</p>
</li>
<li>
<p>Expand the Appliances cloud.</p>
</li>
<li>
<p>Right-click VLANs under Appliances Cloud.</p>
</li>
<li>
<p>Select Create VLANs.</p>
</li>
<li>
<p>Enter NFS-VLAN as the name for the Infrastructure NFS VLAN.</p>
</li>
<li>
<p>Leave Common/Global selected.</p>
</li>
<li>
<p>Enter <code>&lt;&lt;var_nfs_vlan_id&gt;&gt;</code> for the VLAN ID.</p>
</li>
<li>
<p>Leave Sharing Type set to None.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image13.jpeg" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click OK, and then click OK again to create the VLAN.</p>
</li>
<li>
<p>Right-click VLANs under Appliances Cloud.</p>
</li>
<li>
<p>Select Create VLANs.</p>
</li>
<li>
<p>Enter iSCSI-A-VLAN as the name for the Infrastructure iSCSI Fabric A VLAN.</p>
</li>
<li>
<p>Leave Common/Global selected.</p>
</li>
<li>
<p>Enter <code>&lt;&lt;var_iscsi-a_vlan_id&gt;&gt;</code> for the VLAN ID.</p>
</li>
<li>
<p>Click OK, and then click OK again to create the VLAN.</p>
</li>
<li>
<p>Right-click VLANs under Appliances Cloud.</p>
</li>
<li>
<p>Select Create VLANs.</p>
</li>
<li>
<p>Enter iSCSI-B-VLAN as the name for the Infrastructure iSCSI Fabric B VLAN.</p>
</li>
<li>
<p>Leave Common/Global selected.</p>
</li>
<li>
<p>Enter <code>&lt;&lt;var_iscsi-b_vlan_id&gt;&gt;</code> for the VLAN ID.</p>
</li>
<li>
<p>Click OK, and then click OK again to create the VLAN.</p>
</li>
<li>
<p>Right-click VLANs under Appliances Cloud.</p>
</li>
<li>
<p>Select Create VLANs.</p>
</li>
<li>
<p>Enter Native-VLAN as the name for the Native VLAN.</p>
</li>
<li>
<p>Leave Common/Global selected.</p>
</li>
<li>
<p>Enter <code>&lt;&lt;var_native_vlan_id&gt;&gt;</code> for the VLAN ID.</p>
</li>
<li>
<p>Click OK, and then click OK again to create the VLAN.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image14.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>In the navigation pane, under LAN &gt; Policies, expand Appliances and right-click Network Control Policies.</p>
</li>
<li>
<p>Select Create Network Control Policy.</p>
</li>
<li>
<p>Name the policy <code>Enable_CDP_LLPD</code> and select Enabled next to CDP.</p>
</li>
<li>
<p>Enable the Transmit and Receive features for LLDP.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image15.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click OK and then click OK again to create the policy.</p>
</li>
<li>
<p>In the navigation pane, under LAN &gt; Appliances Cloud, expand the Fabric A tree.</p>
</li>
<li>
<p>Expand Interfaces.</p>
</li>
<li>
<p>Select Appliance Interface 1/3.</p>
</li>
<li>
<p>In the User Label field, put in information indicating the storage controller port, such as <code>&lt;storage_controller_01_name&gt;:e0e</code>. Click Save Changes and OK.</p>
</li>
<li>
<p>Select the Enable_CDP Network Control Policy and select Save Changes and OK.</p>
</li>
<li>
<p>Under VLANs, select the iSCSI-A-VLAN, NFS VLAN, and Native VLAN. Set the Native-VLAN as the Native VLAN. Clear the default VLAN selection.</p>
</li>
<li>
<p>Click Save Changes and OK.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image16.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Select Appliance Interface 1/4 under Fabric A.</p>
</li>
<li>
<p>In the User Label field, put in information indicating the storage controller port, such as <code>&lt;storage_controller_02_name&gt;:e0e</code>. Click Save Changes and OK.</p>
</li>
<li>
<p>Select the Enable_CDP Network Control Policy and select Save Changes and OK.</p>
</li>
<li>
<p>Under VLANs, select the iSCSI-A-VLAN, NFS VLAN, and Native VLAN.</p>
</li>
<li>
<p>Set the Native-VLAN as the Native VLAN. </p>
</li>
<li>
<p>Clear the default VLAN selection.</p>
</li>
<li>
<p>Click Save Changes and OK.</p>
</li>
<li>
<p>In the navigation pane, under LAN &gt; Appliances Cloud, expand the Fabric B tree.</p>
</li>
<li>
<p>Expand Interfaces.</p>
</li>
<li>
<p>Select Appliance Interface 1/3.</p>
</li>
<li>
<p>In the User Label field, put in information indicating the storage controller port, such as <code>&lt;storage_controller_01_name&gt;:e0f</code>. Click Save Changes and OK.</p>
</li>
<li>
<p>Select the Enable_CDP Network Control Policy and select Save Changes and OK.</p>
</li>
<li>
<p>Under VLANs, select the iSCSI-B-VLAN, NFS VLAN, and Native VLAN. Set the Native-VLAN as the Native VLAN. Unselect the default VLAN.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image17.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click Save Changes and OK.</p>
</li>
<li>
<p>Select Appliance Interface 1/4 under Fabric B.</p>
</li>
<li>
<p>In the User Label field, put in information indicating the storage controller port, such as <code>&lt;storage_controller_02_name&gt;:e0f</code>. Click Save Changes and OK.</p>
</li>
<li>
<p>Select the Enable_CDP Network Control Policy and select Save Changes and OK.</p>
</li>
<li>
<p>Under VLANs, select the iSCSI-B-VLAN, NFS VLAN, and Native VLAN. Set the Native-VLAN as the Native VLAN. Unselect the default VLAN.</p>
</li>
<li>
<p>Click Save Changes and OK.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="set-jumbo-frames-in-cisco-ucs-fabric">Set jumbo frames in Cisco UCS fabric</h3>
<div class="paragraph">
<p>To configure jumbo frames and enable quality of service in the Cisco UCS fabric, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, in the navigation pane, click the LAN tab.</p>
</li>
<li>
<p>Select LAN &gt; LAN Cloud &gt; QoS System Class.</p>
</li>
<li>
<p>In the right pane, click the General tab.</p>
</li>
<li>
<p>On the Best Effort row, enter 9216 in the box under the MTU column.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image18.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click Save Changes.</p>
</li>
<li>
<p>Click OK.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="acknowledge-cisco-ucs-chassis">Acknowledge Cisco UCS chassis</h3>
<div class="paragraph">
<p>To acknowledge all Cisco UCS chassis, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, select the Equipment tab, then Expand the Equipment tab on the right.</p>
</li>
<li>
<p>Expand Equipment &gt; Chassis.</p>
</li>
<li>
<p>In the Actions for Chassis 1, select Acknowledge Chassis.</p>
</li>
<li>
<p>Click OK and then click OK to complete acknowledging the chassis.</p>
</li>
<li>
<p>Click Close to close the Properties window.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="load-cisco-ucs-4-01b-firmware-images">Load Cisco UCS 4.0(1b) firmware images</h3>
<div class="paragraph">
<p>To upgrade the Cisco UCS Manager software and the Cisco UCS Fabric Interconnect software to version 4.0(1b) refer to <a href="https://www.cisco.com/en/US/products/ps10281/prod_installation_guides_list.html" target="_blank" rel="noopener">Cisco UCS Manager Install and Upgrade Guides</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="create-host-firmware-package">Create host firmware package</h3>
<div class="paragraph">
<p>Firmware management policies allow the administrator to select the corresponding packages for a given server configuration. These policies often include packages for adapter, BIOS, board controller, FC adapters, host bus adapter (HBA) option ROM, and storage controller properties.</p>
</div>
<div class="paragraph">
<p>To create a firmware management policy for a given server configuration in the Cisco UCS environment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click Servers on the left.</p>
</li>
<li>
<p>Select Policies &gt; root.</p>
</li>
<li>
<p>Expand Host Firmware Packages.</p>
</li>
<li>
<p>Select default.</p>
</li>
<li>
<p>In the Actions pane, select Modify Package Versions.</p>
</li>
<li>
<p>Select the version 4.0(1b) for both the Blade Packages.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image19.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click OK then OK again to modify the host firmware package.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-mac-address-pools">Create MAC address pools</h3>
<div class="paragraph">
<p>To configure the necessary MAC address pools for the Cisco UCS environment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click LAN on the left.</p>
</li>
<li>
<p>Select Pools &gt; root.</p>
<div class="paragraph">
<p>In this procedure, two MAC address pools are created, one for each switching fabric.</p>
</div>
</li>
<li>
<p>Right-click MAC Pools under the root organization.</p>
</li>
<li>
<p>Select Create MAC Pool to create the MAC address pool.</p>
</li>
<li>
<p>Enter MAC-Pool-A as the name of the MAC pool.</p>
</li>
<li>
<p>Optional: Enter a description for the MAC pool.</p>
</li>
<li>
<p>Select Sequential as the option for Assignment Order. Click Next.</p>
</li>
<li>
<p>Click Add.</p>
</li>
<li>
<p>Specify a starting MAC address.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
For the FlexPod solution, the recommendation is to place 0A in the next-to-last octet of the starting MAC address to identify all of the MAC addresses as fabric A addresses. In our example, we have carried forward the example of also embedding the Cisco UCS domain number information giving us 00:25:B5:32:0A:00 as our first MAC address.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Specify a size for the MAC address pool that is sufficient to support the available blade or server resources. Click OK.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image20.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click Finish.</p>
</li>
<li>
<p>In the confirmation message, click OK.</p>
</li>
<li>
<p>Right-click MAC Pools under the root organization.</p>
</li>
<li>
<p>Select Create MAC Pool to create the MAC address pool.</p>
</li>
<li>
<p>Enter MAC-Pool-B as the name of the MAC pool.</p>
</li>
<li>
<p>Optional: Enter a description for the MAC pool.</p>
</li>
<li>
<p>Select Sequential as the option for Assignment Order. Click Next.</p>
</li>
<li>
<p>Click Add.</p>
</li>
<li>
<p>Specify a starting MAC address.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
For the FlexPod solution, it is recommended to place 0B in the next to last octet of the starting MAC address to identify all the MAC addresses in this pool as fabric B addresses. Once again, we have carried forward in our example of also embedding the Cisco UCS domain number information giving us 00:25:B5:32:0B:00 as our first MAC address.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Specify a size for the MAC address pool that is sufficient to support the available blade or server resources. Click OK.</p>
</li>
<li>
<p>Click Finish.</p>
</li>
<li>
<p>In the confirmation message, click OK.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-iscsi-iqn-pool">Create iSCSI IQN pool</h3>
<div class="paragraph">
<p>To configure the necessary IQN pools for the Cisco UCS environment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click SAN on the left.</p>
</li>
<li>
<p>Select Pools &gt; root.</p>
</li>
<li>
<p>Right- click IQN Pools.</p>
</li>
<li>
<p>Select Create IQN Suffix Pool to create the IQN pool.</p>
</li>
<li>
<p>Enter IQN-Pool for the name of the IQN pool.</p>
</li>
<li>
<p>Optional: Enter a description for the IQN pool.</p>
</li>
<li>
<p>Enter <code>iqn.1992-08.com.cisco</code> as the prefix.</p>
</li>
<li>
<p>Select Sequential for Assignment Order. Click Next.</p>
</li>
<li>
<p>Click Add.</p>
</li>
<li>
<p>Enter <code>ucs-host</code> as the suffix.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
If multiple Cisco UCS domains are being used, a more specific IQN suffix might need to be used.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Enter 1 in the From field.</p>
</li>
<li>
<p>Specify the size of the IQN block sufficient to support the available server resources. Click OK.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image21.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click Finish.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-iscsi-initiator-ip-address-pools">Create iSCSI initiator IP address pools</h3>
<div class="paragraph">
<p>To configure the necessary IP pools iSCSI boot for the Cisco UCS environment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click LAN on the left.</p>
</li>
<li>
<p>Select Pools &gt; root.</p>
</li>
<li>
<p>Right-click IP Pools.</p>
</li>
<li>
<p>Select Create IP Pool.</p>
</li>
<li>
<p>Enter iSCSI-IP-Pool-A as the name of IP pool.</p>
</li>
<li>
<p>Optional: Enter a description for the IP pool.</p>
</li>
<li>
<p>Select Sequential for the assignment order. Click Next.</p>
</li>
<li>
<p>Click Add to add a block of IP address.</p>
</li>
<li>
<p>In the From field, enter the beginning of the range to assign as iSCSI IP addresses.</p>
</li>
<li>
<p>Set the size to enough addresses to accommodate the servers. Click OK.</p>
</li>
<li>
<p>Click Next.</p>
</li>
<li>
<p>Click Finish.</p>
</li>
<li>
<p>Right-click IP Pools.</p>
</li>
<li>
<p>Select Create IP Pool.</p>
</li>
<li>
<p>Enter iSCSI-IP-Pool-B as the name of IP pool.</p>
</li>
<li>
<p>Optional: Enter a description for the IP pool.</p>
</li>
<li>
<p>Select Sequential for the assignment order. Click Next.</p>
</li>
<li>
<p>Click Add to add a block of IP address.</p>
</li>
<li>
<p>In the From field, enter the beginning of the range to assign as iSCSI IP addresses.</p>
</li>
<li>
<p>Set the size to enough addresses to accommodate the servers. Click OK.</p>
</li>
<li>
<p>Click Next.</p>
</li>
<li>
<p>Click Finish.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-uuid-suffix-pool">Create UUID suffix pool</h3>
<div class="paragraph">
<p>To configure the necessary universally unique identifier (UUID) suffix pool for the Cisco UCS environment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click Servers on the left.</p>
</li>
<li>
<p>Select Pools &gt; root.</p>
</li>
<li>
<p>Right-click UUID Suffix Pools.</p>
</li>
<li>
<p>Select Create UUID Suffix Pool.</p>
</li>
<li>
<p>Enter UUID-Pool as the name of the UUID suffix pool.</p>
</li>
<li>
<p>Optional: Enter a description for the UUID suffix pool.</p>
</li>
<li>
<p>Keep the prefix at the derived option.</p>
</li>
<li>
<p>Select Sequential for the Assignment Order.</p>
</li>
<li>
<p>Click Next.</p>
</li>
<li>
<p>Click Add to add a block of UUIDs.</p>
</li>
<li>
<p>Keep the From field at the default setting.</p>
</li>
<li>
<p>Specify a size for the UUID block that is sufficient to support the available blade or server resources. Click OK.</p>
</li>
<li>
<p>Click Finish.</p>
</li>
<li>
<p>Click OK.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-server-pool">Create server pool</h3>
<div class="paragraph">
<p>To configure the necessary server pool for the Cisco UCS environment, complete the following steps:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
Consider creating unique server pools to achieve the granularity that is required in your environment.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click Servers on the left.</p>
</li>
<li>
<p>Select Pools &gt; root.</p>
</li>
<li>
<p>Right-click Server Pools.</p>
</li>
<li>
<p>Select Create Server Pool.</p>
</li>
<li>
<p>Enter `Infra-Pool `as the name of the server pool.</p>
</li>
<li>
<p>Optional: Enter a description for the server pool. Click Next.</p>
</li>
<li>
<p>Select two (or more) servers to be used for the VMware management cluster and click &gt;&gt; to add them to the `Infra-Pool `server pool.</p>
</li>
<li>
<p>Click Finish.</p>
</li>
<li>
<p>Click OK.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-network-control-policy-for-cisco-discovery-protocol-and-link-layer-discovery-protocol">Create Network Control Policy for Cisco Discovery Protocol and Link Layer Discovery Protocol</h3>
<div class="paragraph">
<p>To create a Network Control Policy for Cisco Discovery Protocol (CDP) and Link Layer Discovery Protocol (LLDP), complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click LAN on the left.</p>
</li>
<li>
<p>Select Policies &gt; root.</p>
</li>
<li>
<p>Right-click Network Control Policies.</p>
</li>
<li>
<p>Select Create Network Control Policy.</p>
</li>
<li>
<p>Enter Enable-CDP-LLDP policy name.</p>
</li>
<li>
<p>For CDP, select the Enabled option.</p>
</li>
<li>
<p>For LLDP, scroll down and select Enabled for both Transmit and Receive.</p>
</li>
<li>
<p>Click OK to create the network control policy. Click OK.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image22.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-power-control-policy">Create power control policy</h3>
<div class="paragraph">
<p>To create a power control policy for the Cisco UCS environment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click Servers tab on the left.</p>
</li>
<li>
<p>Select Policies &gt; root.</p>
</li>
<li>
<p>Right-click Power Control Policies.</p>
</li>
<li>
<p>Select Create Power Control Policy.</p>
</li>
<li>
<p>Enter No-Power-Cap as the power control policy name.</p>
</li>
<li>
<p>Change the power capping setting to No Cap.</p>
</li>
<li>
<p>Click OK to create the power control policy. Click OK.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image23.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-server-pool-qualification-policy-optional">Create server pool qualification policy (Optional)</h3>
<div class="paragraph">
<p>To create an optional server pool qualification policy for the Cisco UCS environment, complete the following steps:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
This example creates a policy for Cisco UCS B-Series servers with the Intel E2660 v4 Xeon Broadwell processors.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click Servers on the left.</p>
</li>
<li>
<p>Select Policies &gt; root.</p>
</li>
<li>
<p>Select Server Pool Policy Qualifications.</p>
</li>
<li>
<p>Select Create Server Pool Policy Qualification or Add.</p>
</li>
<li>
<p>Name the policy Intel.</p>
</li>
<li>
<p>Select Create CPU/Cores Qualifications.</p>
</li>
<li>
<p>Select Xeon for the Processor/Architecture.</p>
</li>
<li>
<p>Enter <code>&lt;UCS-CPU- PID&gt;</code> as the process ID (PID).</p>
</li>
<li>
<p>Click OK to create the CPU/Core qualification.</p>
</li>
<li>
<p>Click OK to create the policy, and then click OK for the confirmation.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image24.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-server-bios-policy">Create server BIOS policy</h3>
<div class="paragraph">
<p>To create a server BIOS policy for the Cisco UCS environment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click Servers on the left.</p>
</li>
<li>
<p>Select Policies &gt; root.</p>
</li>
<li>
<p>Right-click BIOS Policies.</p>
</li>
<li>
<p>Select Create BIOS Policy.</p>
</li>
<li>
<p>Enter VM-Host as the BIOS policy name.</p>
</li>
<li>
<p>Change the Quiet Boot setting to disabled.</p>
</li>
<li>
<p>Change Consistent Device Naming to enabled.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image25.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Select the Processor tab and set the following parameters:</p>
<div class="ulist">
<ul>
<li>
<p>Processor C State: disabled</p>
</li>
<li>
<p>Processor C1E: disabled</p>
</li>
<li>
<p>Processor C3 Report: disabled</p>
</li>
<li>
<p>Processor C7 Report: disabled</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image26.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Scroll down to the remaining Processor options and set the following parameters:</p>
<div class="ulist">
<ul>
<li>
<p>Energy Performance: performance</p>
</li>
<li>
<p>Frequency Floor Override: enabled</p>
</li>
<li>
<p>DRAM Clock Throttling: performance</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image27.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click RAS Memory and set the following parameters:</p>
<div class="ulist">
<ul>
<li>
<p>LV DDR Mode: performance mode</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image28.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click Finish to create the BIOS policy.</p>
</li>
<li>
<p>Click OK.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="update-the-default-maintenance-policy">Update the default maintenance policy</h3>
<div class="paragraph">
<p>To update the default Maintenance Policy, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click Servers on the left.</p>
</li>
<li>
<p>Select Policies &gt; root.</p>
</li>
<li>
<p>Select Maintenance Policies &gt; default.</p>
</li>
<li>
<p>Change the Reboot Policy to User Ack.</p>
</li>
<li>
<p>Select On Next Boot to delegate maintenance windows to server administrators.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image29.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click Save Changes.</p>
</li>
<li>
<p>Click OK to accept the change.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-vnic-templates">Create vNIC templates</h3>
<div class="paragraph">
<p>To create multiple virtual network interface card (vNIC) templates for the Cisco UCS environment, complete the procedures described in this section.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
 A total of four vNIC templates are created.  
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="create-infrastructure-vnics">Create infrastructure vNICs</h4>
<div class="paragraph">
<p>To create an infrastructure vNIC, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click LAN on the left.</p>
</li>
<li>
<p>Select Policies &gt; root.</p>
</li>
<li>
<p>Right-click vNIC Templates.</p>
</li>
<li>
<p>Select Create vNIC Template.</p>
</li>
<li>
<p>Enter <code>Site-XX-vNIC_A</code> as the vNIC template name.</p>
</li>
<li>
<p>Select updating-template as the Template Type.</p>
</li>
<li>
<p>For Fabric ID, select Fabric A.</p>
</li>
<li>
<p>Ensure that the Enable Failover option is not selected.</p>
</li>
<li>
<p>Select Primary Template for Redundancy Type.</p>
</li>
<li>
<p>Leave the Peer Redundancy Template set to <code>&lt;not set&gt;</code>.</p>
</li>
<li>
<p>Under Target, make sure that only the Adapter option is selected.</p>
</li>
<li>
<p>Set <code>Native-VLAN</code> as the native VLAN.</p>
</li>
<li>
<p>Select vNIC Name for the CDN Source.</p>
</li>
<li>
<p>For MTU, enter 9000.</p>
</li>
<li>
<p>Under Permitted VLANs, select <code>Native-VLAN, Site-XX-IB-MGMT, Site-XX-NFS, Site-XX-VM-Traffic</code>, and Site-XX-vMotion. Use the Ctrl key to make this multiple selection.</p>
</li>
<li>
<p>Click Select. These VLANs should now appear under Selected VLANs.</p>
</li>
<li>
<p>In the MAC Pool list, select <code>MAC_Pool_A</code>.</p>
</li>
<li>
<p>In the Network Control Policy list, select Pool-A.</p>
</li>
<li>
<p>In the Network Control Policy list, select Enable-CDP-LLDP.</p>
</li>
<li>
<p>Click OK to create the vNIC template.</p>
</li>
<li>
<p>Click OK.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image30.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>To create the secondary redundancy template Infra-B, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click LAN on the left.</p>
</li>
<li>
<p>Select Policies &gt; root.</p>
</li>
<li>
<p>Right-click vNIC Templates.</p>
</li>
<li>
<p>Select Create vNIC Template.</p>
</li>
<li>
<p>Enter `Site-XX-vNIC_B `as the vNIC template name.</p>
</li>
<li>
<p>Select updating-template as the Template Type.</p>
</li>
<li>
<p>For Fabric ID, select Fabric B.</p>
</li>
<li>
<p>Select the Enable Failover option.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
Selecting Failover is a critical step to improve link failover time by handling it at the hardware level, and to guard against any potential for NIC failure not being detected by the virtual switch.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Select Primary Template for Redundancy Type.</p>
</li>
<li>
<p>Leave the Peer Redundancy Template set to <code>vNIC_Template_A</code>.</p>
</li>
<li>
<p>Under Target, make sure that only the Adapter option is selected.</p>
</li>
<li>
<p>Set <code>Native-VLAN</code> as the native VLAN.</p>
</li>
<li>
<p>Select vNIC Name for the CDN Source.</p>
</li>
<li>
<p>For MTU, enter <code>9000</code>.</p>
</li>
<li>
<p>Under Permitted VLANs, select <code>Native-VLAN, Site-XX-IB-MGMT, Site-XX-NFS, Site-XX-VM-Traffic</code>, and Site-XX-vMotion. Use the Ctrl key to make this multiple selection.</p>
</li>
<li>
<p>Click Select. These VLANs should now appear under Selected VLANs.</p>
</li>
<li>
<p>In the MAC Pool list, select <code>MAC_Pool_B</code>.</p>
</li>
<li>
<p>In the Network Control Policy list, select Pool-B.</p>
</li>
<li>
<p>In the Network Control Policy list, select Enable-CDP-LLDP. </p>
</li>
<li>
<p>Click OK to create the vNIC template.</p>
</li>
<li>
<p>Click OK.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image31.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="create-iscsi-vnics">Create iSCSI vNICs</h4>
<div class="paragraph">
<p>To create iSCSI vNICs, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select LAN on the left.</p>
</li>
<li>
<p>Select Policies &gt; root.</p>
</li>
<li>
<p>Right-click vNIC Templates.</p>
</li>
<li>
<p>Select Create vNIC Template. </p>
</li>
<li>
<p>Enter <code>Site- 01-iSCSI_A</code> as the vNIC template name.</p>
</li>
<li>
<p>Select Fabric A. Do not select the Enable Failover option. </p>
</li>
<li>
<p>Leave Redundancy Type set at No Redundancy.</p>
</li>
<li>
<p>Under Target, make sure that only the Adapter option is selected.</p>
</li>
<li>
<p>Select Updating Template for Template Type.</p>
</li>
<li>
<p>Under VLANs, select only Site- 01-iSCSI_A_VLAN.</p>
</li>
<li>
<p>Select Site- 01-iSCSI_A_VLAN as the native VLAN.</p>
</li>
<li>
<p>Leave vNIC Name set for the CDN Source. </p>
</li>
<li>
<p>Under MTU, enter 9000. </p>
</li>
<li>
<p>From the MAC Pool list, select MAC-Pool-A.</p>
</li>
<li>
<p>From the Network Control Policy list, select Enable-CDP-LLDP.</p>
</li>
<li>
<p>Click OK to complete creating the vNIC template.</p>
</li>
<li>
<p>Click OK.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image32.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Select LAN on the left.</p>
</li>
<li>
<p>Select Policies &gt; root.</p>
</li>
<li>
<p>Right-click vNIC Templates.</p>
</li>
<li>
<p>Select Create vNIC Template.</p>
</li>
<li>
<p>Enter <code>Site- 01-iSCSI_B</code> as the vNIC template name.</p>
</li>
<li>
<p>Select Fabric B. Do not select the Enable Failover option.</p>
</li>
<li>
<p>Leave Redundancy Type set at No Redundancy.</p>
</li>
<li>
<p>Under Target, make sure that only the Adapter option is selected.</p>
</li>
<li>
<p>Select Updating Template for Template Type.</p>
</li>
<li>
<p>Under VLANs, select only <code>Site- 01-iSCSI_B_VLAN</code>.</p>
</li>
<li>
<p>Select <code>Site- 01-iSCSI_B_VLAN</code> as the native VLAN.</p>
</li>
<li>
<p>Leave vNIC Name set for the CDN Source.</p>
</li>
<li>
<p>Under MTU, enter 9000.</p>
</li>
<li>
<p>From the MAC Pool list, select <code>MAC-Pool-B</code>. </p>
</li>
<li>
<p>From the Network Control Policy list, select <code>Enable-CDP-LLDP</code>.</p>
</li>
<li>
<p>Click OK to complete creating the vNIC template.</p>
</li>
<li>
<p>Click OK.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image33.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-lan-connectivity-policy-for-iscsi-boot">Create LAN connectivity policy for iSCSI boot</h3>
<div class="paragraph">
<p>This procedure applies to a Cisco UCS environment in which two iSCSI LIFs are on cluster node 1 (<code>iscsi_lif01a</code> and <code>iscsi_lif01b</code>) and two iSCSI LIFs are on cluster node 2 (<code>iscsi_lif02a</code> and <code>iscsi_lif02b</code>). Also, it is assumed that the A LIFs are connected to Fabric A (Cisco UCS 6324 A) and the B LIFs are connected to Fabric B (Cisco UCS 6324 B).</p>
</div>
<div class="paragraph">
<p>To configure the necessary Infrastructure LAN Connectivity Policy, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click LAN on the left.</p>
</li>
<li>
<p>Select LAN &gt; Policies &gt; root.</p>
</li>
<li>
<p>Right-click LAN Connectivity Policies.</p>
</li>
<li>
<p>Select Create LAN Connectivity Policy.</p>
</li>
<li>
<p>Enter <code>Site-XX-Fabric-A</code> as the name of the policy.</p>
</li>
<li>
<p>Click the upper Add option to add a vNIC.</p>
</li>
<li>
<p>In the Create vNIC dialog box, enter <code>Site-01-vNIC-A</code> as the name of the vNIC.</p>
</li>
<li>
<p>Select the Use vNIC Template option.</p>
</li>
<li>
<p>In the vNIC Template list, select <code>vNIC_Template_A</code>.</p>
</li>
<li>
<p>From the Adapter Policy drop-down list, select VMWare.</p>
</li>
<li>
<p>Click OK to add this vNIC to the policy.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image34.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click the upper Add option to add a vNIC.</p>
</li>
<li>
<p>In the Create vNIC dialog box, enter <code>Site-01-vNIC-B</code> as the name of the vNIC.</p>
</li>
<li>
<p>Select the Use vNIC Template option.</p>
</li>
<li>
<p>In the vNIC Template list, select <code>vNIC_Template_B</code>.</p>
</li>
<li>
<p>From the Adapter Policy drop-down list, select VMWare.</p>
</li>
<li>
<p>Click OK to add this vNIC to the policy.</p>
</li>
<li>
<p>Click the upper Add option to add a vNIC.</p>
</li>
<li>
<p>In the Create vNIC dialog box, enter <code>Site-01- iSCSI-A</code> as the name of the vNIC.</p>
</li>
<li>
<p>Select the Use vNIC Template option.</p>
</li>
<li>
<p>In the vNIC Template list, select <code>Site-01-iSCSI-A</code>.</p>
</li>
<li>
<p>From the Adapter Policy drop-down list, select VMWare.</p>
</li>
<li>
<p>Click OK to add this vNIC to the policy.</p>
</li>
<li>
<p>Click the upper Add option to add a vNIC.</p>
</li>
<li>
<p>In the Create vNIC dialog box, enter <code>Site-01-iSCSI-B</code> as the name of the vNIC.</p>
</li>
<li>
<p>Select the Use vNIC Template option.</p>
</li>
<li>
<p>In the vNIC Template list, select <code>Site-01-iSCSI-B</code>.</p>
</li>
<li>
<p>From the Adapter Policy drop-down list, select VMWare.</p>
</li>
<li>
<p>Click OK to add this vNIC to the policy.</p>
</li>
<li>
<p>Expand the Add iSCSI vNICs option.</p>
</li>
<li>
<p>Click the Lower Add option in the Add iSCSI vNICs space to add the iSCSI vNIC.</p>
</li>
<li>
<p>In the Create iSCSI vNIC dialog box, enter <code>Site-01-iSCSI-A</code> as the name of the vNIC.</p>
</li>
<li>
<p>Select the Overlay vNIC as <code>Site-01-iSCSI-A</code>.</p>
</li>
<li>
<p>Leave the iSCSI Adapter Policy option to Not Set.</p>
</li>
<li>
<p>Select the VLAN as <code>Site-01-iSCSI-Site-A</code> (native).</p>
</li>
<li>
<p>Select None (used by default) as the MAC address assignment.</p>
</li>
<li>
<p>Click OK to add the iSCSI vNIC to the policy.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image35.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click the Lower Add option in the Add iSCSI vNICs space to add the iSCSI vNIC.</p>
</li>
<li>
<p>In the Create iSCSI vNIC dialog box, enter <code>Site-01-iSCSI-B</code> as the name of the vNIC.</p>
</li>
<li>
<p>Select the Overlay vNIC as Site-01-iSCSI-B.</p>
</li>
<li>
<p>Leave the iSCSI Adapter Policy option to Not Set.</p>
</li>
<li>
<p>Select the VLAN as <code>Site-01-iSCSI-Site-B</code> (native).</p>
</li>
<li>
<p>Select None(used by default) as the MAC Address Assignment.</p>
</li>
<li>
<p>Click OK to add the iSCSI vNIC to the policy.</p>
</li>
<li>
<p>Click Save Changes.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image36.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="create-vmedia-policy-for-vmware-esxi-6-7u1-install-boot">Create vMedia policy for VMware ESXi 6.7U1 install boot</h4>
<div class="paragraph">
<p>In the NetApp Data ONTAP setup steps an HTTP web server is required, which is used for hosting NetApp Data ONTAP as well as VMware software. The vMedia Policy created here maps the VMware ESXi 6. 7U1 ISO to the Cisco UCS server in order to boot the ESXi installation. To create this policy, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, select Servers on the left.</p>
</li>
<li>
<p>Select Policies &gt; root.</p>
</li>
<li>
<p>Select vMedia Policies.</p>
</li>
<li>
<p>Click Add to create new vMedia Policy.</p>
</li>
<li>
<p>Name the policy ESXi-6.7U1-HTTP.</p>
</li>
<li>
<p>Enter Mounts ISO for ESXi 6.7U1 in the Description field.</p>
</li>
<li>
<p>Select Yes for Retry on Mount failure.</p>
</li>
<li>
<p>Click Add.</p>
</li>
<li>
<p>Name the mount ESXi-6.7U1-HTTP.</p>
</li>
<li>
<p>Select the CDD Device Type.</p>
</li>
<li>
<p>Select the HTTP Protocol.</p>
</li>
<li>
<p>Enter the IP Address of the web server.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
The DNS server IPs were not entered into the KVM IP earlier, therefore, it is necessary to enter the IP of the web server instead of the hostname.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Enter <code>VMware-VMvisor-Installer-6.7.0.update01-10302608.x86_64.iso</code> as the Remote File name.</p>
<div class="paragraph">
<p>This VMware ESXi 6.7U1 ISO can be downloaded from <a href="https://my.vmware.com/group/vmware/details?downloadGroup=ESXI650A&amp;productId=614" target="_blank" rel="noopener">VMware Downloads</a>.</p>
</div>
</li>
<li>
<p>Enter the web server path to the ISO file in the Remote Path field.</p>
</li>
<li>
<p>Click OK to create the vMedia Mount.</p>
</li>
<li>
<p>Click OK then OK again to complete creating the vMedia Policy.</p>
<div class="paragraph">
<p>For any new servers added to the Cisco UCS environment the vMedia service profile template can be used to install the ESXi host. On first boot, the host boots into the ESXi installer since the SAN mounted disk is empty. After ESXi is installed, the vMedia is not referenced as long as the boot disk is accessible.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image37.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-iscsi-boot-policy">Create iSCSI boot policy</h3>
<div class="paragraph">
<p>The procedure in this section applies to a Cisco UCS environment in which two iSCSI logical interfaces (LIFs) are on cluster node 1 (<code>iscsi_lif01a</code> and <code>iscsi_lif01b</code>) and two iSCSI LIFs are on cluster node 2 (<code>iscsi_lif02a</code> and <code>iscsi_lif02b</code>). Also, it is assumed that the A LIFs are connected to Fabric A (Cisco UCS Fabric Interconnect A) and the B LIFs are connected to Fabric B (Cisco UCS Fabric Interconnect B).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
One boot policy is configured in this procedure. The policy configures the primary target to be <code>iscsi_lif01a</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To create a boot policy for the Cisco UCS environment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click Servers on the left.</p>
</li>
<li>
<p>Select Policies &gt; root.</p>
</li>
<li>
<p>Right-click Boot Policies.</p>
</li>
<li>
<p>Select Create Boot Policy.</p>
</li>
<li>
<p>Enter <code>Site-01-Fabric-A</code> as the name of the boot policy.</p>
</li>
<li>
<p>Optional: Enter a description for the boot policy.</p>
</li>
<li>
<p>Keep the Reboot on Boot Order Change option cleared.</p>
</li>
<li>
<p>Boot Mode is Legacy.</p>
</li>
<li>
<p>Expand the Local Devices drop-down menu and select Add Remote CD/DVD.</p>
</li>
<li>
<p>Expand the iSCSI vNICs drop-down menu and select Add iSCSI Boot.</p>
</li>
<li>
<p>In the Add iSCSI Boot dialog box, enter <code>Site-01-iSCSI-A</code>. Click OK.</p>
</li>
<li>
<p>Select Add iSCSI Boot.</p>
</li>
<li>
<p>In the Add iSCSI Boot dialog box, enter <code>Site-01-iSCSI-B</code>. Click OK.</p>
</li>
<li>
<p>Click OK to create the policy.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image38.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-service-profile-template">Create service profile template</h3>
<div class="paragraph">
<p>In this procedure, one service profile template for Infrastructure ESXi hosts is created for Fabric A boot.</p>
</div>
<div class="paragraph">
<p>To create the service profile template, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Cisco UCS Manager, click Servers on the left.</p>
</li>
<li>
<p>Select Service Profile Templates &gt; root.</p>
</li>
<li>
<p>Right-click root.</p>
</li>
<li>
<p>Select Create Service Profile Template to open the Create Service Profile Template wizard.</p>
</li>
<li>
<p>Enter <code>VM-Host-Infra-iSCSI-A</code> as the name of the service profile template. This service profile template is configured to boot from storage node 1 on fabric A.</p>
</li>
<li>
<p>Select the Updating Template option.</p>
</li>
<li>
<p>Under UUID, select <code>UUID_Pool</code> as the UUID pool. Click Next.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image39.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="configure-storage-provisioning">Configure storage provisioning</h4>
<div class="paragraph">
<p>To configure storage provisioning, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you have servers with no physical disks, click Local Disk Configuration Policy and select the SAN Boot Local Storage Policy. Otherwise, select the default Local Storage Policy.</p>
</li>
<li>
<p>Click Next.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-networking-options">Configure networking options</h4>
<div class="paragraph">
<p>To configure the networking options, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Keep the default setting for Dynamic vNIC Connection Policy.</p>
</li>
<li>
<p>Select the Use Connectivity Policy option to configure the LAN connectivity.</p>
</li>
<li>
<p>Select iSCSI-Boot from the LAN Connectivity Policy drop-down menu.</p>
</li>
<li>
<p>Select <code>IQN_Pool</code> in Initiator Name Assignment. Click Next.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image40.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-san-connectivity">Configure SAN connectivity</h4>
<div class="paragraph">
<p>To configure SAN connectivity, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>For the vHBAs, select No for the How Would you Like to Configure SAN Connectivity? option.</p>
</li>
<li>
<p>Click Next.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-zoning">Configure zoning</h4>
<div class="paragraph">
<p>To configure zoning, simply click Next.</p>
</div>
</div>
<div class="sect3">
<h4 id="configure-vnichba-placement">Configure vNIC/HBA placement</h4>
<div class="paragraph">
<p>To configure vNIC/HBA placement, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the Select Placement drop-down list, leave the placement policy as Let System Perform Placement.</p>
</li>
<li>
<p>Click Next.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-vmedia-policy">Configure vMedia policy</h4>
<div class="paragraph">
<p>To configure the vMedia policy, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Do not select a vMedia Policy.</p>
</li>
<li>
<p>Click Next.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-server-boot-order">Configure server boot order</h4>
<div class="paragraph">
<p>To configure the server boot order, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select <code>Boot-Fabric-A</code> for Boot Policy.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image41.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>In the Boor order, select <code>Site-01- iSCSI-A</code>.</p>
</li>
<li>
<p>Click Set iSCSI Boot Parameters.</p>
</li>
<li>
<p>In the Set iSCSI Boot Parameters dialog box, leave the Authentication Profile option to Not Set unless you have independently created one appropriate for your environment.</p>
</li>
<li>
<p>Leave the Initiator Name Assignment dialog box Not Set to use the single Service Profile Initiator Name defined in the previous steps.</p>
</li>
<li>
<p>Set <code>iSCSI_IP_Pool_A</code> as the Initiator IP address Policy.</p>
</li>
<li>
<p>Select iSCSI Static Target Interface option.</p>
</li>
<li>
<p>Click Add.</p>
</li>
<li>
<p>Enter the iSCSI target name. To get the iSCSI target name of Infra-SVM, log in into storage cluster management interface and run the <code>iscsi show</code> command.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image42.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Enter the IP address of <code>iscsi_lif_02a</code> for the IPv4 Address field.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image43.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click OK to add the iSCSI static target.</p>
</li>
<li>
<p>Click Add.</p>
</li>
<li>
<p>Enter the iSCSI target name.</p>
</li>
<li>
<p>Enter the IP address of <code>iscsi_lif_01a</code> for the IPv4 Address field.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image44.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click OK to add the iSCSI static target.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image45.png" alt="Error: Missing Graphic Image"></span></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
The target IPs were put in with the storage node 02 IP first and the storage node 01 IP second. This is assuming the boot LUN is on node 01. The host boots by using the path to node 01 if the order in this procedure is used.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>In the Boot order, select iSCSI-B-vNIC.</p>
</li>
<li>
<p>Click Set iSCSI Boot Parameters.</p>
</li>
<li>
<p>In the Set iSCSI Boot Parameters dialog box, leave the Authentication Profile option as Not Set unless you have independently created one appropriate to your environment.</p>
</li>
<li>
<p>Leave the Initiator Name Assignment dialog box Not Set to use the single Service Profile Initiator Name defined in the previous steps.</p>
</li>
<li>
<p>Set <code>iSCSI_IP_Pool_B</code> as the initiator IP address policy.</p>
</li>
<li>
<p>Select the iSCSI Static Target Interface option.</p>
</li>
<li>
<p>Click Add.</p>
</li>
<li>
<p>Enter the iSCSI target name. To get the iSCSI target name of Infra-SVM, log in into storage cluster management interface and run the <code>iscsi show</code> command.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image42.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Enter the IP address of <code>iscsi_lif_02b</code> for the IPv4 Address field.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image46.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click OK to add the iSCSI static target.</p>
</li>
<li>
<p>Click Add.</p>
</li>
<li>
<p>Enter the iSCSI target name.</p>
</li>
<li>
<p>Enter the IP address of <code>iscsi_lif_01b</code> for the IPv4 Address field.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image47.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click OK to add the iSCSI static target.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image48.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click Next.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-maintenance-policy">Configure maintenance policy</h4>
<div class="paragraph">
<p>To configure the maintenance policy, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change the maintenance policy to default.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image49.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click Next.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-server-assignment">Configure server assignment</h4>
<div class="paragraph">
<p>To configure the server assignment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Pool Assignment list, select Infra-Pool.</p>
</li>
<li>
<p>Select Down as the power state to be applied when the profile is associated with the server.</p>
</li>
<li>
<p>Expand Firmware Management at the bottom of the page and select the default policy.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image50.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click Next.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-operational-policies">Configure operational policies</h4>
<div class="paragraph">
<p>To configure the operational policies, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the BIOS Policy drop-down list, select VM-Host.</p>
</li>
<li>
<p>Expand Power Control Policy Configuration and select No-Power-Cap from the Power Control Policy drop-down list.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image51.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click Finish to create the service profile template.</p>
</li>
<li>
<p>Click OK in the confirmation message.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-vmedia-enabled-service-profile-template">Create vMedia-enabled service profile template</h3>
<div class="paragraph">
<p>To create a service profile template with vMedia enabled, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Connect to UCS Manager and click Servers on the left.</p>
</li>
<li>
<p>Select Service Profile Templates &gt; root &gt; Service Template VM-Host-Infra-iSCSI-A.</p>
</li>
<li>
<p>Right-click VM-Host-Infra-iSCSI-A and select Create a Clone.</p>
</li>
<li>
<p>Name the clone <code>VM-Host-Infra-iSCSI-A-vM</code>.</p>
</li>
<li>
<p>Select the newly created VM-Host-Infra-iSCSI-A-vM and select the vMedia Policy tab on the right.</p>
</li>
<li>
<p>Click Modify vMedia Policy.</p>
</li>
<li>
<p>Select the ESXi-6. 7U1-HTTP vMedia Policy and click OK.</p>
</li>
<li>
<p>Click OK to confirm.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-service-profiles">Create service profiles</h3>
<div class="paragraph">
<p>To create service profiles from the service profile template, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Connect to Cisco UCS Manager and click Servers on the left.</p>
</li>
<li>
<p>Expand Servers &gt; Service Profile Templates &gt; root &gt; Service Template &lt;name&gt;.</p>
</li>
<li>
<p>In Actions, click Create Service Profile from Template and compete the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Enter <code>Site- 01-Infra-0</code> as the naming prefix.</p>
</li>
<li>
<p>Enter <code>2</code> as the number of instances to create.</p>
</li>
<li>
<p>Select root as the org.</p>
</li>
<li>
<p>Click OK to create the service profiles.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image52.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Click OK in the confirmation message.</p>
</li>
<li>
<p>Verify that the service profiles <code>Site-01-Infra-01</code> and <code>Site-01-Infra-02</code> have been created.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
The service profiles are automatically associated with the servers in their assigned server pools.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="storage-configuration-part-2-boot-luns-and-initiator-groups">Storage configuration part 2: boot LUNs and initiator groups</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ontap-boot-storage-setup">ONTAP boot storage setup</h3>
<div class="sect3">
<h4 id="create-initiator-groups">Create initiator groups</h4>
<div class="paragraph">
<p>To create initiator groups (igroups), complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the following commands from the cluster management node SSH connection:</p>
<div class="literalblock">
<div class="content">
<pre>igroup create –vserver Infra-SVM –igroup VM-Host-Infra-01 –protocol iscsi –ostype vmware –initiator &lt;vm-host-infra-01-iqn&gt;
igroup create –vserver Infra-SVM –igroup VM-Host-Infra-02 –protocol iscsi –ostype vmware –initiator &lt;vm-host-infra-02-iqn&gt;
igroup create –vserver Infra-SVM –igroup MGMT-Hosts –protocol iscsi –ostype vmware –initiator &lt;vm-host-infra-01-iqn&gt;, &lt;vm-host-infra-02-iqn&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
Use the values listed in Table 1 and Table 2 for the IQN information.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>To view the three igroups just created, run the <code>igroup show</code> command.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="map-boot-luns-to-igroups">Map boot LUNs to igroups</h4>
<div class="paragraph">
<p>To map boot LUNs to igroups, complete the following step:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the storage cluster management SSH connection, run the following commands: </p>
<div class="literalblock">
<div class="content">
<pre>lun map –vserver Infra-SVM –volume esxi_boot –lun VM-Host-Infra- A –igroup VM-Host-Infra-01 –lun-id 0lun map –vserver Infra-SVM –volume esxi_boot –lun VM-Host-Infra- B –igroup VM-Host-Infra-02 –lun-id 0</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="vmware-vsphere-6-7u1-deployment-procedure">VMware vSphere 6.7U1 deployment procedure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides detailed procedures for installing VMware ESXi 6.7U1 in a FlexPod Express configuration. After the procedures are completed, two booted ESXi hosts are provisioned.</p>
</div>
<div class="paragraph">
<p>Several methods exist for installing ESXi in a VMware environment. These procedures focus on how to use the built-in KVM console and virtual media features in Cisco UCS Manager to map remote installation media to individual servers and connect to their boot LUNs.</p>
</div>
<div class="sect2">
<h3 id="download-cisco-custom-image-for-esxi-6-7u1">Download Cisco custom image for ESXi 6.7U1</h3>
<div class="paragraph">
<p>If the VMware ESXi custom image has not been downloaded, complete the following steps to complete the download:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the following link: <a href="https://my.vmware.com/group/vmware/details?downloadGroup=OEM-ESXI67U1-CISCO&amp;productId=742" target="_blank" rel="noopener">VMware vSphere Hypervisor (ESXi) 6.7U1.</a></p>
</li>
<li>
<p>You need a user ID and password on <a href="https://www.vmware.com/" target="_blank" rel="noopener">vmware.com</a> to download this software.</p>
</li>
<li>
<p>Download the .<code>iso</code> file.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="cisco-ucs-manager">Cisco UCS Manager</h4>
<div class="paragraph">
<p>The Cisco UCS IP KVM enables the administrator to begin the installation of the OS through remote media. It is necessary to log in to the Cisco UCS environment to run the IP KVM.</p>
</div>
<div class="paragraph">
<p>To log in to the Cisco UCS environment, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a web browser and enter the IP address for the Cisco UCS cluster address. This step launches the Cisco UCS Manager application.</p>
</li>
<li>
<p>Click the Launch UCS Manager link under HTML to launch the HTML 5 UCS Manager GUI.</p>
</li>
<li>
<p>If prompted to accept security certificates, accept as necessary.</p>
</li>
<li>
<p>When prompted, enter <code>admin</code> as the user name and enter the administrative password.</p>
</li>
<li>
<p>To log in to Cisco UCS Manager, click Login.</p>
</li>
<li>
<p>From the main menu, click Servers on the left.</p>
</li>
<li>
<p>Select Servers &gt; Service Profiles &gt; root &gt; <code>VM-Host-Infra-01</code>.</p>
</li>
<li>
<p>Right-click <code>VM-Host-Infra-01</code> and select KVM Console.</p>
</li>
<li>
<p>Follow the prompts to launch the Java-based KVM console.</p>
</li>
<li>
<p>Select Servers &gt; Service Profiles &gt; root &gt; <code>VM-Host-Infra-02</code>.</p>
</li>
<li>
<p>Right-click <code>VM-Host-Infra-02</code>. and select KVM Console.</p>
</li>
<li>
<p>Follow the prompts to launch the Java-based KVM console.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="set-up-vmware-esxi-installation">Set up VMware ESXi installation</h4>
<div class="paragraph">
<p>ESXi Hosts VM-Host-Infra-01 and VM-Host- Infra-02</p>
</div>
<div class="paragraph">
<p>To prepare the server for the OS installation, complete the following steps on each ESXi host:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the KVM window, click Virtual Media.</p>
</li>
<li>
<p>Click Activate Virtual Devices.</p>
</li>
<li>
<p>If prompted to accept an Unencrypted KVM session, accept as necessary.</p>
</li>
<li>
<p>Click Virtual Media and select Map CD/DVD.</p>
</li>
<li>
<p>Browse to the ESXi installer ISO image file and click Open.</p>
</li>
<li>
<p>Click Map Device. </p>
</li>
<li>
<p>Click the KVM tab to monitor the server boot.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Install ESXi</strong></p>
</div>
<div class="paragraph">
<p>ESXi Hosts VM-Host-Infra-01 and VM-Host-Infra-02</p>
</div>
<div class="paragraph">
<p>To install VMware ESXi to the iSCSI-bootable LUN of the hosts, complete the following steps on each host:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Boot the server by selecting Boot Server and clicking OK. Then click OK again.</p>
</li>
<li>
<p>On reboot, the machine detects the presence of the ESXi installation media. Select the ESXi installer from the boot menu that is displayed.</p>
</li>
<li>
<p>After the installer is finished loading, press Enter to continue with the installation.</p>
</li>
<li>
<p>Read and accept the end-user license agreement (EULA). Press F11 to accept and continue.</p>
</li>
<li>
<p>Select the LUN that was previously set up as the installation disk for ESXi and press Enter to continue with the installation.</p>
</li>
<li>
<p>Select the appropriate keyboard layout and press Enter.</p>
</li>
<li>
<p>Enter and confirm the root password and press Enter.</p>
</li>
<li>
<p>The installer issues a warning that the selected disk will be repartitioned. Press F11 to continue with the installation.</p>
</li>
<li>
<p>After the installation is complete, select the Virtual Media tab and clear the P mark next to the ESXi installation media. Click Yes.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
The ESXi installation image must be unmapped to make sure that the server reboots into ESXi and not into the installer.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>After the installation is complete, press Enter to reboot the server.</p>
</li>
<li>
<p>In Cisco UCS Manager, bind the current service profile to the non-vMedia service profile template to prevent mounting the ESXi installation iso over HTTP.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="set-up-management-networking-for-esxi-hosts">Set up management networking for ESXi hosts</h4>
<div class="paragraph">
<p>Adding a management network for each VMware host is necessary for managing the host. To add a management network for the VMware hosts, complete the following steps on each ESXi host:</p>
</div>
<div class="paragraph">
<p>ESXi Host VM-Host-Infra-01 and VM-Host-Infra-02</p>
</div>
<div class="paragraph">
<p>To configure each ESXi host with access to the management network, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>After the server has finished rebooting, press F2 to customize the system.</p>
</li>
<li>
<p>Log in as <code>root</code>, enter the corresponding password, and press Enter to log in.</p>
</li>
<li>
<p>Select Troubleshooting Options and press Enter.</p>
</li>
<li>
<p>Select Enable ESXi Shell and press Enter.</p>
</li>
<li>
<p>Select Enable SSH and press Enter.</p>
</li>
<li>
<p>Press Esc to exit the Troubleshooting Options menu.</p>
</li>
<li>
<p>Select the Configure Management Network option and press Enter.</p>
</li>
<li>
<p>Select Network Adapters and press Enter.</p>
</li>
<li>
<p>Verify that the numbers in the Hardware Label field match the numbers in the Device Name field.</p>
</li>
<li>
<p>Press Enter.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image53.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Select the VLAN (Optional) option and press Enter.</p>
</li>
<li>
<p>Enter the <code>&lt;ib-mgmt-vlan-id&gt;</code> and press Enter.</p>
</li>
<li>
<p>Select IPv4 Configuration and press Enter.</p>
</li>
<li>
<p>Select the Set Static IPv4 Address and Network Configuration option by using the space bar.</p>
</li>
<li>
<p>Enter the IP address for managing the first ESXi host.</p>
</li>
<li>
<p>Enter the subnet mask for the first ESXi host.</p>
</li>
<li>
<p>Enter the default gateway for the first ESXi host.</p>
</li>
<li>
<p>Press Enter to accept the changes to the IP configuration.</p>
</li>
<li>
<p>Select the DNS Configuration option and press Enter.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
Because the IP address is assigned manually, the DNS information must also be entered manually.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Enter the IP address of the primary DNS server.</p>
</li>
<li>
<p>Optional: Enter the IP address of the secondary DNS server.</p>
</li>
<li>
<p>Enter the FQDN for the first ESXi host.</p>
</li>
<li>
<p>Press Enter to accept the changes to the DNS configuration.</p>
</li>
<li>
<p>Press Esc to exit the Configure Management Network menu.</p>
</li>
<li>
<p>Select Test Management Network to verify that the management network is set up correctly and press Enter.</p>
</li>
<li>
<p>Press Enter to run the test, press Enter again once the test has completed, review environment if there is a failure.</p>
</li>
<li>
<p>Select the Configure Management Network again and press Enter.</p>
</li>
<li>
<p>Select the IPv6 Configuration option and press Enter.</p>
</li>
<li>
<p>Using the spacebar, select Disable IPv6 (restart required) and press Enter.</p>
</li>
<li>
<p>Press Esc to exit the Configure Management Network submenu.</p>
</li>
<li>
<p>Press Y to confirm the changes and reboot the ESXi host.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="reset-vmware-esxi-host-vmkernel-port-vmk0-mac-address-optional">Reset VMware ESXi host VMkernel port vmk0 MAC address (optional)</h4>
<div class="paragraph">
<p>ESXi Host VM-Host-Infra-01 and VM-Host-Infra-02</p>
</div>
<div class="paragraph">
<p>By default, the MAC address of the management VMkernel port vmk0 is the same as the MAC address of the Ethernet port on which it is placed. If the ESXi host’s boot LUN is remapped to a different server with different MAC addresses, a MAC address conflict will occur because vmk0 retains the assigned MAC address unless the ESXi system configuration is reset. To reset the MAC address of vmk0 to a random VMware-assigned MAC address, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the ESXi console menu main screen, press Ctrl-Alt-F1 to access the VMware console command line interface. In the UCSM KVM, Ctrl-Alt-F1 appears in the list of static macros.</p>
</li>
<li>
<p>Log in as root.</p>
</li>
<li>
<p>Type <code>esxcfg-vmknic –l</code> to get a detailed listing of interface vmk0. vmk0 should be a part of the Management Network port group. Note the IP address and netmask of vmk0.</p>
</li>
<li>
<p>To remove vmk0, enter the following command:</p>
<div class="literalblock">
<div class="content">
<pre>esxcfg-vmknic –d “Management Network”</pre>
</div>
</div>
</li>
<li>
<p>To add vmk0 again with a random MAC address, enter the following command:</p>
<div class="literalblock">
<div class="content">
<pre>esxcfg-vmknic –a –i &lt;vmk0-ip&gt; -n &lt;vmk0-netmask&gt; “Management Network””.</pre>
</div>
</div>
</li>
<li>
<p>Verify that vmk0 has been added again with a random MAC address</p>
<div class="literalblock">
<div class="content">
<pre>esxcfg-vmknic –l</pre>
</div>
</div>
</li>
<li>
<p>Type <code>exit</code> to log out of the command line interface.</p>
</li>
<li>
<p>Press Ctrl-Alt-F2 to return to the ESXi console menu interface.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="log-into-vmware-esxi-hosts-with-vmware-host-client">Log into VMware ESXi hosts with VMware host client</h4>
<div class="paragraph">
<p>ESXi Host VM-Host-Infra-01</p>
</div>
<div class="paragraph">
<p>To log in to the VM-Host-Infra-01 ESXi host by using the VMware Host Client, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a web browser on the management workstation and navigate to the <code>VM-Host-Infra-01</code> management IP address.</p>
</li>
<li>
<p>Click Open the VMware Host Client.</p>
</li>
<li>
<p>Enter <code>root</code> for the user name.</p>
</li>
<li>
<p>Enter the root password.</p>
</li>
<li>
<p>Click Login to connect.</p>
</li>
<li>
<p>Repeat this process to log in to <code>VM-Host-Infra-02</code> in a separate browser tab or window.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="install-vmware-drivers-for-the-cisco-virtual-interface-card-vic">Install VMware drivers for the Cisco Virtual Interface Card (VIC)</h4>
<div class="paragraph">
<p>Download and extract the offline bundle for the following VMware VIC driver to the Management workstation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>nenic Driver version 1.0.25.0</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="esxi-hosts-vm-host-infra-01-and-vm-host-infra-02">ESXi hosts VM-Host-Infra-01 and VM-Host-Infra-02</h4>
<div class="paragraph">
<p>To install VMware VIC Drivers on the ESXi host VM-Host-Infra-01 and VM-Host-Infra-02, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From each Host Client, select Storage.</p>
</li>
<li>
<p>Right-click datastore1 and select Browse.</p>
</li>
<li>
<p>In the Datastore browser, click Upload.</p>
</li>
<li>
<p>Navigate to the saved location for the downloaded VIC drivers and select VMW-ESX-6.7.0-nenic-1.0.25.0-offline_bundle-11271332.zip.</p>
</li>
<li>
<p>In the Datastore browser, click Upload.</p>
</li>
<li>
<p>Click Open to upload the file to datastore1.</p>
</li>
<li>
<p>Make sure the file has been uploaded to both ESXi hosts.</p>
</li>
<li>
<p>Place each host into Maintenance mode if it isn’t already.</p>
</li>
<li>
<p>Connect to each ESXi host through ssh from a shell connection or putty terminal.</p>
</li>
<li>
<p>Log in as root with the root password.</p>
</li>
<li>
<p>Run the following commands on each host:</p>
<div class="literalblock">
<div class="content">
<pre>esxcli software vib update -d /vmfs/volumes/datastore1/VMW-ESX-6.7.0-nenic-1.0.25.0-offline_bundle-11271332.zip
reboot</pre>
</div>
</div>
</li>
<li>
<p>Log into the Host Client on each host once reboot is complete and exit Maintenance Mode.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="set-up-vmkernel-ports-and-virtual-switch">Set up VMkernel ports and virtual switch</h4>
<div class="paragraph">
<p>ESXi Host VM-Host-Infra-01 and VM-Host-Infra-02</p>
</div>
<div class="paragraph">
<p>To set up the VMkernel ports and the virtual switches on the ESXi hosts, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the Host Client, select Networking on the left.</p>
</li>
<li>
<p>In the center pane, select the Virtual switches tab.</p>
</li>
<li>
<p>Select vSwitch0.</p>
</li>
<li>
<p>Select Edit settings.</p>
</li>
<li>
<p>Change the MTU to 9000.</p>
</li>
<li>
<p>Expand NIC teaming.</p>
</li>
<li>
<p>In the Failover order section, select vmnic1 and click Mark active.</p>
</li>
<li>
<p>Verify that vmnic1 now has a status of Active.</p>
</li>
<li>
<p>Click Save.</p>
</li>
<li>
<p>Select Networking on the left.</p>
</li>
<li>
<p>In the center pane, select the Virtual switches tab.</p>
</li>
<li>
<p>Select iScsiBootvSwitch.</p>
</li>
<li>
<p>Select Edit settings.</p>
</li>
<li>
<p>Change the MTU to 9000</p>
</li>
<li>
<p>Click Save.</p>
</li>
<li>
<p>Select the VMkernel NICs tab.</p>
</li>
<li>
<p>Select vmk1 iScsiBootPG.</p>
</li>
<li>
<p>Select Edit settings.</p>
</li>
<li>
<p>Change the MTU to 9000.</p>
</li>
<li>
<p>Expand IPv4 settings and change the IP address to an address outside of the UCS iSCSI-IP-Pool-A.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
To avoid IP address conflicts if the Cisco UCS iSCSI IP Pool addresses should get reassigned, it is recommended to use different IP addresses in the same subnet for the iSCSI VMkernel ports.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click Save.</p>
</li>
<li>
<p>Select the Virtual switches tab.</p>
</li>
<li>
<p>Select the Add standard virtual switch.</p>
</li>
<li>
<p>Provide a name of <code>iScsciBootvSwitch-B</code> for the vSwitch Name.</p>
</li>
<li>
<p>Set the MTU to 9000.</p>
</li>
<li>
<p>Select vmnic3 from the Uplink 1 drop-down menu.</p>
</li>
<li>
<p>Click Add.</p>
</li>
<li>
<p>In the center pane, select the VMkernel NICs tab.</p>
</li>
<li>
<p>Select Add VMkernel NIC</p>
</li>
<li>
<p>Specify a New port group name of iScsiBootPG-B.</p>
</li>
<li>
<p>Select iScsciBootvSwitch-B for Virtual switch.</p>
</li>
<li>
<p>Set the MTU to 9000. Do not enter a VLAN ID.</p>
</li>
<li>
<p>Select Static for the IPv4 settings and expand the option to provide the Address and Subnet Mask within the Configuration.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
To avoid IP address conflicts, if the Cisco UCS iSCSI IP Pool addresses should get reassigned, it is recommended to use different IP addresses in the same subnet for the iSCSI VMkernel ports.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click Create.</p>
</li>
<li>
<p>On the left, select Networking, then select the Port groups tab.</p>
</li>
<li>
<p>In the center pane, right-click VM Network and select Remove.</p>
</li>
<li>
<p>Click Remove to complete removing the port group.</p>
</li>
<li>
<p>In the center pane, select Add port group.</p>
</li>
<li>
<p>Name the port group Management Network and enter <code>&lt;ib-mgmt-vlan-id&gt;</code> in the VLAN ID field, and make sure Virtual switch vSwitch0 is selected.</p>
</li>
<li>
<p>Click Add to finalize the edits for the IB-MGMT Network.</p>
</li>
<li>
<p>At the top, select the VMkernel NICs tab.</p>
</li>
<li>
<p>Click Add VMkernel NIC.</p>
</li>
<li>
<p>For New port group, enter VMotion.</p>
</li>
<li>
<p>For Virtual switch, select vSwitch0 selected.</p>
</li>
<li>
<p>Enter <code>&lt;vmotion-vlan-id&gt;</code> for the VLAN ID.</p>
</li>
<li>
<p>Change the MTU to 9000.</p>
</li>
<li>
<p>Select Static IPv4 settings and expand IPv4 settings.</p>
</li>
<li>
<p>Enter the ESXi host vMotion IP address and netmask.</p>
</li>
<li>
<p>Select the vMotion stack TCP/IP stack.</p>
</li>
<li>
<p>Select vMotion under Services.</p>
</li>
<li>
<p>Click Create.</p>
</li>
<li>
<p>Click Add VMkernel NIC.</p>
</li>
<li>
<p>For New port group, enter NFS_Share.</p>
</li>
<li>
<p>For Virtual switch, select vSwitch0 selected.</p>
</li>
<li>
<p>Enter <code>&lt;infra-nfs-vlan-id&gt;</code> for the VLAN ID</p>
</li>
<li>
<p>Change the MTU to 9000.</p>
</li>
<li>
<p>Select Static IPv4 settings and expand IPv4 settings.</p>
</li>
<li>
<p>Enter the ESXi host Infrastructure NFS IP address and netmask.</p>
</li>
<li>
<p>Do not select any of the Services.</p>
</li>
<li>
<p>Click Create.</p>
</li>
<li>
<p>Select the Virtual Switches tab, then select vSwitch0. The properties for vSwitch0 VMkernel NICs should be similar to the following example:</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image54.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Select the VMkernel NICs tab to confirm the configured virtual adapters. The adapters listed should be similar to the following example:</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image55.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="setup-iscsi-multipathing">Setup iSCSI multipathing</h4>
<div class="paragraph">
<p>ESXi Hosts VM-Host-Infra-01 and VM-Host-Infra-02</p>
</div>
<div class="paragraph">
<p>To set up the iSCSI multipathing on the ESXi host VM-Host-Infra-01 and VM-Host-Infra-02, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From each Host Client, select Storage on the left.</p>
</li>
<li>
<p>In the center pane, click Adapters.</p>
</li>
<li>
<p>Select the iSCSI software adapter and click Configure iSCSI.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image56.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Under Dynamic targets, click Add dynamic target.</p>
</li>
<li>
<p>Enter the IP Address of <code>iSCSI_lif01a</code>.</p>
</li>
<li>
<p>Repeat entering these IP addresses: <code>iscsi_lif01b</code>, <code>iscsi_lif02a</code>, and <code>iscsi_lif02b</code>.</p>
</li>
<li>
<p>Click Save Configuration.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image57.png" alt="Error: Missing Graphic Image"></span></p>
</div>
<div class="paragraph">
<p>To obtain all of the <code>iscsi_lif</code> IP addresses, log in to NetApp storage cluster management interface and run the <code>network interface show</code> command.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
The host automatically rescans the storage adapter and the targets are added to static targets.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="mount-required-datastores">Mount required datastores</h4>
<div class="paragraph">
<p>ESXi Hosts VM-Host-Infra-01 and VM-Host-Infra-02</p>
</div>
<div class="paragraph">
<p>To mount the required datastores, complete the following steps on each ESXi host:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the Host Client, select Storage on the left.</p>
</li>
<li>
<p>In the center pane, select Datastores.</p>
</li>
<li>
<p>In the center pane, select New Datastore to add a new datastore.</p>
</li>
<li>
<p>In the New datastore dialog box, select Mount NFS datastore and click Next.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image58.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>On the provide NFS Mount Details page, complete these steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Enter <code>infra_datastore_1</code> for the datastore name.</p>
</li>
<li>
<p>Enter the IP address for the <code>nfs_lif01_a</code> LIF for the NFS server.</p>
</li>
<li>
<p>Enter <code>/infra_datastore_1</code> for the NFS share.</p>
</li>
<li>
<p>Leave the NFS version set at NFS 3.</p>
</li>
<li>
<p>Click Next.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image59.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Click Finish. The datastore should now appear in the datastore list.</p>
</li>
<li>
<p>In the center pane, select New Datastore to add a new datastore.</p>
</li>
<li>
<p>In the New Datastore dialog box, select Mount NFS Datastore and click Next.</p>
</li>
<li>
<p>On the provide NFS Mount Details page, complete these steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Enter <code>infra_datastore_2</code> for the datastore name.</p>
</li>
<li>
<p>Enter the IP address for the <code>nfs_lif02_a</code> LIF for the NFS server.</p>
</li>
<li>
<p>Enter <code>/infra_datastore_2</code> for the NFS share.</p>
</li>
<li>
<p>Leave the NFS version set at NFS 3.</p>
</li>
<li>
<p>Click Next.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click Finish. The datastore should now appear in the datastore list.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image60.jpeg" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Mount both datastores on both ESXi hosts.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-ntp-on-esxi-hosts">Configure NTP on ESXi hosts</h4>
<div class="paragraph">
<p>ESXi Hosts VM-Host-Infra-01 and VM-Host-Infra-02</p>
</div>
<div class="paragraph">
<p>To configure NTP on the ESXi hosts, complete the following steps on each host:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the Host Client, select Manage on the left.</p>
</li>
<li>
<p>In the center pane, select the Time &amp; Date tab.</p>
</li>
<li>
<p>Click Edit Settings.</p>
</li>
<li>
<p>Make sure Use Network Time Protocol (enable NTP client) is selected.</p>
</li>
<li>
<p>Use the drop-down menu to select Start and Stop with Host.</p>
</li>
<li>
<p>Enter the two Nexus switch NTP addresses in the NTP servers box separated by a comma.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image61.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click Save to save the configuration changes.</p>
</li>
<li>
<p>Select Actions &gt; NTP service &gt; Start.</p>
</li>
<li>
<p>Verify that NTP service is now running and the clock is now set to approximately the correct time</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
The NTP server time might vary slightly from the host time.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-esxi-host-swap">Configure ESXi host swap</h4>
<div class="paragraph">
<p>ESXi Hosts VM-Host-Infra-01 and VM-Host-Infra-02</p>
</div>
<div class="paragraph">
<p>To configure host swap on the ESXi hosts, follow these steps on each host:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click Manage in the left navigation pane. Select System in the right pane and click Swap.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image62.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click Edit Settings. Select <code>infra_swap</code> from the Datastore options.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image63.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Click Save.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="install-the-netapp-nfs-plug-in-1-1-2-for-vmware-vaai">Install the NetApp NFS Plug-in 1.1.2 for VMware VAAI</h4>
<div class="paragraph">
<p>To install the NetApp NFS Plug-in 1. 1.2 for VMware VAAI, complete the following steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the NetApp NFS Plug-in for VMware VAAI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Go to the <a href="https://mysupport.netapp.com/NOW/download/software/nfs_plugin_vaai_esxi6/1.1.2/" target="_blank" rel="noopener">NetApp software download page</a>.</p>
</li>
<li>
<p>Scroll down and click NetApp NFS Plug-in for VMware VAAI.</p>
</li>
<li>
<p>Select the ESXi platform.</p>
</li>
<li>
<p>Download either the offline bundle (.zip) or online bundle (.vib) of the most recent plug-in.</p>
</li>
</ol>
</div>
</li>
<li>
<p>The NetApp NFS plug-in for VMware VAAI is pending IMT qualification with ONTAP 9.5 and interoperability details will be posted to the NetApp IMT soon.</p>
</li>
<li>
<p>Install the plug-in on the ESXi host by using the ESX CLI.</p>
</li>
<li>
<p>Reboot the ESXI host.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-vmware-vcenter-server-6-7">Install VMware vCenter Server 6.7</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides detailed procedures for installing VMware vCenter Server 6.7 in a FlexPod Express configuration.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
FlexPod Express uses the VMware vCenter Server Appliance (VCSA).
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="install-vmware-vcenter-server-appliance">Install VMware vCenter server appliance</h3>
<div class="paragraph">
<p>To install VCSA, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the VCSA. Access the download link by clicking the Get vCenter Server icon when managing the ESXi host.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image64.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Download the VCSA from the VMware site.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
Although the Microsoft Windows vCenter Server installable is supported, VMware recommends the VCSA for new deployments.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Mount the ISO image.</p>
</li>
<li>
<p>Navigate to the <code>vcsa-ui-installer</code> &gt; <code>win32</code> directory. Double-click <code>installer.exe</code>.</p>
</li>
<li>
<p>Click Install.</p>
</li>
<li>
<p>Click Next on the Introduction page.</p>
</li>
<li>
<p>Accept the EULA.</p>
</li>
<li>
<p>Select Embedded Platform Services Controller as the deployment type.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image65.png" alt="Error: Missing Graphic Image"></span></p>
</div>
<div class="paragraph">
<p>If required, the External Platform Services Controller deployment is also supported as part of the FlexPod Express solution.</p>
</div>
</li>
<li>
<p>On the Appliance Deployment Target page, enter the IP address of an ESXi host you have deployed, the root user name, and the root password. Click Next.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image66.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Set the appliance VM by entering VCSA as the VM name and the root password you would like to use for the VCSA. Click Next.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image67.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Select the deployment size that best fits your environment. Click Next.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image68.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Select the <code>infra_datastore_1</code> datastore. Click Next.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image69.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>Enter the following information on the Configure Network Settings page and click Next.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select MGMT-Network as your network.</p>
</li>
<li>
<p>Enter the FQDN or IP to be used for the VCSA.</p>
</li>
<li>
<p>Enter the IP address to be used.</p>
</li>
<li>
<p>Enter the subnet mask to be used.</p>
</li>
<li>
<p>Enter the default gateway.</p>
</li>
<li>
<p>Enter the DNS server.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image70.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>On the Ready to Complete Stage 1 page, verify that the settings you have entered are correct. Click Finish.</p>
<div class="paragraph">
<p>The VCSA installs now. This process takes several minutes.</p>
</div>
</li>
<li>
<p>After stage 1 completes, a message appears stating that it has completed. Click Continue to begin stage 2 configuration.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image71.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>On the Stage 2 Introduction page, click Next.</p>
</li>
<li>
<p>Enter <code>&lt;&lt;var_ntp_id&gt;&gt;</code> for the NTP server address. You can enter multiple NTP IP addresses.</p>
<div class="paragraph">
<p>If you plan to use vCenter Server high availability, make sure that SSH access is enabled.</p>
</div>
</li>
<li>
<p>Configure the SSO domain name, password, and site name. Click Next.</p>
<div class="paragraph">
<p>Record these values for your reference, especially if you deviate from the <code>vsphere.local</code> domain name.</p>
</div>
</li>
<li>
<p>Join the VMware Customer Experience Program if desired. Click Next.</p>
</li>
<li>
<p>View the summary of your settings. Click Finish or use the back button to edit settings.</p>
</li>
<li>
<p>A message appears stating that you are not able to pause or stop the installation from completing after it has started. Click OK to continue.</p>
<div class="paragraph">
<p>The appliance setup continues. This takes several minutes.</p>
</div>
<div class="paragraph">
<p>A message appears indicating that the setup was successful.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
The links that the installer provides to access vCenter Server are clickable.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="configure-vmware-vcenter-server-6-7-and-vsphere-clustering">Configure VMware vCenter Server 6.7 and vSphere clustering</h4>
<div class="paragraph">
<p>To configure VMware vCenter Server 6.7 and vSphere clustering, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to https://&lt;&lt;FQDN or IP of vCenter&gt;&gt;/vsphere-client/.</p>
</li>
<li>
<p>Click Launch vSphere Client.</p>
</li>
<li>
<p>Log in with the user name <a href="mailto:administrator@vsphere.local">administrator@vsphere.local</a> and the SSO password you entered during the VCSA setup process.</p>
</li>
<li>
<p>Right-click the vCenter name and select New Datacenter.</p>
</li>
<li>
<p>Enter a name for the data center and click OK.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Create vSphere Cluster.</strong></p>
</div>
<div class="paragraph">
<p>To create a vSphere cluster, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click the newly created data center and select New Cluster.</p>
</li>
<li>
<p>Enter a name for the cluster.</p>
</li>
<li>
<p>Select and enable DRS and vSphere HA options.</p>
</li>
<li>
<p>Click OK.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image72.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Add ESXi Hosts to Cluster</strong></p>
</div>
<div class="paragraph">
<p>To add ESXi hosts to the cluster, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select Add Host in the Actions menu of the cluster.</p>
<div class="paragraph">
<p><span class="image"><img src="./../media/express-direct-attach-aff220-deploy_image73.png" alt="Error: Missing Graphic Image"></span></p>
</div>
</li>
<li>
<p>To add an ESXi host to the cluster, complete the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Enter the IP or FQDN of the host. Click Next.</p>
</li>
<li>
<p>Enter the root user name and password. Click Next.</p>
</li>
<li>
<p>Click Yes to replace the host’s certificate with a certificate signed by the VMware certificate server.</p>
</li>
<li>
<p>Click Next on the Host Summary page.</p>
</li>
<li>
<p>Click the green + icon to add a license to the vSphere host.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
This step can be completed later if desired.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click Next to leave lockdown mode disabled.</p>
</li>
<li>
<p>Click Next at the VM location page.</p>
</li>
<li>
<p>Review the Ready to Complete page. Use the back button to make any changes or select Finish.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Repeat steps 1 and 2 for Cisco UCS host B.</p>
<div class="paragraph">
<p>This process must be completed for any additional hosts added to the FlexPod Express configuration.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-coredump-on-esxi-hosts">Configure coredump on ESXi hosts</h4>
<div class="paragraph">
<p>ESXi Dump Collector Setup for iSCSI-Booted Hosts</p>
</div>
<div class="paragraph">
<p>ESXi hosts booted with iSCSI using the VMware iSCSI software initiator need to be configured to do core dumps to the ESXi Dump Collector that is part of vCenter. The Dump Collector is not enabled by default on the vCenter Appliance. This procedure should be run at the end of the vCenter deployment section. To setup the ESXi Dump Collector, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to the vSphere Web Client as <a href="mailto:administrator@vsphere.local" target="_blank" rel="noopener">administrator@vsphere.local</a> and select Home.</p>
</li>
<li>
<p>In the center pane, click System Configuration.</p>
</li>
<li>
<p>In the left pane, select Services.</p>
</li>
<li>
<p>Under Services, click VMware vSphere ESXi Dump Collector.</p>
</li>
<li>
<p>In the center pane, click the green start icon to start the service.</p>
</li>
<li>
<p>In the Actions menu, click Edit Startup Type.</p>
</li>
<li>
<p>Select Automatic.</p>
</li>
<li>
<p>Click OK.</p>
</li>
<li>
<p>Connect to each ESXi host using ssh as root.</p>
</li>
<li>
<p>Run the following commands:</p>
<div class="literalblock">
<div class="content">
<pre>esxcli system coredump network set –v vmk0 –j &lt;vcenter-ip&gt;
esxcli system coredump network set –e true
esxcli system coredump network check</pre>
</div>
</div>
<div class="paragraph">
<p>The message <code>Verified the configured netdump server is running</code> appears after you run the final command.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/flexpod/images/note.svg" alt="Note">
</td>
<td class="content">
This process must be completed for any additional hosts added to FlexPod Express.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>

    </article>
    <!-- Page Container -->
  </div>

  
  <!-- Start Page Toolbar -->
  <div class="page-nav-toolbar">
    <div class="page-nav-contribute"  >
      <div class="page-nav-contribute-title">CONTRIBUTE</div>
      <a target="_blank" href="https://github.com/NetAppDocs/flexpod/blob/main/express/express-direct-attach-aff220-deploy_deployment_procedures.adoc" class="btn btn-default githubEditButton" role="button"><img src="/us-en/flexpod/images/github.png" class="github-icon" />Edit on GitHub</a>
      <a target="_blank" href="https://github.com/NetAppDocs/flexpod/issues/new?body=Page%3A%20[Deployment Procedures](https://docs.netapp.com/us-en/flexpod/express/express-direct-attach-aff220-deploy_deployment_procedures.html)" class="btn btn-default githubEditButton" role="button"><img src="/us-en/flexpod/images/github.png" class="github-icon" />Request doc changes</a>
      <a target="_blank" href="https://docs.netapp.com/us-en/contribute/" class="page-nav-contribute-link"  >Contributor's Guide</a>
    </div>
    <div class="page-nav-container">
      <nav class="page-nav-fixed">
        <div class="page-nav-title">ON THIS PAGE</div>
        <div class="page-nav-links">
          <ul class="page-nav-inner" id="page-menu"></ul>
        </div>
      </nav>
    </div>
  </div>
  
  <div style="clear: both"></div><!-- Main needs to have height -->
</div>

        </main>

        <footer class="n-footer">
  <div class="n-footer__bottom">
    <div class="n-container">
      <div class="n-footer__bottom-left">

        <div class="n-footer__copyright">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
            <a href="https://www.netapp.com/us/legal/copyright.aspx">© 2021 NetApp, Inc.</a>
            </li>

</ul>
</div>
<div class="n-footer__social-links">
<ul class="n-footer__social-link-list">
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-blog" href="https://blog.netapp.com" target="_blank" title="blog" alt="blog">
<span class="n-footer__social-link-text">blog</span>
<svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
  <title>blog@</title>
  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/flexpod/common/svg/sprite.svg#blog"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-community" href="https://community.netapp.com/" target="_blank" title="community" alt="community">
<span class="n-footer__social-link-text">community</span>
<svg class="n-icon-community n-footer__social-link-icon" aria-labelledby="title">
<title>community@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/flexpod/common/svg/sprite.svg#comments"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netapp" target="_blank" title="twitter" alt="twitter">
<span class="n-footer__social-link-text">twitter</span>
<svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
<title>twitter@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/flexpod/common/svg/sprite.svg#twitter"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-facebook" href="https://www.facebook.com/NetApp" target="_blank" title="facebook" alt="facebook">
<span class="n-footer__social-link-text">facebook</span>
<svg class="n-icon-facebook n-footer__social-link-icon" aria-labelledby="title">
<title>facebook@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/flexpod/common/svg/sprite.svg#facebook"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-linkedin" href="https://www.linkedin.com/company/netapp" target="_blank" title="linkedin" alt="linkedin">
<span class="n-footer__social-link-text">linkedin</span>
<svg class="n-icon-linkedin n-footer__social-link-icon" aria-labelledby="title">
<title>linkedin@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/flexpod/common/svg/sprite.svg#linkedin"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-youtube" href="https://www.youtube.com/user/NetAppTV" target="_blank" title="youtube" alt="youtube">
<span class="n-footer__social-link-text">youtube</span>
<svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
<title>youtube@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/flexpod/common/svg/sprite.svg#youtube"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-slideshare" href="https://www.slideshare.net/NetApp" target="_blank" title="slideshare" alt="slideshare">
<span class="n-footer__social-link-text">slideshare</span>
<svg class="n-icon-slideshare n-footer__social-link-icon" aria-labelledby="title">
<title>slideshare@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/flexpod/common/svg/sprite.svg#slideshare"></use>
</svg>

</a>
</li>
</ul>
</div>

</div>
<div class="n-footer__bottom-right">
  <p class="n-footer__fine-print">Have feedback for our website?<a target="_self" href="javascript:netapp_mailto()" class="n-footer__copyright">Let us know</a>
  <a href="https://docs.netapp.com/us-en/announcements/" class="n-footer__copyright">Announcements</a>
  </p>
</div>
</div>
</div>
</footer>

      </div>

      <!-- Elasticsearch JS -->
      <script type="text/javascript" src='/us-en/flexpod/js/bundle.js'></script>

      <!-- Syntax Highlighting -->
      <script type="text/javascript" src='/us-en/flexpod/js/prism.js'></script>
      <script type="text/javascript" src='/us-en/flexpod/js/prism-curl.js'></script>
    </div>
    <script>
      document.body.offsetWidth=1903;
      cookieLaw = {}
      cookieLaw.euCountry = "US";
      cookieLaw.invoke = function(){return false;}
    </script>
    <script src='/us-en/flexpod/js/www-ntap.js'></script>
    <script src='/us-en/flexpod/js/tabbed-blocks.js'></script>
  </body>

  
</html>
